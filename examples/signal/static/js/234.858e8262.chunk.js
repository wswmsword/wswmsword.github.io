"use strict";(self.webpackChunksignal=self.webpackChunksignal||[]).push([[234],{535:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(43),i=n(216),a=n(579);function r(e){return function(t){const{setItemOffsetYs:n,itemsDividedByCols:r,itemInfosRef:o,deselect:c,select:l,placeH:u,gapY:d,setPlaceTop:p,setPlaceData:f,setH:h,originH:m,...g}=t,{msgId:x}=(0,i.g)(),y=(0,s.useCallback)((()=>{const e=o.current.map((e=>e.id));n(e.map((e=>[e,0]))),c(),h(m)}),[c,o,m,h,n]),v=(0,s.useCallback)((()=>{if(0===r.length)return;const e=o.current.find((e=>e.data.id===x));if(null==e){const e=function(e,t,n){return e.current.map((e=>[e.id,t+n]))}(o,u,d);return n(e),p(0),void h(m+u+d)}l(e.id);const t=function(e,t,n,s){const i=e.top+e.height;return t.reduce(((e,t)=>{const a=t.length;let r=0,o=0,c=0;for(let l=0;l<a;++l){const e=t[l],a=e.top+e.height;if(a>=i){r=t[l].id,o=a-i,c=n-o+s;break}}return e=e.concat({separator:r,negative:o,positive:c})}),[])}(e,r,u,d),s=o.current.map((e=>{const n=e.colId,{positive:s,negative:i,separator:a}=t[n];return[e.id,e.id>a?s:-i]}));n(s),p(e.top+e.height+d),h(m+u+d)}),[d,o,r,x,m,u,l,h,n,p]);return(0,s.useEffect)((()=>(x?v():y(),()=>{})),[y,x,v]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(e,{...g})})}}},317:(e,t,n)=>{n.d(t,{g:()=>x,A:()=>g});var s=n(43);const i="pin-layout_wrapper__uFJWR",a="pin-layout_item__CtSo1",r="pin-layout_move_trans__scN7U",o="pin-layout_selected__Kp0Ak",c="pin-layout_placeholder__leQGq";var l=n(579);const u=function(e){let{width:t,itemWidth:n,colNum:u,gapX:p=36,gapY:f=36,placeHeight:h=521,ItemComp:m,itemsData:g=[],PlaceComp:x}=e;const[y,v]=(0,s.useState)(0),[_,b]=(0,s.useState)(0),[j,M]=(0,s.useState)(0),[w,I]=(0,s.useState)(0),[k,C]=(0,s.useState)([]),H=(0,s.useRef)(k),[N,Y]=(0,s.useState)([]),[A,z]=(0,s.useState)(null),[D,E]=(0,s.useState)(0),[S,$]=(0,s.useState)({init:"bird"}),[T,W]=(0,s.useState)([]),B=(0,s.useRef)(null),[P,F]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=g.length;C((t=>{const n=t.length;return t.concat([...Array(e-n)].map(((e,t)=>({id:0,top:0,left:0,height:0,colId:0,offsetY:0,data:g[n+t]}))))})),F(!1),setTimeout((()=>{F(!0)}),69)}),[g]),(0,s.useEffect)((()=>{I(null==t?p||36:Math.floor((t-n*u)/(u-1))),v(t||p*(u-1)+n*u)}),[t,p,u,n]),(0,s.useEffect)((()=>{if(T.filter((e=>e)).length!==g.length)return;const e=g.length,t=B.current;if(null==t)return;const s=Array.prototype.map.call(t.childNodes,(e=>e.clientHeight)),i=[0];for(let d=1;d<u;++d)i.push(i[d-1]+n+w);const a=[];let r=0;const o=[],c=[],l=[];for(let n=0;n<u;++n)r=Math.max(r,s[n]),a.push(i[n]),o.push(0),l.push(n),c.push(n);for(let n=u;n<e;++n){const{minColId:e,minItemId:t}=d(u,c,o,s),p=o[t]+s[t]+f;r=Math.max(p+s[n],r),a.push(i[e]),o.push(p),l.push(e),c[e]=n}b(r),M(r);const p=[...Array(e)].map(((e,t)=>({id:t,top:o[t],left:a[t],height:s[t],colId:l[t],offsetY:0,data:g[t]})));C(p),H.current=p;const h=p.reduce(((e,t)=>{const n=t.colId;return e[n]=e[n].concat(t),e}),[...Array(u)].fill([]));Y(h)}),[B,y,n,u,w,f,g,T]);const L=(0,s.useCallback)((e=>{const t=new Map(e);C((e=>{const n=e.map((e=>{const n=null==t.get(e.id)?e.offsetY:t.get(e.id);return{...e,offsetY:n}}));return H.current=n,n}))}),[]),R=(0,s.useCallback)((()=>z(null)),[]),X=(0,s.useCallback)((e=>z(e)),[]),q=(0,s.useCallback)((e=>()=>{W((t=>{const n=[...t];return n[e]=!0,n}))}),[]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{ref:B,className:i,style:{width:`${y}px`,height:`${_}px`},children:[k.map(((e,t)=>(0,l.jsx)(s.Fragment,{children:(0,l.jsx)("div",{className:`${a} ${e.id===A?o:""} ${P?r:""}`,style:{position:"absolute",transform:`translateY(${e.offsetY}px)`,left:`${e.left}px`,top:`${e.top}px`,width:`${n}px`},children:m&&(0,l.jsx)(m,{...e.data,info:e,colId:e.colId,selected:A===e.id,selectedItem:A,setItemOffsetYs:L,itemsDividedByCols:N,itemInfos:k,deselect:R,select:X,placeH:h,gapY:f,gapX:p,setPlaceTop:E,setPlaceData:$,originH:j,setH:b,readyToCalc:q(t)})})},t))),x&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:c,style:{top:`${D}px`,height:`${h}px`},children:(0,l.jsx)(x,{selectedItem:A,setItemOffsetYs:L,itemsDividedByCols:N,itemInfosRef:H,deselect:R,select:X,placeH:h,gapY:f,gapX:p,setPlaceTop:E,setPlaceData:$,originH:j,setH:b,context:[S]})})})]})})};function d(e,t,n,s){let i=n[t[0]]+s[t[0]],a=t[0],r=0;for(let o=1;o<e;++o){const e=t[o],c=n[e]+s[e];c<i&&(i=c,a=e,r=o)}return{minItemId:a,minColId:r}}function p(e,t){let{gap:n,itemW:i}=t;return function(t){const[a,r]=(0,s.useState)(null),o=function(){const[e,t]=(0,s.useState)({width:void 0,height:void 0});return(0,s.useEffect)((()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),e}();return(0,s.useEffect)((()=>{const e=o.width;if(null==e)return;const t=f(i,i,n,e);r(t)}),[o]),a?(0,l.jsx)(e,{...t,colNum:a}):(0,l.jsx)(l.Fragment,{children:"Now Loading..."})}}function f(e,t,n,s){return e>s?0:1+f(e+n+t,t,n,s)}var h=n(578);const m=e=>{let{mGap:t,gap:n,mItemW:i,itemW:a,...r}=e;const o=(0,h.A)(),[c,d]=(0,s.useState)(n),[f,m]=(0,s.useState)(a),g=(0,s.useMemo)((()=>p(u,{gap:c,itemW:f})),[c,f]);return(0,s.useEffect)((()=>{o?(d(t),m(i)):(d(n),m(a))}),[o,t,n,i,a]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(g,{...r,gapX:c,gapY:c,itemWidth:f})})},g=m,x=(0,s.memo)(m)},29:(e,t,n)=>{n.d(t,{iI:()=>a,r9:()=>r});var s=n(677);const i=[{id:0,title:"Enjoying a cup of coffee",src:"https://images.unsplash.com/photo-1631016800696-5ea8801b3c2a?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2Mzg4Ng&ixlib=rb-1.2.1&q=80&w=400"},{id:1,title:"Magical winter sunrise",src:"https://images.unsplash.com/photo-1618824834718-92f8469a4dd1?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2NDAzMw&ixlib=rb-1.2.1&q=80&w=400"},{id:2,title:"Dalmatian and pumpkins",src:"https://images.unsplash.com/photo-1633289944756-6295be214e16?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2NDA3Nw&ixlib=rb-1.2.1&q=80&w=400"},{id:3,title:"Fall into Autumn \ud83c\udf42\ud83d\udc36",src:"https://images.unsplash.com/photo-1633172905740-2eb6730c95b4?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2NDEwMg&ixlib=rb-1.2.1&q=80&w=400"}];function a(e){return i.find((t=>t.id===e))}function r(){return i[(0,s.y)(0,i.length-1)].id}},996:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var s=n(43),i=n(216),a=n(916);const r="overlay_overlay_bg__inLgz",o="overlay_btn_close__gg3g7",c="overlay_overlay_page__unm8b",l="overlay_tb_wrapper__YxBMj",u="overlay_visible_tb__Du2NM",d="trans_page_appear__4QhzA",p="trans_page_appear_active__jzov8";var f=n(524),h=n(865),m=n(613),g=n(0),x=n(579);function y(e,t){return(0,m.B)(t),e.contains(t)}const v=e=>{const{opened:t,close:n,antiTouch:i}=e,[v,_]=(0,s.useState)(!1),b=(0,s.useRef)(null),j=()=>{_((e=>!e))},M=(0,f.A)("Escape");(0,s.useEffect)((()=>{t&&M&&n()}),[M]);return(0,s.useEffect)((()=>{const e=document.getElementsByTagName("body");return e[0].style.overflow="hidden",()=>{e[0].style.overflow="auto"}}),[]),(0,x.jsxs)(a.A,{children:[(0,x.jsxs)("div",{className:`${r}`,onClick:e=>{e.stopPropagation();const t=e.currentTarget,s=e.target;(0,m.B)(t),(0,m.B)(s);const a=t.childNodes;let r=!1;for(let n=0;n<a.length;n++)if(y(a[n],s)){r=!0;break}r||(i?j():n())},children:[(0,x.jsx)("button",{className:o,onClick:e=>{n(),e.stopPropagation()}}),(0,x.jsx)(h.A,{nodeRef:b,in:!0,timeout:180,classNames:{appear:d,appearActive:p},appear:!0,unmountOnExit:!0,children:(0,x.jsx)("div",{ref:b,className:c,children:e.children})})]}),(0,x.jsx)("div",{className:`${l} ${v?u:""}`,children:(0,x.jsx)(g.A,{title:"\u786e\u8ba4\u5173\u95ed\uff1f",content:"\u786e\u8ba4\u5173\u95ed\u5c06\u6e05\u7a7a\u66f4\u6539\uff0c\u662f\u5426\u786e\u8ba4\u5173\u95ed\uff1f",opened:v,cancel:j,close:()=>{j(),n()}})})]})};var _=n(29),b=n(317),j=n(475);const M="grey-pin-item-event_grey_box__DutEw",w="grey-pin-item-event_content__vlr+t",I="grey-pin-item-event_selected__vpKVv",k=e=>{const{h:t,selected:n,readyToCalc:a,info:r}=e,o=(0,i.zy)().state||{};return(0,s.useLayoutEffect)((()=>{a()}),[]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{className:`${M} ${n?I:""}`,style:{width:"100%",height:`${t||100}px`},children:(0,x.jsx)(j.N_,{to:n?"":`msgs/${r.data.id}`,state:{backgroundLocation:o.backgroundLocation},children:(0,x.jsx)("div",{className:w})})})})};var C=n(677),H=n(535),N=n(14);function Y(){const e=(0,i.Zp)(),t=(0,i.zy)(),{id:n}=(0,i.g)(),a=(0,_.iI)(Number(n)),[r,o]=(0,s.useState)([...Array(25)].map(((e,t)=>({id:(0,C.v)(),h:(0,C.y)(69,361),event:!1,eventImgId:(0,_.r9)()})))),c=(0,s.useMemo)((()=>(0,H.A)(i.sv)),[]),l=(0,s.useCallback)((()=>{const e=[...Array(25)].map(((e,t)=>({id:(0,C.v)(),h:(0,C.y)(69,361),event:!1,eventImgId:(0,_.r9)()})));o((t=>t.concat(e)))}),[]);if(!a)return null;return(0,x.jsxs)(v,{opened:!0,close:()=>{!function(){const n=t.state.backgroundLocation;if(n){const t=n.pathname||"/";e(t)}else e("/")}()},antiTouch:!0,children:[(0,x.jsxs)("div",{style:{display:"grid",justifyContent:"center",padding:"8px 8px"},children:[(0,x.jsx)("h1",{id:"label",style:{margin:0},children:a.title}),(0,x.jsx)("img",{style:{margin:"16px 0",borderRadius:"8px",width:"100%",height:"auto"},width:400,height:400,src:a.src,alt:""})]}),(0,x.jsx)(b.g,{mGap:12,gap:36,mItemW:180,itemW:210,itemsData:r,ItemComp:k,PlaceComp:c,placeHeight:521}),(0,x.jsx)("div",{style:{height:"99px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,x.jsx)(N.A,{onClick:l,children:"More"})})]})}},677:(e,t,n)=>{n.d(t,{v:()=>i,y:()=>s});const s=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),i=()=>[...Array(6)].map((()=>0===s(0,1)?"1234567890"[s(0,9)]:"qwertyuiopasdfghjklzxcvbnm"[s(0,25)])).join("")}}]);
//# sourceMappingURL=234.858e8262.chunk.js.map