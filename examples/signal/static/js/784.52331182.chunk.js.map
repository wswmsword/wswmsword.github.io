{"version":3,"file":"static/js/784.52331182.chunk.js","mappings":"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","sources":["webpack://signal/./src/components/fakes/grey-pin-item/index.module.css?6ab2","components/fakes/grey-pin-item/index.tsx","components/hoc/with-expandable-for-pin/index.js","webpack://signal/./src/components/pin-layout/index.module.css?3a21","components/pin-layout/index.tsx","components/hoc/with-auto-column/index.tsx","hooks/useWindowSize.js","components/media-pin-layout/index.tsx","fakes/collection-infos.ts","webpack://signal/./src/components/pages/collection/index.module.css?e1ed","webpack://signal/./src/components/pages/collection/editor.module.css?961a","components/pages/collection/popover-editor.js","webpack://signal/./src/components/pages/collection/grey-bar.module.css?eb20","components/pages/collection/fake-bar.js","components/pages/collection/index.tsx","tools/number.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"grey_box\":\"grey-pin-item_grey_box__ligHe\",\"content\":\"grey-pin-item_content__NPwBi\",\"selected\":\"grey-pin-item_selected__zLvnq\",\"event\":\"grey-pin-item_event__ojc6B\"};","import { useLayoutEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport styles from \"./index.module.css\";\nimport { itemInfo } from \"../../pin-layout/index\";\n\ntype PinItemProps = {\n  h: number;\n  event: boolean;\n  eventImgId?: number;\n  selected: boolean;\n  readyToCalc: () => {/* */};\n  info: itemInfo;\n}\n\nconst GreyPinItem = (props: PinItemProps) => {\n  // const h = random(69, 361);\n  const { h, selected, readyToCalc, event, eventImgId, info } = props;\n  const location = useLocation();\n  useLayoutEffect(() => {\n    readyToCalc();\n  }, []);\n  return <>\n    <div\n      className={`${styles.grey_box} ${selected ? styles.selected : ''}`}\n      style={{\n        width: `100%`,\n        height: `${h || 100}px`,\n      }}>\n      <Link to={selected ? '' : `msgs/${info.data.id}`}>\n        <div className={styles.content}></div>\n      </Link>\n      {event && <>\n        <Link\n          key={eventImgId}\n          to={`/events/${eventImgId}`}\n          // This is the trick! Set the `backgroundLocation` in location state\n          // so that when we open the modal we still see the current page in\n          // the background.\n          state={{ backgroundLocation: location }}>\n          <div className={styles.event} />\n        </Link>\n      </>}\n    </div>\n  </>;\n};\n\nexport default GreyPinItem;","import { useCallback, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function withExpandableForPin(WrappedComponent) {\n  return function CompWithExpandableForPin(props) {\n    const { setItemOffsetYs, itemsDividedByCols, itemInfosRef, deselect, select, placeH, gapY, setPlaceTop, setPlaceData, setH, originH, ...rest } = props;\n    const { msgId } = useParams();\n    /**取消选中并收缩 */\n    const deselecteAndCollapse = useCallback(() => {\n      const itemIds = itemInfosRef.current.map(info => info.id);\n      setItemOffsetYs(itemIds.map(id => [id, 0]));\n      deselect();\n      setH(originH);\n    }, [deselect, itemInfosRef, originH, setH, setItemOffsetYs]);\n\n    /**选中并展开 */\n    const selectAndExpand = useCallback(() => {\n      if (itemsDividedByCols.length === 0) { return ; }\n      const info = itemInfosRef.current.find(info => info.data.id === msgId);\n      if (info == null) {\n        // 在顶部展开\n        const offsetYs = getOffsetAtTop(itemInfosRef, placeH, gapY);\n        setItemOffsetYs(offsetYs);\n        setPlaceTop(0);\n        setH(originH + placeH + gapY);\n        return ;\n      }\n      // 选中\n      select(info.id);\n      // 计算因为展开详情区域项目需要移动的偏移量\n      const expandingOffset = calcOffset(info, itemsDividedByCols, placeH, gapY);\n      const offsetYs = itemInfosRef.current.map(info => {\n        const col = info.colId;\n        const { positive, negative, separator } = expandingOffset[col];\n        return [info.id, info.id > separator ? positive : -negative];\n      });\n      setItemOffsetYs(offsetYs);\n      // 设置详情区域距离顶部的距离\n      setPlaceTop(info.top + info.height + gapY);\n      // 设置展开后的容器高度\n      setH(originH + placeH + gapY);\n    }, [gapY, itemInfosRef, itemsDividedByCols, msgId, originH, placeH, select, setH, setItemOffsetYs, setPlaceTop]);\n\n    useEffect(() => {\n      if (msgId) {\n        selectAndExpand();\n      } else {\n        deselecteAndCollapse();\n      }\n      return () => { /* unmount */ };\n    }, [deselecteAndCollapse, msgId, selectAndExpand]);\n\n    return <>\n      <WrappedComponent {...rest} />\n    </>;\n  };\n}\n\n/**获取在顶部展开时项目的偏移量 */\nfunction getOffsetAtTop(itemInfosRef, placeH, gapY) {\n  return itemInfosRef.current.map(info => [info.id, placeH + gapY]);\n}\n\n/**计算每一纵列因为展开而需要移动的偏移量 */\nfunction calcOffset(info, itemsDividedByCols, placeH, gapY) {\n  const baseBottom = info.top + info.height;\n  return itemsDividedByCols.reduce((acc, colInfos) => {\n    const len = colInfos.length;\n    let separator = 0;\n    let negative = 0;\n    let positive = 0;\n    for (let i = 0; i < len; ++ i) {\n      const curInfo = colInfos[i];\n      const curBottom = curInfo.top + curInfo.height;\n      if (curBottom >= baseBottom) {\n        separator = colInfos[i].id;\n        negative = curBottom - baseBottom;\n        positive = placeH - negative + gapY;\n        break;\n      }\n    }\n    acc = acc.concat({\n      separator, // 分隔点\n      negative, // 向上偏移距离\n      positive, // 向下偏移距离\n    });\n    return acc;\n  }, []);\n}","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"pin-layout_wrapper__uFJWR\",\"pin_item_wrapper\":\"pin-layout_pin_item_wrapper__hP1WE\",\"item\":\"pin-layout_item__CtSo1\",\"move_trans\":\"pin-layout_move_trans__scN7U\",\"transparent\":\"pin-layout_transparent__EHVYy\",\"opacity_trans\":\"pin-layout_opacity_trans__zhF+L\",\"selected\":\"pin-layout_selected__Kp0Ak\",\"placeholder\":\"pin-layout_placeholder__leQGq\"};","import React, { useState, useRef, useEffect, Fragment, useCallback } from \"react\";\nimport styles from \"./index.module.css\";\n\nexport interface PinProps {\n  width?: number,\n  itemWidth: number,\n  colNum: number,\n  gapX?: number,\n  gapY?: number,\n  placeHeight?: number,\n  itemsData: Record<string, unknown>[],\n  ItemComp?: React.ComponentType<any>,\n  PlaceComp?: React.ComponentType<any>,\n}\n\nexport interface itemInfo {\n  id: number,\n  top: number,\n  left: number,\n  height: number,\n  colId: number,\n  offsetY: number,\n  data: Record<string, unknown>,\n}\n\n/**\n * 砖块布局组件\n * \n * 设置宽度，子项目将均匀布局在宽度中；设置左右间隔，子项目将按间隔\n * 布局，宽度即子项目间隔后的宽度。\n */\nfunction PinLayout({ width, itemWidth, colNum, gapX = 36, gapY = 36, placeHeight = 521, ItemComp, itemsData = [], PlaceComp }: PinProps) {\n  // 容器宽度\n  const [w, setW] = useState(0);\n  // 容器高度\n  const [h, setH] = useState(0);\n  // 容器的初始高度\n  const [h2, setH2] = useState(0);\n  // 项目横向间隔\n  const [g, setG] = useState(0);\n  // top, left, ItemComp，项目信息\n  const [itemInfos, setItemInfos] = useState<itemInfo[]>([]);\n  const itemInfosRef = useRef<itemInfo[]>(itemInfos);\n  // 每一纵列由上至下的项目信息\n  const [infosDividedByCols, setInfosDividedByCols] = useState<itemInfo[][]>([]);\n  // 选中的项目 id\n  const [selectedItem, setSelectedItem] = useState<number | null>(null);\n  // const [placeholderTop, setPlaceholderTop] = useState(0);\n  // 详情区域距离顶部的距离\n  const [placeT, setPlaceTop] = useState(0);\n  const [placeData, setPlaceData] = useState({ init: \"bird\" });\n  // 加载完成的项目数量\n  const [loadedItems, setLoaded] = useState<Array<boolean | undefined>>([]);\n\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  const [hasMoveAnime, setHasMoveAnime] = useState(false);\n\n  useEffect(() => {\n    // 子项目数目\n    const itemsLen = itemsData.length;\n    setItemInfos(v => {\n      const prevLen = v.length;\n      const concatedItems = v.concat([...Array(itemsLen - prevLen)].map((_, i) => ({\n        id: 0,\n        top: 0, // 项目顶部与容器顶部的距离\n        left: 0, // 项目的左边与容器左边的距离\n        height: 0, // 项目高度\n        colId: 0, // 项目所在纵列\n        offsetY: 0, // 项目偏移距离\n        data: itemsData[prevLen + i],\n      })));\n      return concatedItems;\n    });\n\n    setHasMoveAnime(false);\n    setTimeout(() => {\n      setHasMoveAnime(true);\n    }, 69);\n  }, [itemsData]);\n\n  useEffect(() => {\n    // 如果提供宽度就根据宽度计算横向间隔，如果提供间隔就取间隔\n    if (width == null) {\n      setG(gapX || 36);\n    } else {\n      setG(Math.floor((width - itemWidth * colNum) / (colNum - 1)));\n    }\n    // 如果提供宽度就取宽度，如果提供左右间隔就使用左右间隔计算宽度\n    setW(width || gapX * (colNum - 1) + itemWidth * colNum);\n  }, [width, gapX, colNum, itemWidth]);\n\n  useEffect(() => {\n    // 加载完成的项目数量\n    const loadedItemsLen = loadedItems.filter(b => b).length;\n    // 所有项目数量\n    const totalItemsLen = itemsData.length;\n    if (loadedItemsLen !== totalItemsLen) { return; }\n    // 子项目数目\n    const itemsLen = itemsData.length;\n    // 项目的高度\n    const wrapperEl = wrapperRef.current;\n    if (wrapperEl == null) { return; }\n    const itemHs = Array.prototype.map.call<NodeListOf<ChildNode>, any, number[]>(wrapperEl.childNodes, (node: HTMLDivElement) => node.clientHeight);\n    // 列的左边距离\n    const colLs = [0];\n    for (let i = 1; i < colNum; ++ i) {\n      colLs.push(colLs[i - 1] + itemWidth + g);\n    }\n    // 项目的左边距离\n    const itemLs: number[] = [];\n    // 容器高度\n    let wrapperH = 0;\n    // 项目的上边距离\n    const itemTs: number[] = [];\n    // 每一纵列底部项目的 id\n    const colBottomIds = [];\n    // 项目的所在列 id\n    const itemCs: number[] = [];\n    // 第一横排的容器高度、项目左边距离、项目顶部距离；纵列最下面项目的 id\n    for (let i = 0; i < colNum; ++ i) {\n      wrapperH = Math.max(wrapperH, itemHs[i]);\n      itemLs.push(colLs[i]);\n      itemTs.push(0);\n      itemCs.push(i);\n      colBottomIds.push(i);\n    }\n    // 第二行开始到最后一个项目的容器高度、项目左边距离、项目顶部距离；纵列最下面项目的 id\n    for (let i = colNum; i < itemsLen; ++ i) {\n      // 当前最短的纵列的列 id 与这一列最底部的项目 id\n      const { minColId, minItemId } = getMinHeight(colNum, colBottomIds, itemTs, itemHs);\n      const currentTop = itemTs[minItemId] + itemHs[minItemId] + gapY;\n      wrapperH = Math.max(currentTop + itemHs[i], wrapperH);\n      itemLs.push(colLs[minColId]);\n      itemTs.push(currentTop);\n      itemCs.push(minColId);\n      colBottomIds[minColId] = i;\n    }\n    setH(wrapperH);\n    setH2(wrapperH);\n    // 生成项目信息\n    const newItemInfos = [...Array(itemsLen)].map((_, i) => ({\n      id: i,\n      top: itemTs[i],\n      left: itemLs[i],\n      height: itemHs[i],\n      colId: itemCs[i],\n      offsetY: 0,\n      data: itemsData[i],\n    }));\n    setItemInfos(newItemInfos);\n    itemInfosRef.current = newItemInfos;\n    // 每一纵列的项目信息\n    const infosDividedByCols: itemInfo[][] = newItemInfos.reduce((acc, cur) => {\n      const curCol = cur.colId;\n      acc[curCol] = acc[curCol].concat(cur);\n      return acc;\n    }, [...Array(colNum)].fill([]));\n    setInfosDividedByCols(infosDividedByCols);\n  }, [wrapperRef, w, itemWidth, colNum, g, gapY, itemsData, loadedItems]);\n\n  /**\n   * 指定 item 设置偏移\n   * @param {Array} itemsMapAry \n   * 形如\n   * [[id1, offset1],\n   * [id2, offset2],\n   * [id3, offset3]]\n   */\n  const setItemOffsetYs = useCallback((itemsMapAry: Array<readonly [number, number]>) => {\n    const offsetMap = new Map<number, number>(itemsMapAry);\n    setItemInfos((itemInfos: itemInfo[]) => {\n      const res = itemInfos.map((item: itemInfo) => {\n        const offsetY = offsetMap.get(item.id) == null ? item.offsetY : offsetMap.get(item.id) as number;\n        return {\n          ...item,\n          offsetY,\n        };\n      });\n      itemInfosRef.current = res;\n      return res;\n    });\n  }, []);\n\n  const deselect = useCallback(() => setSelectedItem(null), []);\n  const select = useCallback((id: number) => setSelectedItem(id), []);\n\n  const setLoadedItem = useCallback((i: number) => {\n    return () => {\n      setLoaded(v => {\n        const newV = [...v];\n        newV[i] = true;\n        return newV;\n      });\n    };\n  }, []);\n\n  return (<>\n    <div\n      ref={wrapperRef}\n      className={styles.wrapper}\n      style={{\n        width: `${w}px`,\n        height: `${h}px`,\n      }}>\n      {itemInfos.map((item, i) => <Fragment key={i}>\n        <div\n          className={`${styles.item} ${item.id === selectedItem ? styles.selected : ''} ${hasMoveAnime ? styles.move_trans : ''}`}\n          style={{\n            position: \"absolute\",\n            transform: `translateY(${item.offsetY}px)`,\n            left: `${item.left}px`,\n            top: `${item.top}px`,\n            width: `${itemWidth}px`,\n          }}>\n          {ItemComp && <ItemComp\n            {...item.data}\n            info={item} // 项目数据\n            colId={item.colId} // 项目所处的纵列\n            selected={selectedItem === item.id} // 项目是否被选中\n            selectedItem={selectedItem} // 被选中的项目 id\n            setItemOffsetYs={setItemOffsetYs} // 设置项目的纵向偏移\n            itemsDividedByCols={infosDividedByCols} // 按纵列分的项目数据\n            itemInfos={itemInfos} // 所有项目数据\n            deselect={deselect} // 取消选中函数\n            select={select} // 选中函数\n            placeH={placeHeight} // 详情区域的高度\n            gapY={gapY} // 纵向的项目间的间隔\n            gapX={gapX} // 横向的项目间的间隔\n            setPlaceTop={setPlaceTop} // 设置详情区域距离顶端的距离\n            setPlaceData={setPlaceData} // 设置详情区域的数据\n            originH={h2} // 原始容器的高度\n            setH={setH} // 设置容器的高度\n            readyToCalc={setLoadedItem(i)} // 设置项目加载完成，可以计算位置了\n          />}\n        </div>\n      </Fragment>)}\n      {PlaceComp && <>\n        <div\n          className={styles.placeholder}\n          style={{\n            top: `${placeT}px`,\n            height: `${placeHeight}px`,\n          }}>\n          <PlaceComp\n            selectedItem={selectedItem} // 被选中的项目 id\n            setItemOffsetYs={setItemOffsetYs} // 设置项目的纵向偏移\n            itemsDividedByCols={infosDividedByCols} // 按纵列分的项目数据\n            itemInfosRef={itemInfosRef} // 所有项目数据\n            deselect={deselect} // 取消选中函数\n            select={select} // 选中函数\n            placeH={placeHeight} // 详情区域的高度\n            gapY={gapY} // 纵向的项目间的间隔\n            gapX={gapX} // 横向的项目间的间隔\n            setPlaceTop={setPlaceTop} // 设置详情区域距离顶端的距离\n            setPlaceData={setPlaceData} // 设置详情区域的数据\n            originH={h2} // 原始容器的高度\n            setH={setH} // 设置容器的高度\n            context={[placeData]}\n          />\n        </div>\n      </>}\n    </div>\n  </>);\n}\n\nexport default PinLayout;\n\n\nfunction getMinHeight(colNum: number, colBottomIds: number[], itemTops: number[], itemHeights: number[]) {\n  let minTop = itemTops[colBottomIds[0]] + itemHeights[colBottomIds[0]],\n    minItemId = colBottomIds[0],\n    minColId = 0;\n  for (let i = 1; i < colNum; ++ i) {\n    const itemId = colBottomIds[i];\n    const curTop = itemTops[itemId] + itemHeights[itemId];\n    if (curTop < minTop) {\n      minTop = curTop;\n      minItemId = itemId;\n      minColId = i;\n    }\n  }\n  return { minItemId, minColId };\n}","import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport useWindowSize from \"../../../hooks/useWindowSize\";\n\ninterface hocProps {\n  gap: number;\n  itemW: number;\n}\n\ninterface ExtraInfo {\n  colNum: number;\n}\n\n/**根据屏幕宽度、每个项目的左右间隔、项目宽度，计算一行能放的项目数量 */\nexport default function withAutoColumn<P>(WrappedComponent: React.ComponentType<P>, { gap, itemW }: hocProps) {\n  return function WithAutoColumn(props: Omit<P, keyof ExtraInfo>) {\n    const [colNum, setColNum] = useState<number | null>(null);\n    const size = useWindowSize();\n\n    useEffect(() => {\n      const windowW = size.width;\n      if (windowW == null) { return; }\n      const colNum = calColsNum(itemW, itemW, gap, windowW);\n      setColNum(colNum);\n    }, [size]);\n\n    if (colNum) {\n      return <WrappedComponent\n        {...(props) as P}\n        colNum={colNum}\n      />;\n    } else {\n      return <>Now Loading...</>;\n    }\n  };\n}\n\nfunction calColsNum(accWidth: number, itemWidth: number, gap: number, windowW: number): number {\n  if (accWidth > windowW) { return 0; }\n  return 1 + calColsNum(accWidth + gap + itemWidth, itemWidth, gap, windowW);\n}","import { useState, useEffect } from \"react\";\n\nexport default function useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState({\n    width: undefined,\n    height: undefined,\n  });\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []); // Empty array ensures that effect is only run on mount\n  return windowSize;\n}","import { useState, useEffect, memo, useMemo } from \"react\";\nimport PinLayout, { PinProps } from \"../pin-layout\";\nimport withAutoColumn from \"../hoc/with-auto-column\";\nimport useMobile from \"../../hooks/useMobile\";\n\ninterface MediaPinProps extends PinProps {\n  mGap: number,\n  gap: number,\n  mItemW: number,\n  itemW: number,\n}\n\ninterface ExtraInfo {\n  colNum: number;\n  itemWidth: number;\n}\n\n/**砖块布局移动桌面适配组件 */\nconst MediaPin = ({ mGap, gap, mItemW, itemW, ...rest }: Omit<MediaPinProps, keyof ExtraInfo>) => {\n  const isMobile = useMobile();\n  const [g, setG] = useState(gap);\n  const [iW, setIW] = useState(itemW);\n  const PinLayoutWithAutoCol = useMemo(() => withAutoColumn(PinLayout, {\n    gap: g,\n    itemW: iW,\n  }), [g, iW]);\n  useEffect(() => {\n    if (isMobile) {\n      setG(mGap);\n      setIW(mItemW);\n    } else {\n      setG(gap);\n      setIW(itemW);\n    }\n  }, [isMobile, mGap, gap, mItemW, itemW]);\n  return <>\n    <PinLayoutWithAutoCol {...rest} gapX={g} gapY={g} itemWidth={iW} />\n  </>;\n};\n\nexport default MediaPin;\n\nconst MemoizedMediaPin = memo(MediaPin);\n\nexport { MemoizedMediaPin };","import imgPBack from \"../assets/profile-back.png\";\nimport imgPGorege from \"../assets/profile-george.png\";\nimport imgPDraw from \"../assets/profile-draw.jpg\";\nimport imgPUta from \"../assets/profile-uta.jpg\";\nimport imgPJiaozi from \"../assets/profile-jiaozi.jpg\";\n\ntype collectionInfo = {\n  id: number;\n  title: string;\n  titleImg: any;\n  desc: string;\n  state: number;\n  first: {\n      id: number;\n      name: string;\n      avatar: string;\n  };\n  postsNum: string;\n  keyIdx: number;\n  members: {\n      id: number;\n      name: string;\n      avatar: string;\n  }[];\n};\n\nconst collectionInfos: collectionInfo[] = [{\n  id: 1,\n  title: \"想去的地方\",\n  titleImg: imgPBack,\n  desc: '很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长很长的地方，有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行有五行。',\n  state: 1,\n  first: {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  },\n  postsNum: '10',\n  keyIdx: 1,\n  members: [{\n    id: 2,\n    name: \"wsWmsword\",\n    avatar: \"/src/assets/avatar2.png\",\n  }, {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  }],\n}, {\n  id: 2,\n  title: \"中文歌\",\n  titleImg: imgPGorege,\n  desc: 'My favourite Chinese songs. ',\n  state: 1,\n  first: {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  },\n  postsNum: '10',\n  keyIdx: 1,\n  members: [{\n    id: 2,\n    name: \"wsWmsword\",\n    avatar: \"/src/assets/avatar2.png\",\n  }, {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  }],\n}, {\n  id: 3,\n  title: \"绘画技巧\",\n  titleImg: imgPDraw,\n  desc: \"只要能握笔，就能学会作画！---《素描的诀窍》\",\n  state: 1,\n  first: {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  },\n  postsNum: '10',\n  keyIdx: 1,\n  members: [{\n    id: 2,\n    name: \"wsWmsword\",\n    avatar: \"/src/assets/avatar2.png\",\n  }, {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  }],\n}, {\n  id: 4,\n  title: \"算法\",\n  titleImg: imgPUta,\n  desc: \"我的算法不是最快的，但却是最有爱的。\",\n  state: 1,\n  first: {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  },\n  postsNum: '10',\n  keyIdx: 1,\n  members: [{\n    id: 2,\n    name: \"wsWmsword\",\n    avatar: \"/src/assets/avatar2.png\",\n  }, {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  }],\n}, {\n  id: 5,\n  title: \"开发\",\n  titleImg: imgPJiaozi,\n  desc: \"开发和画画很像，一遍一遍，推倒重建，闪闪发光。\",\n  state: 1,\n  first: {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  },\n  postsNum: '10',\n  keyIdx: 1,\n  members: [{\n    id: 2,\n    name: \"wsWmsword\",\n    avatar: \"/src/assets/avatar2.png\",\n  }, {\n    id: 1,\n    name: \"wsWmsw\",\n    avatar: \"/src/assets/avatar.png\",\n  }],\n}];\n\nconst getCollectionInfoById = (id: number | string | undefined): Promise<collectionInfo> => {\n  const numberId = Number(id);\n  const promise: Promise<collectionInfo> = new Promise(resolve => {\n    setTimeout(() => {\n      const matchedInfo = collectionInfos.filter(info => info.id === numberId)[0];\n      resolve(matchedInfo);\n    }, 700);\n  });\n  return promise;\n};\n\nexport default getCollectionInfoById;","// extracted by mini-css-extract-plugin\nexport default {\"collection_wrapper\":\"collection_collection_wrapper__EucEm\",\"profile\":\"collection_profile__6GvnZ\",\"profile_left\":\"collection_profile_left__SygyC\",\"collection_img_wrapper\":\"collection_collection_img_wrapper__0JEwz\",\"collection_img\":\"collection_collection_img__eS2dw\",\"title_desc\":\"collection_title_desc__m9sS3\",\"title_wrapper\":\"collection_title_wrapper__PtGqG\",\"title\":\"collection_title__RKdAf\",\"content\":\"collection_content__nLXUI\",\"grey_block\":\"collection_grey_block__dq4cC\"};","// extracted by mini-css-extract-plugin\nexport default {\"title_wrapper\":\"editor_title_wrapper__yTtx+\",\"intro_wrapper\":\"editor_intro_wrapper__VL3Yj\",\"funcs_wrapper\":\"editor_funcs_wrapper__yWnhD\",\"title_title\":\"editor_title_title__Qckfz\",\"intro_title\":\"editor_intro_title__ZuLoD\",\"text_message\":\"editor_text_message__+5tL3\"};","import { useState, useEffect } from \"react\";\nimport Panel from \"../../panel\";\nimport styles from \"./editor.module.css\";\nimport BtnBorder from \"../../btn-border\";\nimport Popover from \"../../popover\";\n\n/**弹出编辑面板组件 */\nconst PopoverEditor = props => {\n  const { opened, title, close, intro, } = props;\n\n  const [ delay, setDelay ] = useState(false);\n\n  const saveCollectionInfo = () => {\n    console.log(\"Saved!\");\n  };\n\n  useEffect(() => {\n    if (opened) {\n      setTimeout(() => {\n        setDelay(true);\n      }, 0);\n    } else {\n      setDelay(false);\n    }\n  }, [opened]);\n  return <>\n    <Popover opened={opened} close={close} antiTouch>\n      <Panel opened={opened && delay} title={`编辑“${title}”`} width={420} close={close}>\n        <div className={styles.title_wrapper}>\n          <div className={styles.title_title}>标题</div>\n          <input\n            className={`${styles.input_event} groove_shadow`}\n            type=\"text\"\n            value={title}\n            // eslint-disable-next-line @typescript-eslint/no-empty-function\n            onChange={() => {}} />\n        </div>\n        <div className={styles.intro_wrapper}>\n          <div className={styles.intro_title}>介绍</div>\n          <textarea\n            className={`${styles.text_message} groove_shadow`}\n            value={intro}\n            // eslint-disable-next-line @typescript-eslint/no-empty-function\n            onChange={() => {}} />\n        </div>\n        <div className={styles.funcs_wrapper}>\n          <div className={styles.col_func}><BtnBorder size=\"\" onClick={close}>取消</BtnBorder></div>\n          <div className={styles.col_func}><BtnBorder size=\"\" onClick={saveCollectionInfo}>保存</BtnBorder></div>\n        </div>\n      </Panel>\n    </Popover>\n  </>;\n};\n\nexport default PopoverEditor;","// extracted by mini-css-extract-plugin\nexport default {\"grey_block\":\"grey-bar_grey_block__JYinb\",\"grey_bar\":\"grey-bar_grey_bar__xg2VE\"};","import { useEffect, useState, memo } from \"react\";\nimport { random } from \"../../../tools/number\";\nimport styles from \"./grey-bar.module.css\";\nimport { Fragment } from \"react\";\n\nconst FakeBar = () => {\n  const [ fakeBarWidths, setFakeBarWidths ] = useState([]);\n  useEffect(() => {\n    setFakeBarWidths([...Array(5)].map(_ => random(15, 92)));\n  }, []);\n  const randomBarSize = () => {\n    setFakeBarWidths([...Array(5)].map(_ => random(15, 92)));\n  };\n  return <div className={styles.grey_block} onClick={randomBarSize}>\n    {fakeBarWidths.map((n, i) => <Fragment key={i}>\n      <div className={styles.grey_bar} style={{ width: n + '%' }}></div>\n    </Fragment>)}\n  </div>;\n};\n\nexport default memo(FakeBar);","import { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport getCollectionInfoById from \"../../../fakes/collection-infos\";\nimport styles from \"./index.module.css\";\nimport { random, genIdChars } from \"../../../tools/number\";\nimport ExpandableText from \"../../expandable-text\";\nimport BtnBorder from \"../../btn-border\";\nimport PopoverEditor from \"./popover-editor\";\nimport { MemoizedMediaPin } from \"../../media-pin-layout\";\nimport GreyPinItem from \"../../fakes/grey-pin-item\";\nimport withExpandableForPin from \"../../hoc/with-expandable-for-pin\";\nimport FakeBar from \"./fake-bar\";\nimport { Outlet } from \"react-router-dom\";\nimport React from \"react\";\n\ntype collectionInfo = {\n  id: number;\n  title: string;\n  titleImg: any;\n  desc: string;\n  state: number;\n  first: {\n      id: number;\n      name: string;\n      avatar: string;\n  };\n  postsNum: string;\n  keyIdx: number;\n  members: {\n      id: number;\n      name: string;\n      avatar: string;\n  }[];\n};\n\n/**收藏集 */\nconst Collection = () => {\n  const { id } = useParams();\n  const [ info, setInfo ] = useState<collectionInfo | null>(null);\n  const [ requesting, setRequesting ] = useState(true); // 是否获取到数据\n  const [ openedEditor, setOpenedEditor ] = useState(false);\n  \n  useEffect(() => {\n    getInfo();\n    async function getInfo() {\n      setRequesting(true);\n      const res = await getCollectionInfoById(id);\n      setInfo(res);\n      setRequesting(false);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    return () => {};\n  }, [id]);\n\n  const openEditorLayer = useCallback(() => {\n    setOpenedEditor(true);\n  }, []);\n\n  const closeEditorLayer = useCallback(() => {\n    setOpenedEditor(false);\n  }, []);\n\n  // const memoItemsData = useMemo(() => [...Array(25)].map((_, i) => ({ id: genIdChars(), h: random(69, 361) })), []);\n  const [itemsData, setData] = useState([...Array(25)].map((_, i) => ({ id: genIdChars(), h: random(69, 361) })));\n  const OutletWithExpandableForPin = useMemo(() => withExpandableForPin(Outlet), []);\n  const loadMore = useCallback(() => {\n    const nextData = [...Array(25)].map((_, i) => ({ id: genIdChars(), h: random(69, 361) }));\n    setData(v => v.concat(nextData));\n  }, []);\n\n  if (requesting) {\n    return <div>Fetching the data, please wait ...</div>;\n  }\n  return <>\n    <div className={styles.collection_wrapper}>\n      <div className={styles.profile}>\n        <div className={styles.profile_left}>\n          <div className={styles.collection_img_wrapper}>\n            {info && <img className={styles.collection_img} src={info.titleImg} alt={info.title} />}\n          </div>\n          <div className={styles.title_desc}>\n            <div className={styles.title_wrapper}>\n              <h1 className={`${styles.title} ellipsis-1`}>{info && info.title}</h1>\n              <BtnBorder size=\"\" onClick={openEditorLayer} style={{ flexShrink: 0 }}>编辑</BtnBorder>\n            </div>\n            <ExpandableText lineClamp={5}>{info && info.desc}</ExpandableText>\n          </div>\n        </div>\n        <div className={styles.profile_right}>\n          <FakeBar />\n        </div>\n      </div>\n      <div className={styles.content}>\n        <MemoizedMediaPin\n          mGap={12}\n          gap={36}\n          mItemW={180}\n          itemW={210}\n          itemsData={itemsData}\n          ItemComp={GreyPinItem}\n          PlaceComp={OutletWithExpandableForPin}\n          placeHeight={521} />\n      </div>\n    </div>\n    {info && <PopoverEditor opened={openedEditor} title={info.title} close={closeEditorLayer} intro={info.desc} />}\n    <div style={{\n      height: \"99px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    }}>\n      <BtnBorder onClick={loadMore}>More</BtnBorder>\n    </div>\n  </>;\n};\n\nexport default Collection;","export const random = (min: number, max: number) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nexport const genIdChars = () => {\n  const numChars = \"1234567890\";\n  const alphaChars = \"qwertyuiopasdfghjklzxcvbnm\";\n  const charsAry = [...Array(6)].map(() => {\n    const isNum = random(0, 1) === 0;\n    if (isNum) {\n      return numChars[random(0, 9)];\n    } else {\n      return alphaChars[random(0, 25)];\n    }\n  });\n  return charsAry.join('');\n};"],"names":["props","h","selected","readyToCalc","event","eventImgId","info","location","useLocation","useLayoutEffect","_jsx","_Fragment","children","_jsxs","className","styles","style","width","height","Link","to","data","id","state","backgroundLocation","withExpandableForPin","WrappedComponent","setItemOffsetYs","itemsDividedByCols","itemInfosRef","deselect","select","placeH","gapY","setPlaceTop","setPlaceData","setH","originH","rest","msgId","useParams","deselecteAndCollapse","useCallback","itemIds","current","map","selectAndExpand","length","find","offsetYs","getOffsetAtTop","expandingOffset","baseBottom","top","reduce","acc","colInfos","len","separator","negative","positive","i","curInfo","curBottom","concat","calcOffset","col","colId","useEffect","_ref","itemWidth","colNum","gapX","placeHeight","ItemComp","itemsData","PlaceComp","w","setW","useState","h2","setH2","g","setG","itemInfos","setItemInfos","useRef","infosDividedByCols","setInfosDividedByCols","selectedItem","setSelectedItem","placeT","placeData","init","loadedItems","setLoaded","wrapperRef","hasMoveAnime","setHasMoveAnime","itemsLen","v","prevLen","Array","_","left","offsetY","setTimeout","Math","floor","filter","b","wrapperEl","itemHs","prototype","call","childNodes","node","clientHeight","colLs","push","itemLs","wrapperH","itemTs","colBottomIds","itemCs","max","minColId","minItemId","getMinHeight","currentTop","newItemInfos","cur","curCol","fill","itemsMapAry","offsetMap","Map","res","item","get","setLoadedItem","newV","ref","Fragment","position","transform","context","itemTops","itemHeights","minTop","itemId","curTop","withAutoColumn","gap","itemW","setColNum","size","windowSize","setWindowSize","undefined","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","windowW","calColsNum","accWidth","MediaPin","mGap","mItemW","isMobile","useMobile","iW","setIW","PinLayoutWithAutoCol","useMemo","PinLayout","MemoizedMediaPin","memo","collectionInfos","title","titleImg","desc","first","name","avatar","postsNum","keyIdx","members","numberId","Number","Promise","resolve","matchedInfo","opened","close","intro","delay","setDelay","Popover","antiTouch","Panel","title_wrapper","title_title","input_event","type","value","onChange","intro_wrapper","intro_title","text_message","funcs_wrapper","col_func","BtnBorder","onClick","saveCollectionInfo","console","log","FakeBar","fakeBarWidths","setFakeBarWidths","random","randomBarSize","n","Collection","setInfo","requesting","setRequesting","openedEditor","setOpenedEditor","async","getCollectionInfoById","getInfo","openEditorLayer","closeEditorLayer","setData","genIdChars","OutletWithExpandableForPin","Outlet","loadMore","nextData","collection_wrapper","profile","profile_left","collection_img_wrapper","collection_img","src","alt","title_desc","flexShrink","ExpandableText","lineClamp","profile_right","content","GreyPinItem","PopoverEditor","display","alignItems","justifyContent","min","ceil","join"],"sourceRoot":""}