{"version":3,"file":"static/js/234.858e8262.chunk.js","mappings":"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","sources":["components/hoc/with-expandable-for-pin/index.js","webpack://signal/./src/components/pin-layout/index.module.css?3a21","components/pin-layout/index.tsx","components/hoc/with-auto-column/index.tsx","hooks/useWindowSize.js","components/media-pin-layout/index.tsx","components/pages/event/images.ts","webpack://signal/./src/components/overlay/index.module.css?4bab","webpack://signal/./src/components/overlay/trans.module.css?82f3","components/overlay/index.tsx","webpack://signal/./src/components/fakes/grey-pin-item-event/index.module.css?9f2e","components/fakes/grey-pin-item-event/index.tsx","components/pages/event/index.tsx","tools/number.ts"],"sourcesContent":["import { useCallback, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function withExpandableForPin(WrappedComponent) {\n  return function CompWithExpandableForPin(props) {\n    const { setItemOffsetYs, itemsDividedByCols, itemInfosRef, deselect, select, placeH, gapY, setPlaceTop, setPlaceData, setH, originH, ...rest } = props;\n    const { msgId } = useParams();\n    /**取消选中并收缩 */\n    const deselecteAndCollapse = useCallback(() => {\n      const itemIds = itemInfosRef.current.map(info => info.id);\n      setItemOffsetYs(itemIds.map(id => [id, 0]));\n      deselect();\n      setH(originH);\n    }, [deselect, itemInfosRef, originH, setH, setItemOffsetYs]);\n\n    /**选中并展开 */\n    const selectAndExpand = useCallback(() => {\n      if (itemsDividedByCols.length === 0) { return ; }\n      const info = itemInfosRef.current.find(info => info.data.id === msgId);\n      if (info == null) {\n        // 在顶部展开\n        const offsetYs = getOffsetAtTop(itemInfosRef, placeH, gapY);\n        setItemOffsetYs(offsetYs);\n        setPlaceTop(0);\n        setH(originH + placeH + gapY);\n        return ;\n      }\n      // 选中\n      select(info.id);\n      // 计算因为展开详情区域项目需要移动的偏移量\n      const expandingOffset = calcOffset(info, itemsDividedByCols, placeH, gapY);\n      const offsetYs = itemInfosRef.current.map(info => {\n        const col = info.colId;\n        const { positive, negative, separator } = expandingOffset[col];\n        return [info.id, info.id > separator ? positive : -negative];\n      });\n      setItemOffsetYs(offsetYs);\n      // 设置详情区域距离顶部的距离\n      setPlaceTop(info.top + info.height + gapY);\n      // 设置展开后的容器高度\n      setH(originH + placeH + gapY);\n    }, [gapY, itemInfosRef, itemsDividedByCols, msgId, originH, placeH, select, setH, setItemOffsetYs, setPlaceTop]);\n\n    useEffect(() => {\n      if (msgId) {\n        selectAndExpand();\n      } else {\n        deselecteAndCollapse();\n      }\n      return () => { /* unmount */ };\n    }, [deselecteAndCollapse, msgId, selectAndExpand]);\n\n    return <>\n      <WrappedComponent {...rest} />\n    </>;\n  };\n}\n\n/**获取在顶部展开时项目的偏移量 */\nfunction getOffsetAtTop(itemInfosRef, placeH, gapY) {\n  return itemInfosRef.current.map(info => [info.id, placeH + gapY]);\n}\n\n/**计算每一纵列因为展开而需要移动的偏移量 */\nfunction calcOffset(info, itemsDividedByCols, placeH, gapY) {\n  const baseBottom = info.top + info.height;\n  return itemsDividedByCols.reduce((acc, colInfos) => {\n    const len = colInfos.length;\n    let separator = 0;\n    let negative = 0;\n    let positive = 0;\n    for (let i = 0; i < len; ++ i) {\n      const curInfo = colInfos[i];\n      const curBottom = curInfo.top + curInfo.height;\n      if (curBottom >= baseBottom) {\n        separator = colInfos[i].id;\n        negative = curBottom - baseBottom;\n        positive = placeH - negative + gapY;\n        break;\n      }\n    }\n    acc = acc.concat({\n      separator, // 分隔点\n      negative, // 向上偏移距离\n      positive, // 向下偏移距离\n    });\n    return acc;\n  }, []);\n}","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"pin-layout_wrapper__uFJWR\",\"pin_item_wrapper\":\"pin-layout_pin_item_wrapper__hP1WE\",\"item\":\"pin-layout_item__CtSo1\",\"move_trans\":\"pin-layout_move_trans__scN7U\",\"transparent\":\"pin-layout_transparent__EHVYy\",\"opacity_trans\":\"pin-layout_opacity_trans__zhF+L\",\"selected\":\"pin-layout_selected__Kp0Ak\",\"placeholder\":\"pin-layout_placeholder__leQGq\"};","import React, { useState, useRef, useEffect, Fragment, useCallback } from \"react\";\nimport styles from \"./index.module.css\";\n\nexport interface PinProps {\n  width?: number,\n  itemWidth: number,\n  colNum: number,\n  gapX?: number,\n  gapY?: number,\n  placeHeight?: number,\n  itemsData: Record<string, unknown>[],\n  ItemComp?: React.ComponentType<any>,\n  PlaceComp?: React.ComponentType<any>,\n}\n\nexport interface itemInfo {\n  id: number,\n  top: number,\n  left: number,\n  height: number,\n  colId: number,\n  offsetY: number,\n  data: Record<string, unknown>,\n}\n\n/**\n * 砖块布局组件\n * \n * 设置宽度，子项目将均匀布局在宽度中；设置左右间隔，子项目将按间隔\n * 布局，宽度即子项目间隔后的宽度。\n */\nfunction PinLayout({ width, itemWidth, colNum, gapX = 36, gapY = 36, placeHeight = 521, ItemComp, itemsData = [], PlaceComp }: PinProps) {\n  // 容器宽度\n  const [w, setW] = useState(0);\n  // 容器高度\n  const [h, setH] = useState(0);\n  // 容器的初始高度\n  const [h2, setH2] = useState(0);\n  // 项目横向间隔\n  const [g, setG] = useState(0);\n  // top, left, ItemComp，项目信息\n  const [itemInfos, setItemInfos] = useState<itemInfo[]>([]);\n  const itemInfosRef = useRef<itemInfo[]>(itemInfos);\n  // 每一纵列由上至下的项目信息\n  const [infosDividedByCols, setInfosDividedByCols] = useState<itemInfo[][]>([]);\n  // 选中的项目 id\n  const [selectedItem, setSelectedItem] = useState<number | null>(null);\n  // const [placeholderTop, setPlaceholderTop] = useState(0);\n  // 详情区域距离顶部的距离\n  const [placeT, setPlaceTop] = useState(0);\n  const [placeData, setPlaceData] = useState({ init: \"bird\" });\n  // 加载完成的项目数量\n  const [loadedItems, setLoaded] = useState<Array<boolean | undefined>>([]);\n\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  const [hasMoveAnime, setHasMoveAnime] = useState(false);\n\n  useEffect(() => {\n    // 子项目数目\n    const itemsLen = itemsData.length;\n    setItemInfos(v => {\n      const prevLen = v.length;\n      const concatedItems = v.concat([...Array(itemsLen - prevLen)].map((_, i) => ({\n        id: 0,\n        top: 0, // 项目顶部与容器顶部的距离\n        left: 0, // 项目的左边与容器左边的距离\n        height: 0, // 项目高度\n        colId: 0, // 项目所在纵列\n        offsetY: 0, // 项目偏移距离\n        data: itemsData[prevLen + i],\n      })));\n      return concatedItems;\n    });\n\n    setHasMoveAnime(false);\n    setTimeout(() => {\n      setHasMoveAnime(true);\n    }, 69);\n  }, [itemsData]);\n\n  useEffect(() => {\n    // 如果提供宽度就根据宽度计算横向间隔，如果提供间隔就取间隔\n    if (width == null) {\n      setG(gapX || 36);\n    } else {\n      setG(Math.floor((width - itemWidth * colNum) / (colNum - 1)));\n    }\n    // 如果提供宽度就取宽度，如果提供左右间隔就使用左右间隔计算宽度\n    setW(width || gapX * (colNum - 1) + itemWidth * colNum);\n  }, [width, gapX, colNum, itemWidth]);\n\n  useEffect(() => {\n    // 加载完成的项目数量\n    const loadedItemsLen = loadedItems.filter(b => b).length;\n    // 所有项目数量\n    const totalItemsLen = itemsData.length;\n    if (loadedItemsLen !== totalItemsLen) { return; }\n    // 子项目数目\n    const itemsLen = itemsData.length;\n    // 项目的高度\n    const wrapperEl = wrapperRef.current;\n    if (wrapperEl == null) { return; }\n    const itemHs = Array.prototype.map.call<NodeListOf<ChildNode>, any, number[]>(wrapperEl.childNodes, (node: HTMLDivElement) => node.clientHeight);\n    // 列的左边距离\n    const colLs = [0];\n    for (let i = 1; i < colNum; ++ i) {\n      colLs.push(colLs[i - 1] + itemWidth + g);\n    }\n    // 项目的左边距离\n    const itemLs: number[] = [];\n    // 容器高度\n    let wrapperH = 0;\n    // 项目的上边距离\n    const itemTs: number[] = [];\n    // 每一纵列底部项目的 id\n    const colBottomIds = [];\n    // 项目的所在列 id\n    const itemCs: number[] = [];\n    // 第一横排的容器高度、项目左边距离、项目顶部距离；纵列最下面项目的 id\n    for (let i = 0; i < colNum; ++ i) {\n      wrapperH = Math.max(wrapperH, itemHs[i]);\n      itemLs.push(colLs[i]);\n      itemTs.push(0);\n      itemCs.push(i);\n      colBottomIds.push(i);\n    }\n    // 第二行开始到最后一个项目的容器高度、项目左边距离、项目顶部距离；纵列最下面项目的 id\n    for (let i = colNum; i < itemsLen; ++ i) {\n      // 当前最短的纵列的列 id 与这一列最底部的项目 id\n      const { minColId, minItemId } = getMinHeight(colNum, colBottomIds, itemTs, itemHs);\n      const currentTop = itemTs[minItemId] + itemHs[minItemId] + gapY;\n      wrapperH = Math.max(currentTop + itemHs[i], wrapperH);\n      itemLs.push(colLs[minColId]);\n      itemTs.push(currentTop);\n      itemCs.push(minColId);\n      colBottomIds[minColId] = i;\n    }\n    setH(wrapperH);\n    setH2(wrapperH);\n    // 生成项目信息\n    const newItemInfos = [...Array(itemsLen)].map((_, i) => ({\n      id: i,\n      top: itemTs[i],\n      left: itemLs[i],\n      height: itemHs[i],\n      colId: itemCs[i],\n      offsetY: 0,\n      data: itemsData[i],\n    }));\n    setItemInfos(newItemInfos);\n    itemInfosRef.current = newItemInfos;\n    // 每一纵列的项目信息\n    const infosDividedByCols: itemInfo[][] = newItemInfos.reduce((acc, cur) => {\n      const curCol = cur.colId;\n      acc[curCol] = acc[curCol].concat(cur);\n      return acc;\n    }, [...Array(colNum)].fill([]));\n    setInfosDividedByCols(infosDividedByCols);\n  }, [wrapperRef, w, itemWidth, colNum, g, gapY, itemsData, loadedItems]);\n\n  /**\n   * 指定 item 设置偏移\n   * @param {Array} itemsMapAry \n   * 形如\n   * [[id1, offset1],\n   * [id2, offset2],\n   * [id3, offset3]]\n   */\n  const setItemOffsetYs = useCallback((itemsMapAry: Array<readonly [number, number]>) => {\n    const offsetMap = new Map<number, number>(itemsMapAry);\n    setItemInfos((itemInfos: itemInfo[]) => {\n      const res = itemInfos.map((item: itemInfo) => {\n        const offsetY = offsetMap.get(item.id) == null ? item.offsetY : offsetMap.get(item.id) as number;\n        return {\n          ...item,\n          offsetY,\n        };\n      });\n      itemInfosRef.current = res;\n      return res;\n    });\n  }, []);\n\n  const deselect = useCallback(() => setSelectedItem(null), []);\n  const select = useCallback((id: number) => setSelectedItem(id), []);\n\n  const setLoadedItem = useCallback((i: number) => {\n    return () => {\n      setLoaded(v => {\n        const newV = [...v];\n        newV[i] = true;\n        return newV;\n      });\n    };\n  }, []);\n\n  return (<>\n    <div\n      ref={wrapperRef}\n      className={styles.wrapper}\n      style={{\n        width: `${w}px`,\n        height: `${h}px`,\n      }}>\n      {itemInfos.map((item, i) => <Fragment key={i}>\n        <div\n          className={`${styles.item} ${item.id === selectedItem ? styles.selected : ''} ${hasMoveAnime ? styles.move_trans : ''}`}\n          style={{\n            position: \"absolute\",\n            transform: `translateY(${item.offsetY}px)`,\n            left: `${item.left}px`,\n            top: `${item.top}px`,\n            width: `${itemWidth}px`,\n          }}>\n          {ItemComp && <ItemComp\n            {...item.data}\n            info={item} // 项目数据\n            colId={item.colId} // 项目所处的纵列\n            selected={selectedItem === item.id} // 项目是否被选中\n            selectedItem={selectedItem} // 被选中的项目 id\n            setItemOffsetYs={setItemOffsetYs} // 设置项目的纵向偏移\n            itemsDividedByCols={infosDividedByCols} // 按纵列分的项目数据\n            itemInfos={itemInfos} // 所有项目数据\n            deselect={deselect} // 取消选中函数\n            select={select} // 选中函数\n            placeH={placeHeight} // 详情区域的高度\n            gapY={gapY} // 纵向的项目间的间隔\n            gapX={gapX} // 横向的项目间的间隔\n            setPlaceTop={setPlaceTop} // 设置详情区域距离顶端的距离\n            setPlaceData={setPlaceData} // 设置详情区域的数据\n            originH={h2} // 原始容器的高度\n            setH={setH} // 设置容器的高度\n            readyToCalc={setLoadedItem(i)} // 设置项目加载完成，可以计算位置了\n          />}\n        </div>\n      </Fragment>)}\n      {PlaceComp && <>\n        <div\n          className={styles.placeholder}\n          style={{\n            top: `${placeT}px`,\n            height: `${placeHeight}px`,\n          }}>\n          <PlaceComp\n            selectedItem={selectedItem} // 被选中的项目 id\n            setItemOffsetYs={setItemOffsetYs} // 设置项目的纵向偏移\n            itemsDividedByCols={infosDividedByCols} // 按纵列分的项目数据\n            itemInfosRef={itemInfosRef} // 所有项目数据\n            deselect={deselect} // 取消选中函数\n            select={select} // 选中函数\n            placeH={placeHeight} // 详情区域的高度\n            gapY={gapY} // 纵向的项目间的间隔\n            gapX={gapX} // 横向的项目间的间隔\n            setPlaceTop={setPlaceTop} // 设置详情区域距离顶端的距离\n            setPlaceData={setPlaceData} // 设置详情区域的数据\n            originH={h2} // 原始容器的高度\n            setH={setH} // 设置容器的高度\n            context={[placeData]}\n          />\n        </div>\n      </>}\n    </div>\n  </>);\n}\n\nexport default PinLayout;\n\n\nfunction getMinHeight(colNum: number, colBottomIds: number[], itemTops: number[], itemHeights: number[]) {\n  let minTop = itemTops[colBottomIds[0]] + itemHeights[colBottomIds[0]],\n    minItemId = colBottomIds[0],\n    minColId = 0;\n  for (let i = 1; i < colNum; ++ i) {\n    const itemId = colBottomIds[i];\n    const curTop = itemTops[itemId] + itemHeights[itemId];\n    if (curTop < minTop) {\n      minTop = curTop;\n      minItemId = itemId;\n      minColId = i;\n    }\n  }\n  return { minItemId, minColId };\n}","import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport useWindowSize from \"../../../hooks/useWindowSize\";\n\ninterface hocProps {\n  gap: number;\n  itemW: number;\n}\n\ninterface ExtraInfo {\n  colNum: number;\n}\n\n/**根据屏幕宽度、每个项目的左右间隔、项目宽度，计算一行能放的项目数量 */\nexport default function withAutoColumn<P>(WrappedComponent: React.ComponentType<P>, { gap, itemW }: hocProps) {\n  return function WithAutoColumn(props: Omit<P, keyof ExtraInfo>) {\n    const [colNum, setColNum] = useState<number | null>(null);\n    const size = useWindowSize();\n\n    useEffect(() => {\n      const windowW = size.width;\n      if (windowW == null) { return; }\n      const colNum = calColsNum(itemW, itemW, gap, windowW);\n      setColNum(colNum);\n    }, [size]);\n\n    if (colNum) {\n      return <WrappedComponent\n        {...(props) as P}\n        colNum={colNum}\n      />;\n    } else {\n      return <>Now Loading...</>;\n    }\n  };\n}\n\nfunction calColsNum(accWidth: number, itemWidth: number, gap: number, windowW: number): number {\n  if (accWidth > windowW) { return 0; }\n  return 1 + calColsNum(accWidth + gap + itemWidth, itemWidth, gap, windowW);\n}","import { useState, useEffect } from \"react\";\n\nexport default function useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState({\n    width: undefined,\n    height: undefined,\n  });\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []); // Empty array ensures that effect is only run on mount\n  return windowSize;\n}","import { useState, useEffect, memo, useMemo } from \"react\";\nimport PinLayout, { PinProps } from \"../pin-layout\";\nimport withAutoColumn from \"../hoc/with-auto-column\";\nimport useMobile from \"../../hooks/useMobile\";\n\ninterface MediaPinProps extends PinProps {\n  mGap: number,\n  gap: number,\n  mItemW: number,\n  itemW: number,\n}\n\ninterface ExtraInfo {\n  colNum: number;\n  itemWidth: number;\n}\n\n/**砖块布局移动桌面适配组件 */\nconst MediaPin = ({ mGap, gap, mItemW, itemW, ...rest }: Omit<MediaPinProps, keyof ExtraInfo>) => {\n  const isMobile = useMobile();\n  const [g, setG] = useState(gap);\n  const [iW, setIW] = useState(itemW);\n  const PinLayoutWithAutoCol = useMemo(() => withAutoColumn(PinLayout, {\n    gap: g,\n    itemW: iW,\n  }), [g, iW]);\n  useEffect(() => {\n    if (isMobile) {\n      setG(mGap);\n      setIW(mItemW);\n    } else {\n      setG(gap);\n      setIW(itemW);\n    }\n  }, [isMobile, mGap, gap, mItemW, itemW]);\n  return <>\n    <PinLayoutWithAutoCol {...rest} gapX={g} gapY={g} itemWidth={iW} />\n  </>;\n};\n\nexport default MediaPin;\n\nconst MemoizedMediaPin = memo(MediaPin);\n\nexport { MemoizedMediaPin };","import { random } from \"../../../tools/number\";\nconst IMAGES = [\n  {\n    id: 0,\n    title: \"Enjoying a cup of coffee\",\n    src: \"https://images.unsplash.com/photo-1631016800696-5ea8801b3c2a?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2Mzg4Ng&ixlib=rb-1.2.1&q=80&w=400\",\n  },\n  {\n    id: 1,\n    title: \"Magical winter sunrise\",\n    src: \"https://images.unsplash.com/photo-1618824834718-92f8469a4dd1?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2NDAzMw&ixlib=rb-1.2.1&q=80&w=400\",\n  },\n  {\n    id: 2,\n    title: \"Dalmatian and pumpkins\",\n    src: \"https://images.unsplash.com/photo-1633289944756-6295be214e16?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2NDA3Nw&ixlib=rb-1.2.1&q=80&w=400\",\n  },\n  {\n    id: 3,\n    title: \"Fall into Autumn 🍂🐶\",\n    src: \"https://images.unsplash.com/photo-1633172905740-2eb6730c95b4?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2NDEwMg&ixlib=rb-1.2.1&q=80&w=400\",\n  },\n];\n  \nfunction getImageById(id: number) {\n  return IMAGES.find((image) => image.id === id);\n}\n\nfunction getRandomId() {\n  return IMAGES[random(0, IMAGES.length - 1)].id;\n}\n  \nexport { IMAGES, getImageById, getRandomId };\n  ","// extracted by mini-css-extract-plugin\nexport default {\"overlay_bg\":\"overlay_overlay_bg__inLgz\",\"close_bar\":\"overlay_close_bar__8TDCs\",\"btn_close\":\"overlay_btn_close__gg3g7\",\"overlay_page\":\"overlay_overlay_page__unm8b\",\"tb_wrapper\":\"overlay_tb_wrapper__YxBMj\",\"visible_tb\":\"overlay_visible_tb__Du2NM\"};","// extracted by mini-css-extract-plugin\nexport default {\"page_appear\":\"trans_page_appear__4QhzA\",\"page_appear_active\":\"trans_page_appear_active__jzov8\"};","import Portal from \"../portal\";\nimport styles from \"./index.module.css\";\nimport trans from \"./trans.module.css\";\nimport useKeyPress from \"../../hooks/useKeyPress\";\nimport { useEffect, useState, useRef, ReactNode, MouseEvent } from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { assertIsNode } from \"../../tools/ts\";\nimport TouchBlock from \"../touch-block\";\n\n/**悬浮页面组件 */\ninterface OverlayProps {\n  children?: ReactNode;\n  opened: boolean,\n  close: () => void,\n  antiTouch?: boolean,\n}\n\nconst Overlay = (props: OverlayProps) => {\n  const { opened, close, antiTouch } = props;\n  const [openedTouchBlock, setOpenedTouchBlock] = useState(false);\n  const nodeRef = useRef(null);\n\n  // 切换防误触弹窗\n  const switchTouchBlock = () => {\n    setOpenedTouchBlock(v => !v);\n  };\n\n  const closeTouchBlock = () => {\n    switchTouchBlock();\n    close();\n  };\n\n\n  const closeHandler = (e: MouseEvent<HTMLDivElement>): void => {\n    e.stopPropagation();\n    const curTarget = e.currentTarget;\n    const target = e.target;\n    assertIsNode(curTarget);\n    assertIsNode(target);\n    const childNodes = curTarget.childNodes;\n    let includedTarget = false;\n    for (let i = 0; i < childNodes.length; i++) {\n      if (includeTarget(childNodes[i], target)) {\n        includedTarget = true;\n        break;\n      }\n    }\n    if (! includedTarget) {\n      if (antiTouch) {\n        switchTouchBlock();\n      } else {\n        close();\n      }\n    }\n  };\n  const escPress = useKeyPress(\"Escape\");\n  useEffect(() => {\n    if (opened && escPress) {\n      close();\n    }\n  }, [escPress]);\n\n  const closeBar = (e: MouseEvent<Element>) => {\n    close();\n    e.stopPropagation();\n  };\n\n  useEffect(() => {\n    const bodyE = document.getElementsByTagName(\"body\");\n    bodyE[0].style.overflow = \"hidden\";\n    return () => {\n      bodyE[0].style.overflow = \"auto\";\n    };\n  }, []);\n\n  return <Portal>\n    <div className={`${styles.overlay_bg}`} onClick={closeHandler}>\n      <button className={styles.btn_close} onClick={closeBar} />\n      <CSSTransition\n        nodeRef={nodeRef}\n        in={true}\n        timeout={180}\n        classNames={{\n          appear: trans.page_appear,\n          appearActive: trans.page_appear_active,\n        }}\n        appear={true}\n        unmountOnExit>\n        <div ref={nodeRef} className={styles.overlay_page}>\n          {props.children}\n        </div>\n      </CSSTransition>\n    </div>\n    <div className={`${styles.tb_wrapper} ${openedTouchBlock ? styles.visible_tb : ''}`}>\n      <TouchBlock title=\"确认关闭？\" content=\"确认关闭将清空更改，是否确认关闭？\" opened={openedTouchBlock} cancel={switchTouchBlock} close={closeTouchBlock} />\n    </div>\n  </Portal>;\n};\n\nfunction includeTarget(target: ChildNode, content: EventTarget) {\n  assertIsNode(content);\n  return target.contains(content);\n}\n\nexport default Overlay;","// extracted by mini-css-extract-plugin\nexport default {\"grey_box\":\"grey-pin-item-event_grey_box__DutEw\",\"content\":\"grey-pin-item-event_content__vlr+t\",\"selected\":\"grey-pin-item-event_selected__vpKVv\"};","import { useLayoutEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport styles from \"./index.module.css\";\nimport { itemInfo } from \"../../pin-layout/index\";\n\ntype PinItemProps = {\n  h: number;\n  event: boolean;\n  eventImgId?: number;\n  selected: boolean;\n  readyToCalc: () => {/* */};\n  info: itemInfo;\n}\n\nconst GreyPinItem = (props: PinItemProps) => {\n  // const h = random(69, 361);\n  const { h, selected, readyToCalc, info } = props;\n  const location = useLocation();\n  const locationState = (location.state || {}) as Record<string, unknown>;\n  useLayoutEffect(() => {\n    readyToCalc();\n  }, []);\n  return <>\n    <div\n      className={`${styles.grey_box} ${selected ? styles.selected : ''}`}\n      style={{\n        width: `100%`,\n        height: `${h || 100}px`,\n      }}>\n      <Link\n        to={selected ? '' : `msgs/${info.data.id}`}\n        // 设置背景路由\n        state={{ backgroundLocation: locationState.backgroundLocation }}>\n        <div className={styles.content}></div>\n      </Link>\n    </div>\n  </>;\n};\n\nexport default GreyPinItem;","import { useCallback, useMemo, useRef, useState } from \"react\";\nimport { Outlet, useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport Overlay from \"../../overlay\";\nimport { getImageById, getRandomId } from \"./images\";\nimport { MemoizedMediaPin } from \"../../media-pin-layout\";\nimport EventGreyPinItem from \"../../fakes/grey-pin-item-event\";\nimport { random, genIdChars } from \"../../../tools/number\";\nimport withExpandableForPin from \"../../hoc/with-expandable-for-pin\";\nimport BtnBorder from \"../../btn-border\";\n\ninterface bgState {\n  backgroundLocation?: Record<string, unknown>;\n}\n\nexport default function Modal() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { id } = useParams<\"id\">();\n  const image = getImageById(Number(id));\n  const [itemsData, setData] = useState([...Array(25)].map((_, i) => ({\n    id: genIdChars(),\n    h: random(69, 361),\n    event: false,\n    eventImgId: getRandomId(),\n  })));\n  const OutletWithExpandableForPin = useMemo(() => withExpandableForPin(Outlet), []);\n  const loadMore = useCallback(() => {\n    const nextData = [...Array(25)].map((_, i) => ({\n      id: genIdChars(),\n      h: random(69, 361),\n      event: false,\n      eventImgId: getRandomId(),\n    }));\n    setData(v => v.concat(nextData));\n  }, []);\n  \n  function onDismiss() {\n    const locationState = location.state as bgState;\n    const bgLocation = locationState.backgroundLocation;\n    if (bgLocation) {\n      const pathname = (bgLocation.pathname || '/') as string;\n      navigate(pathname);\n    } else {\n      navigate('/');\n    }\n  }\n  \n  if (!image) return null;\n  \n  const close = () => { onDismiss(); };\n\n  return (\n    <Overlay opened={true} close={close} antiTouch>\n      <div\n        style={{\n          display: \"grid\",\n          justifyContent: \"center\",\n          padding: \"8px 8px\",\n        }}\n      >\n        <h1 id=\"label\" style={{ margin: 0 }}>\n          {image.title}\n        </h1>\n        <img\n          style={{\n            margin: \"16px 0\",\n            borderRadius: \"8px\",\n            width: \"100%\",\n            height: \"auto\",\n          }}\n          width={400}\n          height={400}\n          src={image.src}\n          alt=\"\"\n        />\n      </div>\n      <MemoizedMediaPin\n        mGap={12}\n        gap={36}\n        mItemW={180}\n        itemW={210}\n        itemsData={itemsData}\n        ItemComp={EventGreyPinItem}\n        PlaceComp={OutletWithExpandableForPin}\n        placeHeight={521} />\n      <div style={{\n        height: \"99px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}>\n        <BtnBorder onClick={loadMore}>More</BtnBorder>\n      </div>\n    </Overlay>\n  );\n}","export const random = (min: number, max: number) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nexport const genIdChars = () => {\n  const numChars = \"1234567890\";\n  const alphaChars = \"qwertyuiopasdfghjklzxcvbnm\";\n  const charsAry = [...Array(6)].map(() => {\n    const isNum = random(0, 1) === 0;\n    if (isNum) {\n      return numChars[random(0, 9)];\n    } else {\n      return alphaChars[random(0, 25)];\n    }\n  });\n  return charsAry.join('');\n};"],"names":["withExpandableForPin","WrappedComponent","props","setItemOffsetYs","itemsDividedByCols","itemInfosRef","deselect","select","placeH","gapY","setPlaceTop","setPlaceData","setH","originH","rest","msgId","useParams","deselecteAndCollapse","useCallback","itemIds","current","map","info","id","selectAndExpand","length","find","data","offsetYs","getOffsetAtTop","expandingOffset","baseBottom","top","height","reduce","acc","colInfos","len","separator","negative","positive","i","curInfo","curBottom","concat","calcOffset","col","colId","useEffect","_jsx","_Fragment","children","_ref","width","itemWidth","colNum","gapX","placeHeight","ItemComp","itemsData","PlaceComp","w","setW","useState","h","h2","setH2","g","setG","itemInfos","setItemInfos","useRef","infosDividedByCols","setInfosDividedByCols","selectedItem","setSelectedItem","placeT","placeData","init","loadedItems","setLoaded","wrapperRef","hasMoveAnime","setHasMoveAnime","itemsLen","v","prevLen","Array","_","left","offsetY","setTimeout","Math","floor","filter","b","wrapperEl","itemHs","prototype","call","childNodes","node","clientHeight","colLs","push","itemLs","wrapperH","itemTs","colBottomIds","itemCs","max","minColId","minItemId","getMinHeight","currentTop","newItemInfos","cur","curCol","fill","itemsMapAry","offsetMap","Map","res","item","get","setLoadedItem","newV","_jsxs","ref","className","styles","style","Fragment","position","transform","selected","readyToCalc","context","itemTops","itemHeights","minTop","itemId","curTop","withAutoColumn","gap","itemW","setColNum","size","windowSize","setWindowSize","undefined","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","windowW","calColsNum","accWidth","MediaPin","mGap","mItemW","isMobile","useMobile","iW","setIW","PinLayoutWithAutoCol","useMemo","PinLayout","MemoizedMediaPin","memo","IMAGES","title","src","getImageById","image","getRandomId","random","includeTarget","target","content","assertIsNode","contains","opened","close","antiTouch","openedTouchBlock","setOpenedTouchBlock","nodeRef","switchTouchBlock","escPress","useKeyPress","bodyE","document","getElementsByTagName","overflow","Portal","onClick","e","stopPropagation","curTarget","currentTarget","includedTarget","CSSTransition","in","timeout","classNames","appear","trans","appearActive","unmountOnExit","TouchBlock","cancel","closeTouchBlock","locationState","useLocation","state","useLayoutEffect","Link","to","backgroundLocation","Modal","navigate","useNavigate","location","Number","setData","genIdChars","event","eventImgId","OutletWithExpandableForPin","Outlet","loadMore","nextData","Overlay","bgLocation","pathname","onDismiss","display","justifyContent","padding","margin","borderRadius","alt","EventGreyPinItem","alignItems","BtnBorder","min","ceil","join"],"sourceRoot":""}