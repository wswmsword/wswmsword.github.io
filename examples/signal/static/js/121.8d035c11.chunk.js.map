{"version":3,"file":"static/js/121.8d035c11.chunk.js","mappings":"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","sources":["webpack://signal/./src/components/fakes/grey-pin-item/index.module.css?6ab2","components/fakes/grey-pin-item/index.tsx","components/hoc/with-expandable-for-pin/index.js","webpack://signal/./src/components/pin-layout/index.module.css?3a21","components/pin-layout/index.tsx","components/hoc/with-auto-column/index.tsx","hooks/useWindowSize.js","components/media-pin-layout/index.tsx","components/pages/event/images.ts","webpack://signal/./src/components/pages/latest/index.module.css?a639","components/hoc/with-infinit-scrolling/index.tsx","components/pages/latest/index.tsx","tools/number.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"grey_box\":\"grey-pin-item_grey_box__ligHe\",\"content\":\"grey-pin-item_content__NPwBi\",\"selected\":\"grey-pin-item_selected__zLvnq\",\"event\":\"grey-pin-item_event__ojc6B\"};","import { useLayoutEffect } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport styles from \"./index.module.css\";\nimport { itemInfo } from \"../../pin-layout/index\";\n\ntype PinItemProps = {\n  h: number;\n  event: boolean;\n  eventImgId?: number;\n  selected: boolean;\n  readyToCalc: () => {/* */};\n  info: itemInfo;\n}\n\nconst GreyPinItem = (props: PinItemProps) => {\n  // const h = random(69, 361);\n  const { h, selected, readyToCalc, event, eventImgId, info } = props;\n  const location = useLocation();\n  useLayoutEffect(() => {\n    readyToCalc();\n  }, []);\n  return <>\n    <div\n      className={`${styles.grey_box} ${selected ? styles.selected : ''}`}\n      style={{\n        width: `100%`,\n        height: `${h || 100}px`,\n      }}>\n      <Link to={selected ? '' : `msgs/${info.data.id}`}>\n        <div className={styles.content}></div>\n      </Link>\n      {event && <>\n        <Link\n          key={eventImgId}\n          to={`/events/${eventImgId}`}\n          // This is the trick! Set the `backgroundLocation` in location state\n          // so that when we open the modal we still see the current page in\n          // the background.\n          state={{ backgroundLocation: location }}>\n          <div className={styles.event} />\n        </Link>\n      </>}\n    </div>\n  </>;\n};\n\nexport default GreyPinItem;","import { useCallback, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function withExpandableForPin(WrappedComponent) {\n  return function CompWithExpandableForPin(props) {\n    const { setItemOffsetYs, itemsDividedByCols, itemInfosRef, deselect, select, placeH, gapY, setPlaceTop, setPlaceData, setH, originH, ...rest } = props;\n    const { msgId } = useParams();\n    /**取消选中并收缩 */\n    const deselecteAndCollapse = useCallback(() => {\n      const itemIds = itemInfosRef.current.map(info => info.id);\n      setItemOffsetYs(itemIds.map(id => [id, 0]));\n      deselect();\n      setH(originH);\n    }, [deselect, itemInfosRef, originH, setH, setItemOffsetYs]);\n\n    /**选中并展开 */\n    const selectAndExpand = useCallback(() => {\n      if (itemsDividedByCols.length === 0) { return ; }\n      const info = itemInfosRef.current.find(info => info.data.id === msgId);\n      if (info == null) {\n        // 在顶部展开\n        const offsetYs = getOffsetAtTop(itemInfosRef, placeH, gapY);\n        setItemOffsetYs(offsetYs);\n        setPlaceTop(0);\n        setH(originH + placeH + gapY);\n        return ;\n      }\n      // 选中\n      select(info.id);\n      // 计算因为展开详情区域项目需要移动的偏移量\n      const expandingOffset = calcOffset(info, itemsDividedByCols, placeH, gapY);\n      const offsetYs = itemInfosRef.current.map(info => {\n        const col = info.colId;\n        const { positive, negative, separator } = expandingOffset[col];\n        return [info.id, info.id > separator ? positive : -negative];\n      });\n      setItemOffsetYs(offsetYs);\n      // 设置详情区域距离顶部的距离\n      setPlaceTop(info.top + info.height + gapY);\n      // 设置展开后的容器高度\n      setH(originH + placeH + gapY);\n    }, [gapY, itemInfosRef, itemsDividedByCols, msgId, originH, placeH, select, setH, setItemOffsetYs, setPlaceTop]);\n\n    useEffect(() => {\n      if (msgId) {\n        selectAndExpand();\n      } else {\n        deselecteAndCollapse();\n      }\n      return () => { /* unmount */ };\n    }, [deselecteAndCollapse, msgId, selectAndExpand]);\n\n    return <>\n      <WrappedComponent {...rest} />\n    </>;\n  };\n}\n\n/**获取在顶部展开时项目的偏移量 */\nfunction getOffsetAtTop(itemInfosRef, placeH, gapY) {\n  return itemInfosRef.current.map(info => [info.id, placeH + gapY]);\n}\n\n/**计算每一纵列因为展开而需要移动的偏移量 */\nfunction calcOffset(info, itemsDividedByCols, placeH, gapY) {\n  const baseBottom = info.top + info.height;\n  return itemsDividedByCols.reduce((acc, colInfos) => {\n    const len = colInfos.length;\n    let separator = 0;\n    let negative = 0;\n    let positive = 0;\n    for (let i = 0; i < len; ++ i) {\n      const curInfo = colInfos[i];\n      const curBottom = curInfo.top + curInfo.height;\n      if (curBottom >= baseBottom) {\n        separator = colInfos[i].id;\n        negative = curBottom - baseBottom;\n        positive = placeH - negative + gapY;\n        break;\n      }\n    }\n    acc = acc.concat({\n      separator, // 分隔点\n      negative, // 向上偏移距离\n      positive, // 向下偏移距离\n    });\n    return acc;\n  }, []);\n}","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"pin-layout_wrapper__uFJWR\",\"pin_item_wrapper\":\"pin-layout_pin_item_wrapper__hP1WE\",\"item\":\"pin-layout_item__CtSo1\",\"move_trans\":\"pin-layout_move_trans__scN7U\",\"transparent\":\"pin-layout_transparent__EHVYy\",\"opacity_trans\":\"pin-layout_opacity_trans__zhF+L\",\"selected\":\"pin-layout_selected__Kp0Ak\",\"placeholder\":\"pin-layout_placeholder__leQGq\"};","import React, { useState, useRef, useEffect, Fragment, useCallback } from \"react\";\nimport styles from \"./index.module.css\";\n\nexport interface PinProps {\n  width?: number,\n  itemWidth: number,\n  colNum: number,\n  gapX?: number,\n  gapY?: number,\n  placeHeight?: number,\n  itemsData: Record<string, unknown>[],\n  ItemComp?: React.ComponentType<any>,\n  PlaceComp?: React.ComponentType<any>,\n}\n\nexport interface itemInfo {\n  id: number,\n  top: number,\n  left: number,\n  height: number,\n  colId: number,\n  offsetY: number,\n  data: Record<string, unknown>,\n}\n\n/**\n * 砖块布局组件\n * \n * 设置宽度，子项目将均匀布局在宽度中；设置左右间隔，子项目将按间隔\n * 布局，宽度即子项目间隔后的宽度。\n */\nfunction PinLayout({ width, itemWidth, colNum, gapX = 36, gapY = 36, placeHeight = 521, ItemComp, itemsData = [], PlaceComp }: PinProps) {\n  // 容器宽度\n  const [w, setW] = useState(0);\n  // 容器高度\n  const [h, setH] = useState(0);\n  // 容器的初始高度\n  const [h2, setH2] = useState(0);\n  // 项目横向间隔\n  const [g, setG] = useState(0);\n  // top, left, ItemComp，项目信息\n  const [itemInfos, setItemInfos] = useState<itemInfo[]>([]);\n  const itemInfosRef = useRef<itemInfo[]>(itemInfos);\n  // 每一纵列由上至下的项目信息\n  const [infosDividedByCols, setInfosDividedByCols] = useState<itemInfo[][]>([]);\n  // 选中的项目 id\n  const [selectedItem, setSelectedItem] = useState<number | null>(null);\n  // const [placeholderTop, setPlaceholderTop] = useState(0);\n  // 详情区域距离顶部的距离\n  const [placeT, setPlaceTop] = useState(0);\n  const [placeData, setPlaceData] = useState({ init: \"bird\" });\n  // 加载完成的项目数量\n  const [loadedItems, setLoaded] = useState<Array<boolean | undefined>>([]);\n\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  const [hasMoveAnime, setHasMoveAnime] = useState(false);\n\n  useEffect(() => {\n    // 子项目数目\n    const itemsLen = itemsData.length;\n    setItemInfos(v => {\n      const prevLen = v.length;\n      const concatedItems = v.concat([...Array(itemsLen - prevLen)].map((_, i) => ({\n        id: 0,\n        top: 0, // 项目顶部与容器顶部的距离\n        left: 0, // 项目的左边与容器左边的距离\n        height: 0, // 项目高度\n        colId: 0, // 项目所在纵列\n        offsetY: 0, // 项目偏移距离\n        data: itemsData[prevLen + i],\n      })));\n      return concatedItems;\n    });\n\n    setHasMoveAnime(false);\n    setTimeout(() => {\n      setHasMoveAnime(true);\n    }, 69);\n  }, [itemsData]);\n\n  useEffect(() => {\n    // 如果提供宽度就根据宽度计算横向间隔，如果提供间隔就取间隔\n    if (width == null) {\n      setG(gapX || 36);\n    } else {\n      setG(Math.floor((width - itemWidth * colNum) / (colNum - 1)));\n    }\n    // 如果提供宽度就取宽度，如果提供左右间隔就使用左右间隔计算宽度\n    setW(width || gapX * (colNum - 1) + itemWidth * colNum);\n  }, [width, gapX, colNum, itemWidth]);\n\n  useEffect(() => {\n    // 加载完成的项目数量\n    const loadedItemsLen = loadedItems.filter(b => b).length;\n    // 所有项目数量\n    const totalItemsLen = itemsData.length;\n    if (loadedItemsLen !== totalItemsLen) { return; }\n    // 子项目数目\n    const itemsLen = itemsData.length;\n    // 项目的高度\n    const wrapperEl = wrapperRef.current;\n    if (wrapperEl == null) { return; }\n    const itemHs = Array.prototype.map.call<NodeListOf<ChildNode>, any, number[]>(wrapperEl.childNodes, (node: HTMLDivElement) => node.clientHeight);\n    // 列的左边距离\n    const colLs = [0];\n    for (let i = 1; i < colNum; ++ i) {\n      colLs.push(colLs[i - 1] + itemWidth + g);\n    }\n    // 项目的左边距离\n    const itemLs: number[] = [];\n    // 容器高度\n    let wrapperH = 0;\n    // 项目的上边距离\n    const itemTs: number[] = [];\n    // 每一纵列底部项目的 id\n    const colBottomIds = [];\n    // 项目的所在列 id\n    const itemCs: number[] = [];\n    // 第一横排的容器高度、项目左边距离、项目顶部距离；纵列最下面项目的 id\n    for (let i = 0; i < colNum; ++ i) {\n      wrapperH = Math.max(wrapperH, itemHs[i]);\n      itemLs.push(colLs[i]);\n      itemTs.push(0);\n      itemCs.push(i);\n      colBottomIds.push(i);\n    }\n    // 第二行开始到最后一个项目的容器高度、项目左边距离、项目顶部距离；纵列最下面项目的 id\n    for (let i = colNum; i < itemsLen; ++ i) {\n      // 当前最短的纵列的列 id 与这一列最底部的项目 id\n      const { minColId, minItemId } = getMinHeight(colNum, colBottomIds, itemTs, itemHs);\n      const currentTop = itemTs[minItemId] + itemHs[minItemId] + gapY;\n      wrapperH = Math.max(currentTop + itemHs[i], wrapperH);\n      itemLs.push(colLs[minColId]);\n      itemTs.push(currentTop);\n      itemCs.push(minColId);\n      colBottomIds[minColId] = i;\n    }\n    setH(wrapperH);\n    setH2(wrapperH);\n    // 生成项目信息\n    const newItemInfos = [...Array(itemsLen)].map((_, i) => ({\n      id: i,\n      top: itemTs[i],\n      left: itemLs[i],\n      height: itemHs[i],\n      colId: itemCs[i],\n      offsetY: 0,\n      data: itemsData[i],\n    }));\n    setItemInfos(newItemInfos);\n    itemInfosRef.current = newItemInfos;\n    // 每一纵列的项目信息\n    const infosDividedByCols: itemInfo[][] = newItemInfos.reduce((acc, cur) => {\n      const curCol = cur.colId;\n      acc[curCol] = acc[curCol].concat(cur);\n      return acc;\n    }, [...Array(colNum)].fill([]));\n    setInfosDividedByCols(infosDividedByCols);\n  }, [wrapperRef, w, itemWidth, colNum, g, gapY, itemsData, loadedItems]);\n\n  /**\n   * 指定 item 设置偏移\n   * @param {Array} itemsMapAry \n   * 形如\n   * [[id1, offset1],\n   * [id2, offset2],\n   * [id3, offset3]]\n   */\n  const setItemOffsetYs = useCallback((itemsMapAry: Array<readonly [number, number]>) => {\n    const offsetMap = new Map<number, number>(itemsMapAry);\n    setItemInfos((itemInfos: itemInfo[]) => {\n      const res = itemInfos.map((item: itemInfo) => {\n        const offsetY = offsetMap.get(item.id) == null ? item.offsetY : offsetMap.get(item.id) as number;\n        return {\n          ...item,\n          offsetY,\n        };\n      });\n      itemInfosRef.current = res;\n      return res;\n    });\n  }, []);\n\n  const deselect = useCallback(() => setSelectedItem(null), []);\n  const select = useCallback((id: number) => setSelectedItem(id), []);\n\n  const setLoadedItem = useCallback((i: number) => {\n    return () => {\n      setLoaded(v => {\n        const newV = [...v];\n        newV[i] = true;\n        return newV;\n      });\n    };\n  }, []);\n\n  return (<>\n    <div\n      ref={wrapperRef}\n      className={styles.wrapper}\n      style={{\n        width: `${w}px`,\n        height: `${h}px`,\n      }}>\n      {itemInfos.map((item, i) => <Fragment key={i}>\n        <div\n          className={`${styles.item} ${item.id === selectedItem ? styles.selected : ''} ${hasMoveAnime ? styles.move_trans : ''}`}\n          style={{\n            position: \"absolute\",\n            transform: `translateY(${item.offsetY}px)`,\n            left: `${item.left}px`,\n            top: `${item.top}px`,\n            width: `${itemWidth}px`,\n          }}>\n          {ItemComp && <ItemComp\n            {...item.data}\n            info={item} // 项目数据\n            colId={item.colId} // 项目所处的纵列\n            selected={selectedItem === item.id} // 项目是否被选中\n            selectedItem={selectedItem} // 被选中的项目 id\n            setItemOffsetYs={setItemOffsetYs} // 设置项目的纵向偏移\n            itemsDividedByCols={infosDividedByCols} // 按纵列分的项目数据\n            itemInfos={itemInfos} // 所有项目数据\n            deselect={deselect} // 取消选中函数\n            select={select} // 选中函数\n            placeH={placeHeight} // 详情区域的高度\n            gapY={gapY} // 纵向的项目间的间隔\n            gapX={gapX} // 横向的项目间的间隔\n            setPlaceTop={setPlaceTop} // 设置详情区域距离顶端的距离\n            setPlaceData={setPlaceData} // 设置详情区域的数据\n            originH={h2} // 原始容器的高度\n            setH={setH} // 设置容器的高度\n            readyToCalc={setLoadedItem(i)} // 设置项目加载完成，可以计算位置了\n          />}\n        </div>\n      </Fragment>)}\n      {PlaceComp && <>\n        <div\n          className={styles.placeholder}\n          style={{\n            top: `${placeT}px`,\n            height: `${placeHeight}px`,\n          }}>\n          <PlaceComp\n            selectedItem={selectedItem} // 被选中的项目 id\n            setItemOffsetYs={setItemOffsetYs} // 设置项目的纵向偏移\n            itemsDividedByCols={infosDividedByCols} // 按纵列分的项目数据\n            itemInfosRef={itemInfosRef} // 所有项目数据\n            deselect={deselect} // 取消选中函数\n            select={select} // 选中函数\n            placeH={placeHeight} // 详情区域的高度\n            gapY={gapY} // 纵向的项目间的间隔\n            gapX={gapX} // 横向的项目间的间隔\n            setPlaceTop={setPlaceTop} // 设置详情区域距离顶端的距离\n            setPlaceData={setPlaceData} // 设置详情区域的数据\n            originH={h2} // 原始容器的高度\n            setH={setH} // 设置容器的高度\n            context={[placeData]}\n          />\n        </div>\n      </>}\n    </div>\n  </>);\n}\n\nexport default PinLayout;\n\n\nfunction getMinHeight(colNum: number, colBottomIds: number[], itemTops: number[], itemHeights: number[]) {\n  let minTop = itemTops[colBottomIds[0]] + itemHeights[colBottomIds[0]],\n    minItemId = colBottomIds[0],\n    minColId = 0;\n  for (let i = 1; i < colNum; ++ i) {\n    const itemId = colBottomIds[i];\n    const curTop = itemTops[itemId] + itemHeights[itemId];\n    if (curTop < minTop) {\n      minTop = curTop;\n      minItemId = itemId;\n      minColId = i;\n    }\n  }\n  return { minItemId, minColId };\n}","import React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport useWindowSize from \"../../../hooks/useWindowSize\";\n\ninterface hocProps {\n  gap: number;\n  itemW: number;\n}\n\ninterface ExtraInfo {\n  colNum: number;\n}\n\n/**根据屏幕宽度、每个项目的左右间隔、项目宽度，计算一行能放的项目数量 */\nexport default function withAutoColumn<P>(WrappedComponent: React.ComponentType<P>, { gap, itemW }: hocProps) {\n  return function WithAutoColumn(props: Omit<P, keyof ExtraInfo>) {\n    const [colNum, setColNum] = useState<number | null>(null);\n    const size = useWindowSize();\n\n    useEffect(() => {\n      const windowW = size.width;\n      if (windowW == null) { return; }\n      const colNum = calColsNum(itemW, itemW, gap, windowW);\n      setColNum(colNum);\n    }, [size]);\n\n    if (colNum) {\n      return <WrappedComponent\n        {...(props) as P}\n        colNum={colNum}\n      />;\n    } else {\n      return <>Now Loading...</>;\n    }\n  };\n}\n\nfunction calColsNum(accWidth: number, itemWidth: number, gap: number, windowW: number): number {\n  if (accWidth > windowW) { return 0; }\n  return 1 + calColsNum(accWidth + gap + itemWidth, itemWidth, gap, windowW);\n}","import { useState, useEffect } from \"react\";\n\nexport default function useWindowSize() {\n  // Initialize state with undefined width/height so server and client renders match\n  // Learn more here: https://joshwcomeau.com/react/the-perils-of-rehydration/\n  const [windowSize, setWindowSize] = useState({\n    width: undefined,\n    height: undefined,\n  });\n  useEffect(() => {\n    // Handler to call on window resize\n    function handleResize() {\n      // Set window width/height to state\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }\n    // Add event listener\n    window.addEventListener(\"resize\", handleResize);\n    // Call handler right away so state gets updated with initial window size\n    handleResize();\n    // Remove event listener on cleanup\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []); // Empty array ensures that effect is only run on mount\n  return windowSize;\n}","import { useState, useEffect, memo, useMemo } from \"react\";\nimport PinLayout, { PinProps } from \"../pin-layout\";\nimport withAutoColumn from \"../hoc/with-auto-column\";\nimport useMobile from \"../../hooks/useMobile\";\n\ninterface MediaPinProps extends PinProps {\n  mGap: number,\n  gap: number,\n  mItemW: number,\n  itemW: number,\n}\n\ninterface ExtraInfo {\n  colNum: number;\n  itemWidth: number;\n}\n\n/**砖块布局移动桌面适配组件 */\nconst MediaPin = ({ mGap, gap, mItemW, itemW, ...rest }: Omit<MediaPinProps, keyof ExtraInfo>) => {\n  const isMobile = useMobile();\n  const [g, setG] = useState(gap);\n  const [iW, setIW] = useState(itemW);\n  const PinLayoutWithAutoCol = useMemo(() => withAutoColumn(PinLayout, {\n    gap: g,\n    itemW: iW,\n  }), [g, iW]);\n  useEffect(() => {\n    if (isMobile) {\n      setG(mGap);\n      setIW(mItemW);\n    } else {\n      setG(gap);\n      setIW(itemW);\n    }\n  }, [isMobile, mGap, gap, mItemW, itemW]);\n  return <>\n    <PinLayoutWithAutoCol {...rest} gapX={g} gapY={g} itemWidth={iW} />\n  </>;\n};\n\nexport default MediaPin;\n\nconst MemoizedMediaPin = memo(MediaPin);\n\nexport { MemoizedMediaPin };","import { random } from \"../../../tools/number\";\nconst IMAGES = [\n  {\n    id: 0,\n    title: \"Enjoying a cup of coffee\",\n    src: \"https://images.unsplash.com/photo-1631016800696-5ea8801b3c2a?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2Mzg4Ng&ixlib=rb-1.2.1&q=80&w=400\",\n  },\n  {\n    id: 1,\n    title: \"Magical winter sunrise\",\n    src: \"https://images.unsplash.com/photo-1618824834718-92f8469a4dd1?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2NDAzMw&ixlib=rb-1.2.1&q=80&w=400\",\n  },\n  {\n    id: 2,\n    title: \"Dalmatian and pumpkins\",\n    src: \"https://images.unsplash.com/photo-1633289944756-6295be214e16?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2NDA3Nw&ixlib=rb-1.2.1&q=80&w=400\",\n  },\n  {\n    id: 3,\n    title: \"Fall into Autumn 🍂🐶\",\n    src: \"https://images.unsplash.com/photo-1633172905740-2eb6730c95b4?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=400&ixid=MnwxfDB8MXxyYW5kb218MHx8fHx8fHx8MTYzMzM2NDEwMg&ixlib=rb-1.2.1&q=80&w=400\",\n  },\n];\n  \nfunction getImageById(id: number) {\n  return IMAGES.find((image) => image.id === id);\n}\n\nfunction getRandomId() {\n  return IMAGES[random(0, IMAGES.length - 1)].id;\n}\n  \nexport { IMAGES, getImageById, getRandomId };\n  ","// extracted by mini-css-extract-plugin\nexport default {\"page_wrapper\":\"latest_page_wrapper__Wb6Mz\",\"content\":\"latest_content__DZRnn\",\"mobile\":\"latest_mobile__RQX9Z\"};","import { useCallback, useRef, useEffect } from \"react\";\n\n/**\n * Intersection Observer configuratiopn options.\n */\n interface IntersectionObserverOptions {\n\n  /**\n   * Number from 0 to 1 representing the percentage\n   * of the element that needs to be visible to be\n   * considered as visible. Can also be an array of\n   * thresholds.\n   */\n  threshold: number | number[]\n\n  /**\n   * Element that is used as the viewport for checking visibility\n   * of the provided `ref` or `element`.\n   */\n  root?: Element | null,\n\n  /**\n   * Margin around the root. Can have values similar to\n   * the CSS margin property.\n   */\n  rootMargin?: string\n}\n\ninterface InfinitScrollingProps {\n  onReachBottom: () => void;\n  options?: IntersectionObserverOptions,\n}\n\ninterface disabledIS {\n  disabledIS?: boolean,\n}\n\n/**无限滚动高阶组件 */\nfunction withInfinitScrolling<T>(WrappedComp: React.ComponentType<T>, {\n  onReachBottom,\n  options =  {\n    root: null,\n    rootMargin: \"20px\",\n    threshold: 0\n  },\n}: InfinitScrollingProps) {\n  const { root, rootMargin, threshold } = options;\n  return function CompWithInfinitScrolling(props: T & disabledIS) {\n    const { disabledIS } = props;\n    const loader = useRef(null);\n    const observer = useRef<IntersectionObserver | null>(null);\n    const handleObserver = useCallback((entries: IntersectionObserverEntry[]) => {\n      const target = entries[0];\n      if (target.isIntersecting){\n        onReachBottom();\n      }\n    }, []);\n    useEffect(() => {\n      if (disabledIS) {\n        observer.current && observer.current.disconnect();\n        return ;\n      }\n      const option = {\n        root,\n        rootMargin,\n        threshold,\n      };\n      observer.current = new IntersectionObserver(handleObserver, option);\n      if (loader.current) observer.current.observe(loader.current);\n      return () => {\n        observer.current && observer.current.disconnect();\n      };\n    }, [handleObserver, disabledIS]);\n    \n    return <>\n      <WrappedComp {...props} />\n      <div ref={loader} />\n    </>;\n  };\n}\n\nexport default withInfinitScrolling;","import styles from \"./index.module.css\";\nimport useMobile from \"../../../hooks/useMobile\";\nimport MediaPin, { /* MemoizedMediaPin */ } from \"../../media-pin-layout\";\nimport GreyPinItem from \"../../fakes/grey-pin-item\";\nimport { random, genIdChars } from \"../../../tools/number\";\nimport withExpandableForPin from \"../../hoc/with-expandable-for-pin\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { Outlet } from \"react-router-dom\";\nimport { getRandomId as getRandomEventId } from \"../event/images\";\nimport BtnBorder from \"../../btn-border\";\nimport withInfinitScrolling from \"../../../components/hoc/with-infinit-scrolling/index\";\ntype latestItem = {\n  id: string,\n  h: number,\n  event: boolean,\n  eventImgId?: number,\n}\n/**最新 */\nconst Latest = () => {\n  const isMobile = useMobile();\n  const hasMounted = useRef(false); // 是否第一次加载完数据\n  const [disabledIS, setDisabledIS] = useState(false); // 禁止无限滚动\n  const [itemsData, setData] = useState<latestItem[]>([]);\n  const OutletWithExpandableForPin = useMemo(() => withExpandableForPin(Outlet), []);\n\n  const loadMore = useCallback(() => {\n    const nextData = [...Array(25)].map((_, i): latestItem => ({\n      id: genIdChars(),\n      h: random(69, 361),\n      event: random(0, 1) === 0,\n      eventImgId: getRandomEventId(),\n    }));\n    setData(v => v.concat(nextData));\n  }, []);\n  const nextPage = useCallback(() => {\n    if (! hasMounted.current) { return ; }\n    loadMore();\n    console.log('ehrh >>');\n  }, []);\n  const MediaPinWithInfinitScrolling = useMemo(() => withInfinitScrolling(MediaPin, {\n    onReachBottom: nextPage,\n  }), []);\n\n  // 首次加载数据\n  useEffect(() => {\n    loadMore();\n    setTimeout(() => {\n      hasMounted.current = true;\n    }, 100);\n  }, []);\n\n  const diableIS = useCallback(() => {\n    setDisabledIS(v => !v);\n  }, []);\n\n  return <>\n    <div className={`${styles.content} ${isMobile ? styles.mobile : ''}`}>\n      <h1>最新</h1>\n      <p>最新：最新最新最新最新最新最新最新最新最新最新最新最新最新最新最新发现。Get Back. Let It Go. Real Love.</p>\n    </div>\n    <div style={{\n      position: 'fixed',\n      zIndex: 3,\n      left: '18px',\n      bottom: '5px',\n    }}>\n      <BtnBorder onClick={diableIS}>{disabledIS ? '开启无限滚动' : '禁止无限滚动'}</BtnBorder>\n    </div>\n    <MediaPinWithInfinitScrolling\n      disabledIS={disabledIS}\n      mGap={12}\n      gap={36}\n      mItemW={180}\n      itemW={210}\n      itemsData={itemsData}\n      ItemComp={GreyPinItem}\n      PlaceComp={OutletWithExpandableForPin}\n      placeHeight={521} />\n    {disabledIS && <div style={{\n      height: \"99px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    }}>\n      <BtnBorder onClick={loadMore}>More</BtnBorder>\n    </div>}\n  </>;\n};\n\nexport default Latest;","export const random = (min: number, max: number) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nexport const genIdChars = () => {\n  const numChars = \"1234567890\";\n  const alphaChars = \"qwertyuiopasdfghjklzxcvbnm\";\n  const charsAry = [...Array(6)].map(() => {\n    const isNum = random(0, 1) === 0;\n    if (isNum) {\n      return numChars[random(0, 9)];\n    } else {\n      return alphaChars[random(0, 25)];\n    }\n  });\n  return charsAry.join('');\n};"],"names":["props","h","selected","readyToCalc","event","eventImgId","info","location","useLocation","useLayoutEffect","_jsx","_Fragment","children","_jsxs","className","styles","style","width","height","Link","to","data","id","state","backgroundLocation","withExpandableForPin","WrappedComponent","setItemOffsetYs","itemsDividedByCols","itemInfosRef","deselect","select","placeH","gapY","setPlaceTop","setPlaceData","setH","originH","rest","msgId","useParams","deselecteAndCollapse","useCallback","itemIds","current","map","selectAndExpand","length","find","offsetYs","getOffsetAtTop","expandingOffset","baseBottom","top","reduce","acc","colInfos","len","separator","negative","positive","i","curInfo","curBottom","concat","calcOffset","col","colId","useEffect","_ref","itemWidth","colNum","gapX","placeHeight","ItemComp","itemsData","PlaceComp","w","setW","useState","h2","setH2","g","setG","itemInfos","setItemInfos","useRef","infosDividedByCols","setInfosDividedByCols","selectedItem","setSelectedItem","placeT","placeData","init","loadedItems","setLoaded","wrapperRef","hasMoveAnime","setHasMoveAnime","itemsLen","v","prevLen","Array","_","left","offsetY","setTimeout","Math","floor","filter","b","wrapperEl","itemHs","prototype","call","childNodes","node","clientHeight","colLs","push","itemLs","wrapperH","itemTs","colBottomIds","itemCs","max","minColId","minItemId","getMinHeight","currentTop","newItemInfos","cur","curCol","fill","itemsMapAry","offsetMap","Map","res","item","get","setLoadedItem","newV","ref","Fragment","position","transform","context","itemTops","itemHeights","minTop","itemId","curTop","withAutoColumn","gap","itemW","setColNum","size","windowSize","setWindowSize","undefined","handleResize","window","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","windowW","calColsNum","accWidth","MediaPin","mGap","mItemW","isMobile","useMobile","iW","setIW","PinLayoutWithAutoCol","useMemo","PinLayout","MemoizedMediaPin","memo","IMAGES","title","src","getImageById","image","getRandomId","random","WrappedComp","onReachBottom","options","root","rootMargin","threshold","disabledIS","loader","observer","handleObserver","entries","isIntersecting","disconnect","option","IntersectionObserver","observe","Latest","hasMounted","setDisabledIS","setData","OutletWithExpandableForPin","Outlet","loadMore","nextData","genIdChars","getRandomEventId","nextPage","console","log","MediaPinWithInfinitScrolling","withInfinitScrolling","diableIS","zIndex","bottom","BtnBorder","onClick","GreyPinItem","display","alignItems","justifyContent","min","ceil","join"],"sourceRoot":""}