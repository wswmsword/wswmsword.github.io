"use strict";(self.webpackChunkcjs=self.webpackChunkcjs||[]).push([[179],{18:()=>{function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,"symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key))?o:String(o)),r)}var o}function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}var n=function(e){return Object.prototype.toString.call(e)},r=function(e){return"[object Object]"===n(e)},o=function(e){return"[object Function]"===n(e)},i=function(){return document.activeElement},u=function(e){return"string"==typeof e?(t=e,document.querySelector(t)):e;var t},c=function(e){setTimeout(e,0)},l=function(e){return"Enter"===e.key||13===e.keyCode},a=function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode},s=function(e){return"Tab"===e.key||9===e.keyCode},d=function(e){return s(e)&&!e.shiftKey},f=function(e){return s(e)&&e.shiftKey},v=function(e){var t;e.focus(),(t=e).tagName&&"input"===t.tagName.toLowerCase()&&"function"==typeof t.select&&e.select()},p=function(e){null==e?c((function(){return e&&v(e)})):v(e)},y=function(e,t,n){var r;return null!==(r=u(e))&&void 0!==r?r:function(e,t){if(null==e||null==t)return null;if(e.contains(t))return e;if(t.contains(e))return t;var n=new Range;return n.setStartBefore(e),n.setEndAfter(t),n.collapsed&&(n.setStartBefore(t),n.setEndAfter(e)),n.commonAncestorContainer}(t,n)},h=function(e){var t=e.map((function(e){return u(e)})).filter((function(e){return null!=e})),n=t[0],r=t.slice(-1)[0];return{list:t,head:n,tail:r}},g=function(e,t,n){return t?n:u(e)},m=function(e,t,n,r){var o=h(t),i=o.list,u=o.head,c=o.tail,l=y(e,u,c);return{root:l,list:i,head:u,tail:c,cover:g(n,r,l)}},k=function(e,n){var r=Array.isArray(n.node)?n.node.map((function(e){return t({},n,{node:e})})):n;return e.concat(r)},I=function(e,n,i,u,c,l){var s,d,f=[].concat(e).filter((function(e){return null!=e})).map((function(e){return r(e)?e:{node:e}})).map((function(e){var n,r;return t({},e,{preventDefault:null===(n=e.preventDefault)||void 0===n||n,delay:null!==(r=e.delay)&&void 0!==r?r:l,type:void 0===e.type?[null==e.key?"":"keydown",null==e.node?"":"click"].filter((function(e){return""!==e})):[].concat(e.type)})})).reduce(k,[]),v=o(n)?n:!0===n?null!==(s=null===(d=f[0])||void 0===d?void 0:d.on)&&void 0!==s?s:function(){}:n;return[o(v)?{node:null,key:a,on:v,target:i?u:c,type:["keydown"]}:null].concat(f).filter((function(e){return null!=e}))},E=function(e,t){var r=function(){var r=o(e),i=r&&e(t),u=r&&"[object Promise]"===n(i)&&"function"==typeof i.then,c=r&&!u;return{promiseDelay:u,callbackDelay:c,commonDelay:!u&&!c,delayRes:i}}(),i=r.promiseDelay,u=r.callbackDelay,c=r.commonDelay,l=r.delayRes;i?l.then(t):u||c&&t()},_=function(e,t,n,r,i,c,l,a){if(null==e||!0===e)return i?t:l;if(o(e)){var s=e({e:a,list:n,cover:t,root:r,last:n[c],lastI:c});return null==s||!0===s?i?t:l:s}return u(e)},w=function(){function e(){this.cache=[],this.isEmpty=!0}var t=e.prototype;return t.push=function(e,t,n){this.isEmpty=!1,this.cache.push({node:e,type:t,handler:n})},t.clean=function(){this.cache=[],this.isEmpty=!0},t.addListeners=function(){this.cache.forEach((function(e){var t;return null===(t=e.node)||void 0===t?void 0:t.addEventListener(e.type,e.handler)}))},t.removeListeners=function(){this.cache.forEach((function(e){var t;return null===(t=e.node)||void 0===t?void 0:t.removeEventListener(e.type,e.handler)})),this.clean()},e}(),b=function(){function e(){this.cache=new Map}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.push=function(e,t,n){this.has(e)||(t.addEventListener("keydown",n),this.cache.set(e,{node:t,handler:n}))},t.remove=function(e){var t=this;[].concat(e).forEach((function(e){return t.cache.get(e).node.removeEventListener("keydown",t.cache.get(e).handler)}))},e}(),x=function(){function t(){this.data=[],this.head=null,this.tail=null,this.prevI=-1,this.curI=-1,this._prev=null,this._cur=null,this.rangeBeforePrevCallback=!1,this.rangeBeforeNextCallback=!1}var n,r,o=t.prototype;return o.update=function(e){this.data.splice(0,this.data.length),Array.prototype.push.apply(this.data,e),this.head=e[0],this.tail=e.at(-1)},o.isEmpty=function(){return 0===this.data.length},o.has=function(e){return!!this.data[e]},o.record=function(e,t){this.recordPrev(this.cur,this.curI),this.recordCur(e,t)},o.recordSequnce=function(e,t){this.curI===t||this.curI<0&&t<0||this.record(e,t)},o.recordRange=function(e){this.cur===e||null==this.cur&&null==e||this.record(e,-1)},o.recordPrev=function(e,t){this.prevI=t<0?-1:t,this.prev=e||null},o.recordCur=function(e,t){this.curI=t<0?-1:t,this.cur=e||null},o.recordSequenceByIdx=function(e){this.recordSequnce(this.data[e],e)},n=t,(r=[{key:"prev",get:function(){return this._prev||this.data[this.prevI]||null},set:function(e){this._prev=e}},{key:"cur",get:function(){return this._cur||this.data[this.curI]||null},set:function(e){this._cur=e}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}(),L=function(){var e,n,s=0-((arguments.length<=0?void 0:arguments[0])instanceof Array),L=0+s<0||arguments.length<=0+s?void 0:arguments[0+s],B=1+s<0||arguments.length<=1+s?void 0:arguments[1+s],A=null!==(e=2+s<0||arguments.length<=2+s?void 0:arguments[2+s])&&void 0!==e?e:{};if(!(Array.isArray(B)&&B.length>1))throw new Error("请至少传入一个数组，数组至少包含两个可聚焦元素，用来表示列表的头和尾。");var C=A.sequence,T=A.loop,P=A.next,D=A.prev,R=A.trigger,S=A.entry,N=A.exit,j=A.onEscape,F=A.onClick,q=A.onMove,K=A.cover,M=A.initialActive,O=A.correctionTarget,$=A.delayToFocus,H=A.delayToBlur,U=A.removeListenersEachExit,z=void 0===U||U,G=A.removeListenersEachEnter,J=A.addEntryListenersEachExit,Q=void 0===J||J,V=A.stopPropagation,W=void 0!==V&&V,X=A.preventDefault,Y=A.manual,Z=A.allowSafariToFocusAfterMousedown,ee=void 0===Z||Z,te=[].concat(S).filter((function(e){return null!=e})).map((function(e){return r(e)?e:{node:e}})).map((function(e){var n,r;return t({},e,{preventDefault:null===(n=e.preventDefault)||void 0===n||n,delay:null!==(r=e.delay)&&void 0!==r?r:$,type:void 0===e.type?[null==e.key?"":"keydown",null==e.node?"":"click"].filter((function(e){return""!=e})):[].concat(e.type),onExit:!0===e.onExit?e.on:e.onExit})})).reduce(k,[]),ne=0===te.length,re=new Set(te.map((function(e){return o(e.onExit)?e.node:null})).filter((function(e){return null!=e})).map((function(e){return u(e)}))),oe=u(R||(null===(n=te[0])||void 0===n?void 0:n.node)),ie=r(K)?K:{},ue=ie.node,ce=ie.enterKey,le=ie.onEnter,ae=ie.exit,se=null!=K&&!1!==K&&!1!==ue,de=se&&(!0===K||!0===ue||null==ue),fe=[].concat(ae).filter((function(e){return null!=e})).map((function(e){return r(e)?e:{key:e}})).map((function(e){var n;return t({},e,{target:null!==(n=e.target)&&void 0!==n?n:oe})})),ve=se&&0===fe.length,pe=new x,ye=null,he=null;pe.recordPrev(null,null!=M?M:-1);var ge=r(P)?P:{key:P},me=ge.key,ke=ge.on,Ie=r(D)?D:{key:D},Ee=Ie.key,_e=Ie.on,we=!1===j,be=!(null==T||T),xe=!!(me||Ee||C),Le=null!=X?X:xe,Be=!1,Ae=!1,Ce=new w,Te=new w,Pe=new b;if(!Y&&(Me(),(ne?[{}]:te).some((function(e){return!e.delay})))){var De=m(L,B,ue,de),Re=De.root,Se=De.list,Ne=De.cover;pe.update(Se),Ke(ye=Re,pe,he=Ne)}var je={enter:function(e){if(oe=oe||i(),e)return Fe({fromInvoke:!0},e.on,e.target,e.delay);for(var t=function(){var e=te[n],t=e.on,r=e.type,o=e.node,i=e.target,u=e.delay;if(null!=r&&r.some((function(e){return null==e||!1===e||"invoke"===e}))||null==o)return{v:Fe({fromInvoke:!0},t,i,u)}},n=0;n<te.length;++n){var r=t();if("object"==typeof r)return r.v}return Fe({fromInvoke:!0})},exit:function(e){var t=m(L,B,ue,de),n=t.list,r=t.cover,o=t.root;if(e){var i=e.on,c=e.target;return f(u(c),i)}for(var l=I(N,j,se,r,oe,H),a=function(){var e=l[s],t=e.on,n=e.type,r=e.target;if(null!=n&&n.some((function(e){return null==e||!1===e||"invoke"===e})))return{v:f(r,t)}},s=0;s<l.length;++s){var d=a();if("object"==typeof d)return d.v}function f(e,t){return pe.isEmpty()&&pe.update(n),qe({fromInvoke:!0},t,e,!1,r,pe.data,o)}},removeListeners:function(){Ce.removeListeners(),Te.removeListeners()},removeListRelatedListeners:function(){Ce.removeListeners()},removeEntryListeners:function(){Te.removeListeners()},addEntryListeners:function(){Me()},addListRelatedListeners:function(){var e=m(L,B,ue,de),t=e.root,n=e.list,r=e.cover;pe.isEmpty()&&pe.update(n),Ke(t,pe,r)},addForward:function(e,t){var n=null;if(o(t)){var r=m(L,B,ue,de);n=t({root:r.root,list:r.list,head:r.head,tail:r.tail,cover:r.cover,curI:pe.curI,prevI:pe.prevI})}else n=t;var i=n,c=i.node,l=i.on,a=i.key,s=i.target,d=u(c),f=u(s);Pe.push(e,d,(function(e){null!=a&&a(e,pe.prevI,pe.curI)&&(e.preventDefault(),null==l||l(),p(f))}))},removeForward:function(e){Pe.remove(e)},updateList:function(e){var t=e.map((function(e){return u(e)})).filter((function(e){return null!=e}));pe.update(t)},i:function(e){if(pe.has(e)&&Be){pe.recordSequenceByIdx(e);var t=pe.prev,n=pe.prevI,r=pe.cur,o=pe.curI;return null==q||q({e:{fromI:!0},prev:t,prevI:n,cur:r,curI:o}),v(B[o]),e}return pe.curI<0?pe.prevI:pe.curI}};return je;function Fe(e,t,n,r,o,i){var u,c;function l(){if(pe.isEmpty()){var t=h(B).list;pe.update(t)}null==ye&&(ye=y(L,pe.head,pe.tail)),null==he&&se&&(he=g(ue,de,ye)),Y||Ke(ye,pe,he),!1!==n&&function(t,r,o){var i=r.data,u=r.prev,c=r.head,l=r.curI,a=_(n,t,i,o,se,l,u||c,e);if(xe){var s=i.indexOf(a);if(s>-1){r.recordSequenceByIdx(s);var d=r.cur,f=r.curI;null==q||q({e,prev:null,cur:d,prevI:-1,curI:f}),Be=!0}}else if(o.contains(a)&&a!==t){r.recordRange(a);var v=r.cur,y=r.curI;null==q||q({e,prev:null,cur:v,prevI:-1,curI:y}),Be=!0}!se||a!==t&&!0!==Be||(Ae=!0),p(a)}(he,pe,ye)}Ae||Be||(o&&(null===(u=e.preventDefault)||void 0===u||u.call(e)),i&&(null===(c=e.stopPropagation)||void 0===c||c.call(e)),Promise.resolve(null==t?void 0:t(e)).then((function(e){E(r,l)})))}function qe(e,t,n,r,i,u,c,l,a,s){var d,f;if(!Be||o(l)&&!l({e,prev:pe.prev,cur:pe.cur,prevI:pe.prevI,curI:pe.curI}))return!1;a&&(null===(d=e.preventDefault)||void 0===d||d.call(e)),s&&(null===(f=e.stopPropagation)||void 0===f||f.call(e)),xe?pe.recordSequenceByIdx(-1):pe.recordRange(null),Be=!1;var p=_(n,i,u,c,se,pe.curI,oe,e);return p?function(){function n(){Y||(p!==i&&Oe(),Q&&Me()),null==q||q({e,prev:pe.prev,cur:null,prevI:pe.prevI,curI:-1}),v(p)}Promise.resolve(null==t?void 0:t(e)).then((function(e){E(r,n)}))}():function(){function n(t){return function(n){Y||(Oe(),Q&&Me()),null==q||q({e,prev:pe.prev,cur:null,prevI:pe.prevI,curI:-1}),t&&v(t)}}Promise.resolve(null==t?void 0:t(e)).then((function(e){if(!1!==p){var t=n(oe);E(r,t)}else n()()}))}()}function Ke(e,t,n){var r=t.data,s=t.head,y=t.tail;if(Ce.isEmpty){if(null==e)throw new Error("没有找到元素 "+L+"，您可以尝试 delayToFocus 选项，等待元素 "+L+" 渲染完毕后进行聚焦。");if(null==s||null==y)throw new Error("至少需要包含两个可以聚焦的元素，如果元素需要等待渲染，您可以尝试 delayToFocus 选项。");!function(){var s=!1,h=function(){return!!ne||Be},g=xe?function(e){if(e.target!==n&&h()){var o=[t.curI,t.recordSequenceByIdx.bind(t)],i=o[0],u=o[1],c=Math.max(0,i),l=r.length,a=!1;if((null!=me?me:d)(e)){var s=c+1,p=be?Math.min(l-1,s):s;p%=l,null==ke||ke({e,prev:r[c],cur:r[p],prevI:c,curI:p}),null==q||q({e,prev:r[c],cur:r[p],prevI:c,curI:p}),u(p),v(r[p]),a=!0}else if((null!=Ee?Ee:f)(e)){var y=c-1,g=be?Math.max(0,y):y;g=(g+l)%l,null==_e||_e({e,prev:r[c],cur:r[g],prevI:c,curI:g}),null==q||q({e,prev:r[c],cur:r[g],prevI:c,curI:g}),u(g),v(r[g]),a=!0}a&&(Le&&e.preventDefault(),W&&e.stopPropagation())}}:function(o){var i=r[0],u=r.at(-1),c=o.target;if(c!==n&&h()){var l=!1,a=!1;d(o)?(t.recordRange(c),t.rangeBeforeNextCallback=!0,c===u&&(l=!0,be||v(i)),c===e&&(l=!0,v(i)),a=!0):f(o)&&(t.recordRange(c),t.rangeBeforePrevCallback=!0,c===i&&(l=!0,be||v(u)),c===e&&(l=!0,v(u)),a=!0),(l||a&&Le)&&o.preventDefault(),a&&W&&o.stopPropagation()}},m=function(e,t){var n=e.reduce((function(e,n){var r,i=e[0],c=e[1],l=e[2],a=e[3],s=e[4],d=e[5],f=function(e){var t;return null===(t=n.type)||void 0===t?void 0:t.includes(e)};return r=n.node,o(r)||null!=r&&t.contains(u(r))||null==r?(f("keydown")&&(i=i.concat(n)),f("click")&&(c=c.concat(n)),f("focus")&&(l=l.concat(n)),f("outlist")&&(d=d.concat(n))):(f("click")&&(a=a.concat(n)),f("focus")&&(s=s.concat(n)),f("outlist")&&(d=d.concat(n))),[i,c,l,a,s,d]}),new Array(6).fill([])),r=n[0],i=n[1],c=n[2],l=n[3],a=n[4],s=n[5];return{keyExits:r,clickExits:i,focusExits:c,hasClickExits:i.length>0,hasFocusExits:c.length>0,hasKeyExits:r.length>0,clickExits_wild:l,focusExits_wild:a,outListExits:s}}(I(N,j,se,n,oe,H),e),k=m.keyExits,E=m.clickExits,_=m.focusExits,w=m.hasClickExits,b=m.hasFocusExits,x=m.hasKeyExits,L=m.clickExits_wild,B=m.focusExits_wild,A=m.outListExits,C=L.map((function(e){return[u(null==e?void 0:e.node),$(e)]})),T=B.map((function(e){return[u(null==e?void 0:e.node),U(e)]}));Ce.push(e,"focusin",(function(o){var i=o.target,c=o.relatedTarget;if(s)s=!1;else if(se&&i===n)Ae=!0;else if(se&&!1===P&&!1===Ae)p(n);else{if(t.rangeBeforePrevCallback||t.rangeBeforeNextCallback){var l;t.recordRange(i),t.rangeBeforePrevCallback=!1,t.rangeBeforeNextCallback=!1;var a=t.cur,d=t.prev;return null===(l=t.rangeBeforePrevCallback?ke:_e)||void 0===l||l({e:o,prev:d,cur:a,prevI:-1,curI:-1}),void(null==q||q({e:o,prev:d,cur:a,prevI:-1,curI:-1}))}if(!1!==O&&!1===Be&&!1===P&&(null==c||!e.contains(c))){var f,v=t.prev||t.head,y=null!==(f=null==O?void 0:O({list:r,cover:n,root:e,last:t.prev,lastI:t.prevI,e:o}))&&void 0!==f?f:v,h=u(y);g(h),p(h)}!1!==O||!1!==Be||!1!==P||null!=c&&e.contains(c)||g(i)}function g(e){if(xe){var n=r.findIndex((function(t){return t===e}));n>-1&&(t.recordSequenceByIdx(n),null==q||q({e:o,prev:null,cur:t.cur,prevI:-1,curI:t.curI}),Be=!0)}else t.recordRange(e),null==q||q({e:o,prev:null,cur:t.cur,prevI:-1,curI:t.curI}),Be=!0}})),Ce.push(e,"focusout",(function(o){re.has(o.relatedTarget)||c((function(){var c=i(),l=!e.contains(c),a=c===n;if(o.target===n&&l)Ae=!1;else{var s=null;(a||l)&&(s=function(t){for(var o=0;o<A.length;++o){var i=A[o],c=i.on,l=i.target,a=i.delay,s=i.preventDefault,d=i.stopPropagation;return qe(t,c,u(l),a,n,r,e,A[o].if,s,d)}}(o),xe?t.recordSequenceByIdx(-1):t.recordRange(null)),!1!==s&&(a?Be=!1:l&&(Be=!1,Ae=!1))}}))})),e.contains(n)||null==n||(Ce.push(n,"focus",(function(){Ae=!0})),Ce.push(n,"blur",(function(){D?D=!1:Ae=!1}))),Ce.push(e,"keydown",(function(e){var t=!1;x&&(t=function(e){if(!(e.target===n||we&&a(e)))for(var t=0;t<k.length;++t)if(M(e,k[t]))return!0}(e)),t||g(e)})),Ce.push(e,"click",(function(e){!function(e){var n=e.target;if(xe){var o=r.findIndex((function(e){return e.contains(n)}));if(o>-1){var i=t.prev,u=t.prevI,c=t.curI;t.recordSequenceByIdx(o);var l=t.prev,a=t.prevI,s=t.cur,d=t.curI;c<0&&u!==o&&(l=i,a=u),null==F||F({e,prev:l,cur:s,prevI:a,curI:d}),c!==d&&(null==q||q({e,prev:l,cur:s,prevI:a,curI:d}))}}else{var f=t.prev,v=t.cur;t.recordRange(n);var p=t.prev,y=t.cur;null==v&&f!==n&&(p=f),null==F||F({e,prev:p,cur:y,prevI:-1,curI:-1}),v!==y&&(null==q||q({e,prev:p,cur:y,prevI:-1,curI:-1}))}}(e),w&&function(e){for(var t=0;t<E.length&&!S(e,E[t]);++t);}(e)})),Ce.push(e,"mousedown",(function(e){var t;P=!0,c((function(){return P=!1})),(!xe||xe&&(t=r.find((function(t){return t.contains(e.target)}))))&&(Be=!0,se&&(Ae=!0),ee&&t&&void 0!==window.safari&&(v(t),e.preventDefault()))})),b&&Ce.push(e,"focusin",(function(e){for(var t=0;t<_.length&&!K(e,_[t]);++t);})),T.forEach((function(e){var t=e[0],n=e[1];Ce.push(t,"focus",n)})),C.forEach((function(e){var t=e[0],n=e[1];Ce.push(t,"click",n)})),null!=n&&Ce.push(n,"keydown",(function(e){if(e.target===n&&Ae&&!Be){if((null!=ce?ce:l)(e)&&!Be)return e.preventDefault(),D=!0,Be=!0,null==le||le(e),void(xe?(t.recordSequenceByIdx(Math.max(0,t.prevI)),v(t.cur),null==q||q({e,prev:null,cur:t.cur,prevI:-1,curI:t.curI})):(t.recordRange(null==t.prev?t.head:t.prev),v(t.cur),null==q||q({e,prev:null,cur:t.cur,prevI:-1,curI:-1})));for(var r=0;r<fe.length;++r){var o=fe[r],i=o.key,c=o.on,a=o.target,f=u(a);if(null!=i&&i(e,t.prevI,t.curI))return void p(e,c,f)}if(ve&&d(e))return s=!0,void v(y)}function p(e,t,n){null==t||t(e),n&&v(n),Oe()}})),Ce.addListeners();var P=!1,D=!1;function R(r,i,c){var l=i.node,a=i.on,s=i.target,d=i.delay,f=i.preventDefault,v=i.stopPropagation,p=t.data,y=t.head,h=t.tail,g=o(l)?l({list:p,head:y,tail:h}):l,m=u(g),k=u(s);return!c(r,m,i.key)&&!1!==qe(r,a,k,d,n,p,e,i.if,f,v)}function S(e,t){return R(e,t,(function(e,t){return null!=t&&!t.contains(e.target)||null==t}))}function K(e,t){return R(e,t,(function(e,t){return null!=t&&e.target!==t||null==t}))}function M(e,n){return R(e,n,(function(e,n,r){return null!=n&&e.target!==n||!(null!=r&&r(e,t.prevI,t.curI))}))}function $(e){return function(t){S(t,e)}}function U(e){return function(t){K(t,e)}}}()}}function Me(){if(Te.isEmpty){for(var e=function(){var e=te[t],n=e.node,r=e.on,i=e.key,c=e.type,l=e.target,a=e.delay,s=e.onExit,d=e.preventDefault,f=e.stopPropagation,v=e.if,p=[].concat(c),y=["keydown","focus","click"],h=u(n);p.forEach((function(e){if(h&&y.includes(e)){var t="keydown"===e?function(e){return null==i?void 0:i(e,pe.prevI,pe.curI)}:function(e){return!0};Te.push(h,e,function(e){return function(t){o(v)&&!v({e:t,prev:pe.prev,cur:pe.cur,prevI:pe.prevI,curI:pe.curI})||!e(t)||function(e){if(Be){if(o(s)){var t=m(L,B,ue,de),n=t.list,i=t.cover,u=t.root;qe(e,s,l,!1,i,n,u,null,d,f)}}else Fe(e,r,l,a,d,f),G&&!Y&&Te.removeListeners()}(t)}}(t))}}))},t=0;t<te.length;++t)e();Te.addListeners()}}function Oe(){ve||z&&!Y&&Ce.removeListeners()}};L(["#firstTabbableNode","#lastTabbableNode"],{entry:"#entryBtn",exit:"#lastTabbableNode",onEscape:!0,delayToFocus:!0});const B=document.getElementById("dialog"),A=document.getElementById("dialog_mask"),C=document.getElementById("open");L(B,["#firstFocusBtn","#close"],{loop:!1,entry:{node:C,on:function(){B.classList.add("openedDialog"),B.classList.remove("closedDialog"),A.classList.remove("closed_mask"),C.ariaExpanded=!0},target:({list:e})=>e[0]},exit:{node:["#close","#firstFocusBtn","#confirm"],on:function(){B.classList.remove("openedDialog"),B.classList.add("closedDialog"),A.classList.add("closed_mask"),C.ariaExpanded=!1},type:["click","outlist"]},onEscape:!0});const T=document.getElementById("menu_btn"),P=document.getElementById("menu");function D(){T.classList.toggle("opened"),P.classList.toggle("opened"),T.ariaExpanded=!!T.classList.contains("opened")}L(P,["#hot_anchor","#scroll_anchor"],{onEscape:D,entry:{node:T,on:D,onExit:!0,target:({list:e})=>e[0]},exit:[{node:({head:e})=>e,type:"keydown",key:e=>"Tab"===e.key&&e.shiftKey,on:D},{node:({tail:e})=>e,type:"keydown",key:e=>"Tab"===e.key&&!e.shiftKey,on:D,target:"#nav_link"},{type:"outlist",on:D,target:({e})=>!e?.relatedTarget?.id?.includes("h-")&&T}]}),L("#tab_list",["#tab_1","#tab_2","#tab_3","#tab_4","#tab_5"],{next:e=>"ArrowRight"===e.key,prev:e=>"ArrowLeft"===e.key,exit:[{key:e=>"Tab"===e.key&&!e.shiftKey,target:"#tags_code"},{key:e=>"Tab"===e.key&&e.shiftKey,target:"#navigation_code"}],initialActive:1,removeListenersEachExit:!1,onMove:function({prev:e,cur:t,prevI:n,curI:r}){if(-1===n||-1===r)return;e.setAttribute("aria-selected","false"),t.setAttribute("aria-selected","true");const o=document.getElementById("tabpanel_"+(n+1)),i=document.getElementById("tabpanel_"+(r+1));o.classList.add("is-hidden"),i.classList.remove("is-hidden")}}),L("#songs_wrapper",["#song_1","#song_2","#song_3","#song_4","#song_5","#song_6","#song_7"],{next:e=>"ArrowDown"===e.key,prev:e=>"ArrowUp"===e.key,exit:[{key:e=>"Tab"===e.key&&!e.shiftKey,target:"#more_from"},{key:e=>"Tab"===e.key&&e.shiftKey,target:"#grid_wrapper"},{type:"outlist",target:!1}],entry:{node:"#grid_wrapper",key:(e,t)=>("Tab"===e.key&&!e.shiftKey&&t>-1||"ArrowDown"===e.key||"ArrowUp"===e.key)&&"grid_wrapper"===e.target.id,type:"keydown"},onMove:function({cur:e,prev:t,curI:n}){t?.classList.remove("focused"),e?.classList.add("focused"),null!=S&&(R=-1===S.i()?0:S.i()),S?.removeListeners(),n>-1&&(S=function(e,t){const n=e+1;return L(`#song_${n}`,[`#s${n}_play`,`#s${n}_a`,`#s${n}_like`,`#s${n}_more`],{entry:[{node:`#song_${n}`,type:"focus"},{node:`#song_${n}`,key:e=>"ArrowRight"===e.key||"ArrowLeft"===e.key,type:"keydown"}],next:e=>"ArrowRight"===e.key,prev:e=>"ArrowLeft"===e.key,exit:{type:"outlist",target:!1},initialActive:R,correctionTarget:!1,addEntryListenersEachExit:!1})}(n))},correctionTarget:({lastI:e,last:t})=>-1===e?"#grid_wrapper":t,removeListenersEachExit:!1}).addForward("grid",{node:"#grid_wrapper",key:(e,t,n)=>"Tab"===e.key&&!e.shiftKey&&-1===t&&-1===n,target:"#more_from"});let R=0,S=null;const N=document.getElementById("scroll_content"),j=L(N,[...document.getElementsByClassName("scroll_item")],{sequence:!0,entry:[{node:"#scroll_wrapper",type:"keydown",key:e=>"Enter"===e.key,if:({e:{target:{id:e}}})=>"scroll_wrapper"===e},{node:"#scroll_type",type:"keydown",key:({key:e})=>["ArrowRight","Tab"].includes(e),stopPropagation:!0},{node:"#scroll_top",type:"keydown",key:({key:e})=>["ArrowLeft","Tab","Enter"," "].includes(e),stopPropagation:!0,target({e:{key:e},list:t}){if("Enter"===e||" "===e)return t[0]},on({key:e}){"Enter"!==e&&" "!==e||O()}}],exit:[{key:({key:e})=>"ArrowLeft"===e,target:"#scroll_type"},{key:({key:e})=>"ArrowRight"===e,target:"#scroll_top"},{node:["#scroll_type","#scroll_top"],type:"click",target:!1,on({target:e}){"scroll_top"===e.id&&O()}}],stopPropagation:!0,onEscape:!0,onMove:function({cur:e}){if(F?.removeListeners(),e&&"scroll_more"!==e.id){const t=e.getElementsByClassName("item_top")[0],n=e.getElementsByClassName("item_bottom")[0];F=L([t,n],{entry:{node:e,type:"keydown",key:e=>"Enter"===e.key},exit:{key:e=>"Escape"===e.key,stopPropagation:!0},delayToFocus:!0,stopPropagation:!0})}},removeListenersEachExit:!1,correctionTarget({e:{relatedTarget:e}}){if(null==e||!N.contains(e))return"#scroll_wrapper"}});j.addForward("next_wrapper",{node:"#scroll_wrapper",key:({key:e,shiftKey:t})=>"Tab"===e&&!t,target:"#scroll_code"});let F=null;const q=document.getElementById("scroll_items");let K=!1;function M(){const e=Math.abs(N.scrollHeight-N.scrollTop-N.clientHeight)<1;if(!0===e&&e!==K){const e=$();q.appendChild(e);let t=[...document.getElementsByClassName("scroll_item")];j.updateList(t)}K=e}function O(){N.scroll({top:0,behavior:"smooth"})}function $(){const e=document.createDocumentFragment();for(let n=0;n<9;++n){const n=t("scroll_item","商品"),r=t("item_top","图片"),o=document.createElement("div");o.classList.add("item_center");const i=t("item_avator","店家"),u=t("item_avator_right","商品名称");o.append(i,u);const c=t("item_bottom","加入购物车");n.append(r,o,c),e.appendChild(n)}return e;function t(e,t){const n=document.createElement("div");return n.classList.add(e),n.setAttribute("tabindex",0),n.setAttribute("aria-label",t),n.setAttribute("role","button"),n}}N.addEventListener("scroll",M),scroll_type.addEventListener("click",(function(){const e=document.getElementsByClassName("to_click")[0];e.classList.toggle("hidden"),document.getElementsByClassName("to_scroll")[0].classList.toggle("hidden"),scroll_more.classList.toggle("hidden"),Array.from(e.classList).includes("hidden")?(N.removeEventListener("scroll",M),j.updateList([...document.getElementsByClassName("scroll_item"),document.getElementById("scroll_more")])):(N.addEventListener("scroll",M),j.updateList([...document.getElementsByClassName("scroll_item")]))})),scroll_more.addEventListener("click",(function(e){const t=$();q.appendChild(t);const n=[...document.getElementsByClassName("scroll_item"),document.getElementById("scroll_more")];j.updateList(n),e.stopPropagation()})),scroll_top.addEventListener("click",(function(e){O(),e.stopPropagation()}))}},e=>{e(e.s=18)}]);