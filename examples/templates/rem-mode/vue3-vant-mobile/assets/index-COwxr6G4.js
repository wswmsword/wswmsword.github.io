import{F as S,_ as B,v as M,a as N}from"./inline-px-to-vw-vhOqtW99.js";import{d as q,J as U,W as $,a3 as D,r as v,a4 as y,f as F,M as T,N as z,k as t,O as n,P as e,a5 as G,a6 as c,X as i,a1 as f,a2 as w}from"./index-D_R978jj.js";import"./index-Do6_xoE1.js";import{B as R}from"./index-Ii-rrj43.js";import{b as h}from"./route-block-B_A1xBdJ.js";import"./use-id-BoVhf20j.js";import"./toNumber-BA28v8oo.js";import"./index-D7hx_8B8.js";const I={class:"m-x-a w-7xl text-center"},J={class:"overflow-hidden rounded-3xl"},L={class:"mt-16 overflow-hidden rounded-3xl"},O={class:"mt-16 overflow-hidden rounded-3xl"},W={class:"mt-16 overflow-hidden rounded-3xl"},X={class:"mt-16"},j=q({__name:"index",setup(A){const{t:o}=U(),V=$(),g=D(),u=v(!1),s=y({email:"",code:"",password:"",confirmPassword:""}),b=r=>r===s.password,l=y({email:[{required:!0,message:o("forgot-password.pleaseEnterEmail")}],code:[{required:!0,message:o("forgot-password.pleaseEnterCode")}],password:[{required:!0,message:o("forgot-password.pleaseEnterPassword")}],confirmPassword:[{required:!0,message:o("forgot-password.pleaseEnterConfirmPassword")},{required:!0,validator:b,message:o("forgot-password.passwordsDoNotMatch")}]});async function x(){try{u.value=!0,(await g.reset()).code===0&&(c({type:"success",message:o("forgot-password.passwordResetSuccess")}),V.push({name:"login"}))}finally{u.value=!1}}const p=v(!1),C=F(()=>p.value?o("forgot-password.gettingCode"):o("forgot-password.getCode"));async function P(){if(!s.email){c({type:"warning",message:o("forgot-password.pleaseEnterEmail")});return}p.value=!0;const r=await g.getCode();r.code===0&&c({type:"success",message:"".concat(o("forgot-password.sendCodeSuccess"),": ").concat(r.result)}),p.value=!1}return(r,a)=>{const m=N,_=R,k=S,E=B;return T(),z("div",I,[t(k,{model:e(s),rules:e(l),"validate-trigger":"onSubmit",onSubmit:x},{default:n(()=>[i("div",J,[t(m,{modelValue:e(s).email,"onUpdate:modelValue":a[0]||(a[0]=d=>e(s).email=d),modelModifiers:{trim:!0},rules:e(l).email,name:"email",placeholder:e(o)("forgot-password.email")},null,8,["modelValue","rules","placeholder"])]),i("div",L,[t(m,{modelValue:e(s).code,"onUpdate:modelValue":a[1]||(a[1]=d=>e(s).code=d),modelModifiers:{trim:!0},rules:e(l).code,name:"code",placeholder:e(o)("forgot-password.code")},{button:n(()=>[t(_,{size:"small",type:"primary",plain:"",onClick:P},{default:n(()=>[f(w(e(C)),1)]),_:1})]),_:1},8,["modelValue","rules","placeholder"])]),i("div",O,[t(m,{modelValue:e(s).password,"onUpdate:modelValue":a[2]||(a[2]=d=>e(s).password=d),modelModifiers:{trim:!0},type:"password",rules:e(l).password,name:"password",placeholder:e(o)("forgot-password.password")},null,8,["modelValue","rules","placeholder"])]),i("div",W,[t(m,{modelValue:e(s).confirmPassword,"onUpdate:modelValue":a[3]||(a[3]=d=>e(s).confirmPassword=d),modelModifiers:{trim:!0},type:"password",rules:e(l).confirmPassword,name:"confirmPassword",placeholder:e(o)("forgot-password.comfirmPassword")},null,8,["modelValue","rules","placeholder"])]),i("div",X,[t(_,{loading:e(u),type:"primary","native-type":"submit",round:"",block:""},{default:n(()=>[f(w(r.$t("forgot-password.confirm")),1)]),_:1},8,["loading"])])]),_:1},8,["model","rules"]),t(E,{to:"login",block:"",style:G({"margin-top":e(M)(8)})},{default:n(()=>[f(w(r.$t("forgot-password.backToLogin")),1)]),_:1},8,["style"])])}}});typeof h=="function"&&h(j);export{j as default};
