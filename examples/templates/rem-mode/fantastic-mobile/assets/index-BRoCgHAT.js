
/**
 * 由 Fantastic-mobile 提供技术支持
 * Powered by Fantastic-mobile
 * https://fantastic-mobile.hurui.me/
 */
    
import{d as O,A as K,B as k,h as F,C as Q,r as u,D as j,z as U,p as X,i as r,E as z,F as I,j as t,a as s,G as L,q as v,t as d,s as h,b as g,w,x as M,y as N,T as P,l as Y,m as Z,o,v as c,H as D,I as ee,_ as te,c as E,n as ae}from"./index-NBq_IxQ4.js";const se={class:"h-full flex-center whitespace-nowrap px-2"},oe={class:"min-w-0 flex-1 text-center text-sm"},ne={class:"truncate"},re={class:"h-full flex-center whitespace-nowrap px-2"},le={key:0,class:"copyright relative flex flex-wrap items-center justify-center p-4 text-sm text-stone-5 mix-blend-difference"},ie={key:0,class:"px-1"},ce=["href"],pe={key:1,class:"px-1"},de={key:2,href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener",class:"px-1 text-center text-stone-5 no-underline"},he={class:"h-full flex-center px-4"},be={key:1,class:"text-xs"},fe=O({name:"PageLayout",__name:"index",props:{navbar:{type:Boolean,default:void 0},tabbar:{type:Boolean,default:void 0},copyright:{type:Boolean,default:void 0},backTop:{type:Boolean,default:void 0}},emits:["scroll","reachTop","reachBottom"],setup(ue,{expose:V,emit:W}){const y=W,T=Y(),a=K(),l=k("layoutRef");V({ref:l});function q(e){x(),m(),_(),y("scroll",e),e.target.scrollTop===0&&y("reachTop"),Math.ceil(e.target.scrollTop+e.target.clientHeight)>=e.target.scrollHeight&&y("reachBottom")}F(()=>{x(),m(),_()}),Q(()=>{x(),m(),_()});const S=k("startSideRef"),C=k("endSideRef"),b=u(0);F(()=>{const{width:e}=j(S,void 0,{box:"border-box"}),{width:p}=j(C,void 0,{box:"border-box"});U([e,p],i=>{b.value=Math.max(...i)},{immediate:!0})});const B=u(0);function x(){var e;B.value=((e=l.value)==null?void 0:e.scrollTop)??0}const R=u(!1);function m(){var f,n,A;const e=((f=l.value)==null?void 0:f.scrollTop)??0,p=((n=l.value)==null?void 0:n.clientHeight)??0,i=((A=l.value)==null?void 0:A.scrollHeight)??0;R.value=Math.ceil(e+p)<i}const G=X(()=>a.settings.tabbar.list.length>0?a.settings.tabbar.list:[]);function H(e){return T.fullPath===e.path?e.activeIcon??e.icon??void 0:e.icon??void 0}const $=u(0);function _(){var e;$.value=((e=l.value)==null?void 0:e.scrollTop)??0}function J(){var e;(e=l.value)==null||e.scrollTo({top:0,behavior:"smooth"})}return(e,p)=>{const i=te,f=Z("RouterLink");return o(),r("div",{ref_key:"layoutRef",ref:l,class:"relative h-vh flex flex-col overflow-auto overscroll-none supports-[(height:100dvh)]:h-dvh",onScroll:q},[z(s("header",{class:h(["navbar w-full flex-center bg-[var(--g-navbar-bg)] text-[var(--g-navbar-color)] transition-all pt-safe h+safe-t-[var(--g-navbar-height)]",{"shadow-top":t(B)}])},[s("div",{class:"h-full flex items-center justify-start",style:L({...t(b)&&{width:`${t(b)}px`}})},[s("div",{ref_key:"startSideRef",ref:S,class:"h-full flex-center whitespace-nowrap"},[s("div",se,[v(e.$slots,"navbar-start",{},void 0,!0)])],512)],4),s("div",oe,[s("div",ne,d(t(a).title),1)]),s("div",{class:"h-full flex items-center justify-end",style:L({...t(b)&&{width:`${t(b)}px`}})},[s("div",{ref_key:"endSideRef",ref:C,class:"h-full flex-center whitespace-nowrap"},[s("div",re,[v(e.$slots,"navbar-end",{},void 0,!0)])],512)],4)],2),[[I,e.navbar??t(a).settings.navbar.enable]]),s("div",{class:h(["relative flex flex-1 flex-col transition-margin",{"mt+safe-[var(--g-navbar-height)]":e.navbar??t(a).settings.navbar.enable,"mb+safe-[var(--g-tabbar-height)]":e.tabbar??t(a).settings.tabbar.enable}])},[v(e.$slots,"default",{},void 0,!0),g(P,M(N({enterActiveClass:"ease-out",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"})),{default:w(()=>[e.copyright??t(a).settings.copyright.enable?(o(),r("div",le,[p[0]||(p[0]=s("span",{class:"px-1"},"Copyright",-1)),g(i,{name:"i-ri:copyright-line",class:"text-lg"}),t(a).settings.copyright.dates?(o(),r("span",ie,d(t(a).settings.copyright.dates),1)):c("",!0),t(a).settings.copyright.company?(o(),r(D,{key:1},[t(a).settings.copyright.website?(o(),r("a",{key:0,href:t(a).settings.copyright.website,target:"_blank",rel:"noopener",class:"px-1 text-center text-stone-5 no-underline"},d(t(a).settings.copyright.company),9,ce)):(o(),r("span",pe,d(t(a).settings.copyright.company),1))],64)):c("",!0),t(a).settings.copyright.beian?(o(),r("a",de,d(t(a).settings.copyright.beian),1)):c("",!0)])):c("",!0)]),_:1},16)],2),z(s("footer",{class:h(["tabbar w-full bg-[var(--g-tabbar-bg)] transition-all pb-safe h+safe-b-[calc(var(--g-tabbar-height))]",{"shadow-bottom":t(R)}])},[s("div",he,[v(e.$slots,"tabbar",{},()=>[(o(!0),r(D,null,ee(t(G),n=>(o(),E(f,{key:JSON.stringify(n),class:h(["flex flex-1 flex-col items-center gap-[2px] text-[var(--g-tabbar-color)] no-underline transition-all",{"text-[var(--g-tabbar-active-color)]!":t(T).fullPath===n.path}]),to:n.path,replace:""},{default:w(()=>[H(n)?(o(),E(i,{key:0,name:H(n)??"",class:h(n.text?"text-6":"text-8")},null,8,["name","class"])):c("",!0),n.text?(o(),r("div",be,d(n.text),1)):c("",!0)]),_:2},1032,["class","to"]))),128))],!0)])],2),[[I,e.tabbar??t(a).settings.tabbar.enable]]),g(P,M(N({enterActiveClass:"ease-out duration-300",enterFromClass:"opacity-0 translate-y-4",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"ease-in duration-200",leaveFromClass:"opacity-100 scale-100",leaveToClass:"opacity-0 scale-50"})),{default:w(()=>[(e.backTop??t(a).settings.app.enableBackTop)&&t($)>=200?(o(),r("div",{key:0,class:h(["backtop h-12 w-12 flex cursor-pointer items-center justify-center rounded-full bg-white shadow-lg ring-1 ring-stone-3 ring-inset active:bg-stone-1 dark-bg-dark dark-ring-stone-7 dark-active:bg-stone-9",{"bottom+safe-[calc(var(--g-tabbar-height)+16px)]!":e.tabbar??t(a).settings.tabbar.enable}]),onClick:J},[g(i,{name:"i-icon-park-outline:to-top-one",class:"text-6"})],2)):c("",!0)]),_:1},16)],544)}}}),ge=ae(fe,[["__scopeId","data-v-ad7e4bcc"]]);export{ge as _};
