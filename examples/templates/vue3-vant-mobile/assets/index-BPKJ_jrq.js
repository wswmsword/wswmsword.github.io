import{_ as De}from"./Container.vue_vue_type_script_setup_true_lang-CLNoPslE.js";import{c as E,i as F,e as p,a as ie,d as I,n as V,m as A,b as Y,r as y,f as T,u as Ce,w as $e,g as we,h as c,p as Oe,H as ue,j as z,t as q,k as Te,l as Be,o as Me,q as G,s as Z,v as se,x as Se,y as re,B as He,z as j,A as Ne,C as Le,D as M,I as de,E as Re,F as Ae,G as ye,J as Ue,K as Fe,L as ee,M as ze,N as te,O as me,P as ve,Q as U,R as ne,S as $,T as le,U as Ge,V as Ke,W as Ye}from"./index-BPvPw3R2.js";import{u as qe,a as xe,L as _e,b as je,P as Je}from"./index-BmSLGToT.js";const[Qe,S,fe]=E("picker"),Pe=e=>e.find(t=>!t.disabled)||e[0];function We(e,t){const l=e[0];if(l){if(Array.isArray(l))return"multiple";if(t.children in l)return"cascade"}return"default"}function K(e,t){t=ie(t,0,e.length);for(let l=t;l<e.length;l++)if(!e[l].disabled)return l;for(let l=t-1;l>=0;l--)if(!e[l].disabled)return l;return 0}const ge=(e,t,l)=>t!==void 0&&!!e.find(s=>s[l.value]===t);function ce(e,t,l){const s=e.findIndex(m=>m[l.value]===t),o=K(e,s);return e[o]}function Xe(e,t,l){const s=[];let o={[t.children]:e},m=0;for(;o&&o[t.children];){const v=o[t.children],h=l.value[m];if(o=F(h)?ce(v,h,t):void 0,!o&&v.length){const i=Pe(v)[t.value];o=ce(v,i,t)}m++,s.push(v)}return s}function Ze(e){const{transform:t}=window.getComputedStyle(e),l=t.slice(7,t.length-1).split(", ")[5];return Number(l)}function et(e){return p({text:"text",value:"value",children:"children"},e)}const he=200,be=300,tt=15,[Ve,ae]=E("picker-column"),pe=Symbol(Ve);var nt=I({name:Ve,props:{value:V,fields:A(Object),options:Y(),readonly:Boolean,allowHtml:Boolean,optionHeight:A(Number),swipeDuration:A(V),visibleOptionNum:A(V)},emits:["change","clickOption","scrollInto"],setup(e,{emit:t,slots:l}){let s,o,m,v,h;const i=y(),g=y(),d=y(0),r=y(0),k=qe(),C=()=>e.options.length,x=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,O=f=>{let n=K(e.options,f);const a=-n*e.optionHeight,u=()=>{n>C()-1&&(n=K(e.options,f));const P=e.options[n][e.fields.value];P!==e.value&&t("change",P)};s&&a!==d.value?h=u:u(),d.value=a},w=()=>e.readonly||!e.options.length,_=f=>{s||w()||(h=null,r.value=he,O(f),t("clickOption",e.options[f]))},b=f=>ie(Math.round(-f/e.optionHeight),0,C()-1),R=T(()=>b(d.value)),Q=(f,n)=>{const a=Math.abs(f/n);f=d.value+a/.003*(f<0?-1:1);const u=b(f);r.value=+e.swipeDuration,O(u)},H=()=>{s=!1,r.value=0,h&&(h(),h=null)},W=f=>{if(!w()){if(k.start(f),s){const n=Ze(g.value);d.value=Math.min(0,n-x())}r.value=0,o=d.value,m=Date.now(),v=o,h=null}},X=f=>{if(w())return;k.move(f),k.isVertical()&&(s=!0,Oe(f,!0));const n=ie(o+k.deltaY.value,-(C()*e.optionHeight),e.optionHeight),a=b(n);a!==R.value&&t("scrollInto",e.options[a]),d.value=n;const u=Date.now();u-m>be&&(m=u,v=n)},N=()=>{if(w())return;const f=d.value-v,n=Date.now()-m;if(n<be&&Math.abs(f)>tt){Q(f,n);return}const u=b(d.value);r.value=he,O(u),setTimeout(()=>{s=!1},0)},D=()=>{const f={height:"".concat(e.optionHeight,"px")};return e.options.map((n,a)=>{const u=n[e.fields.text],{disabled:P}=n,L=n[e.fields.value],Ee={role:"button",style:f,tabindex:P?-1:0,class:[ae("item",{disabled:P,selected:L===e.value}),n.className],onClick:()=>_(a)},Ie={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:u};return c("li",Ee,[l.option?l.option(n,a):c("div",Ie,null)])})};return Ce(pe),xe({stopMomentum:H}),$e(()=>{const f=s?Math.floor(-d.value/e.optionHeight):e.options.findIndex(u=>u[e.fields.value]===e.value),n=K(e.options,f),a=-n*e.optionHeight;s&&n<f&&H(),d.value=a}),we("touchmove",X,{target:i}),()=>c("div",{ref:i,class:ae(),onTouchstartPassive:W,onTouchend:N,onTouchcancel:N},[c("ul",{ref:g,style:{transform:"translate3d(0, ".concat(d.value+x(),"px, 0)"),transitionDuration:"".concat(r.value,"ms"),transitionProperty:r.value?"all":"none"},class:ae("wrapper"),onTransitionend:H},[D()])])}});const[lt]=E("picker-toolbar"),J={title:String,cancelButtonText:String,confirmButtonText:String},at=["cancel","confirm","title","toolbar"],ot=Object.keys(J);var it=I({name:lt,props:J,emits:["confirm","cancel"],setup(e,{emit:t,slots:l}){const s=()=>{if(l.title)return l.title();if(e.title)return c("div",{class:[S("title"),"van-ellipsis"]},[e.title])},o=()=>t("cancel"),m=()=>t("confirm"),v=()=>{var i;const g=(i=e.cancelButtonText)!=null?i:fe("cancel");if(!(!l.cancel&&!g))return c("button",{type:"button",class:[S("cancel"),ue],onClick:o},[l.cancel?l.cancel():g])},h=()=>{var i;const g=(i=e.confirmButtonText)!=null?i:fe("confirm");if(!(!l.confirm&&!g))return c("button",{type:"button",class:[S("confirm"),ue],onClick:m},[l.confirm?l.confirm():g])};return()=>c("div",{class:S("toolbar")},[l.toolbar?l.toolbar():[v(),s(),h()]])}});const[ct,pt]=E("picker-group"),ut=Symbol(ct);p({tabs:Y(),activeTab:z(0),nextStepText:String,showToolbar:q},J);const st=p({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:z(44),showToolbar:q,swipeDuration:z(1e3),visibleOptionNum:z(6)},J),rt=p({},st,{columns:Y(),modelValue:Y(),toolbarPosition:Te("top"),columnsFieldNames:Object});var dt=I({name:Qe,props:rt,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:t,slots:l}){const s=y(),o=y(e.modelValue.slice(0)),{parent:m}=Ce(ut),{children:v,linkChildren:h}=Be(pe);h();const i=T(()=>et(e.columnsFieldNames)),g=T(()=>Me(e.optionHeight)),d=T(()=>We(e.columns,i.value)),r=T(()=>{const{columns:n}=e;switch(d.value){case"multiple":return n;case"cascade":return Xe(n,i.value,o);default:return[n]}}),k=T(()=>r.value.some(n=>n.length)),C=T(()=>r.value.map((n,a)=>ce(n,o.value[a],i.value))),x=T(()=>r.value.map((n,a)=>n.findIndex(u=>u[i.value.value]===o.value[a]))),O=(n,a)=>{if(o.value[n]!==a){const u=o.value.slice(0);u[n]=a,o.value=u}},w=()=>({selectedValues:o.value.slice(0),selectedOptions:C.value,selectedIndexes:x.value}),_=(n,a)=>{O(a,n),d.value==="cascade"&&o.value.forEach((u,P)=>{const L=r.value[P];ge(L,u,i.value)||O(P,L.length?L[0][i.value.value]:void 0)}),re(()=>{t("change",p({columnIndex:a},w()))})},b=(n,a)=>{const u={columnIndex:a,currentOption:n};t("clickOption",p(w(),u)),t("scrollInto",u)},R=()=>{v.forEach(a=>a.stopMomentum());const n=w();return re(()=>{t("confirm",n)}),n},Q=()=>t("cancel",w()),H=()=>r.value.map((n,a)=>c(nt,{value:o.value[a],fields:i.value,options:n,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:g.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:u=>_(u,a),onClickOption:u=>b(u,a),onScrollInto:u=>{t("scrollInto",{currentOption:u,columnIndex:a})}},{option:l.option})),W=n=>{if(k.value){const a={height:"".concat(g.value,"px")},u={backgroundSize:"100% ".concat((n-g.value)/2,"px")};return[c("div",{class:S("mask"),style:u},null),c("div",{class:[He,S("frame")],style:a},null)]}},X=()=>{const n=g.value*+e.visibleOptionNum,a={height:"".concat(n,"px")};return c("div",{ref:s,class:S("columns"),style:a},[H(),W(n)])},N=()=>{if(e.showToolbar&&!m)return c(it,Se(se(e,ot),{onConfirm:R,onCancel:Q}),se(l,at))};G(r,n=>{n.forEach((a,u)=>{a.length&&!ge(a,o.value[u],i.value)&&O(u,Pe(a)[i.value.value])})},{immediate:!0});let D;return G(()=>e.modelValue,n=>{!Z(n,o.value)&&!Z(n,D)&&(o.value=n.slice(0),D=n.slice(0))},{deep:!0}),G(o,n=>{Z(n,e.modelValue)||(D=n.slice(0),t("update:modelValue",D))},{immediate:!0}),we("touchmove",Oe,{target:s}),xe({confirm:R,getSelectedOptions:()=>C.value}),()=>{var n,a;return c("div",{class:S()},[e.toolbarPosition==="top"?N():null,e.loading?c(_e,{class:S("loading")},null):null,(n=l["columns-top"])==null?void 0:n.call(l),X(),(a=l["columns-bottom"])==null?void 0:a.call(l),e.toolbarPosition==="bottom"?N():null])}}});const mt=j(dt),[vt,B]=E("cell"),ft={tag:Te("div"),icon:String,size:String,title:V,value:V,label:V,center:Boolean,isLink:Boolean,border:q,iconPrefix:String,valueClass:M,labelClass:M,titleClass:M,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},gt=p({},ft,Ne);var ht=I({name:vt,props:gt,setup(e,{slots:t}){const l=Le(),s=()=>{if(t.label||F(e.label))return c("div",{class:[B("label"),e.labelClass]},[t.label?t.label():e.label])},o=()=>{var i;if(t.title||F(e.title)){const g=(i=t.title)==null?void 0:i.call(t);return Array.isArray(g)&&g.length===0?void 0:c("div",{class:[B("title"),e.titleClass],style:e.titleStyle},[g||c("span",null,[e.title]),s()])}},m=()=>{const i=t.value||t.default;if(i||F(e.value))return c("div",{class:[B("value"),e.valueClass]},[i?i():c("span",null,[e.value])])},v=()=>{if(t.icon)return t.icon();if(e.icon)return c(de,{name:e.icon,class:B("left-icon"),classPrefix:e.iconPrefix},null)},h=()=>{if(t["right-icon"])return t["right-icon"]();if(e.isLink){const i=e.arrowDirection&&e.arrowDirection!=="right"?"arrow-".concat(e.arrowDirection):"arrow";return c(de,{name:i,class:B("right-icon")},null)}};return()=>{var i;const{tag:g,size:d,center:r,border:k,isLink:C,required:x}=e,O=(i=e.clickable)!=null?i:C,w={center:r,required:!!x,clickable:O,borderless:!k};return d&&(w[d]=!!d),c(g,{class:B(w),role:O?"button":void 0,tabindex:O?0:void 0,onClick:l},{default:()=>{var _;return[v(),o(),m(),h(),(_=t.extra)==null?void 0:_.call(t)]}})}}});const bt=j(ht),[kt,oe]=E("switch"),Ct={size:V,loading:Boolean,disabled:Boolean,modelValue:M,activeColor:String,inactiveColor:String,activeValue:{type:M,default:!0},inactiveValue:{type:M,default:!1}};var wt=I({name:kt,props:Ct,emits:["change","update:modelValue"],setup(e,{emit:t,slots:l}){const s=()=>e.modelValue===e.activeValue,o=()=>{if(!e.disabled&&!e.loading){const v=s()?e.inactiveValue:e.activeValue;t("update:modelValue",v),t("change",v)}},m=()=>{if(e.loading){const v=s()?e.activeColor:e.inactiveColor;return c(_e,{class:oe("loading"),color:v},null)}if(l.node)return l.node()};return Re(()=>e.modelValue),()=>{var v;const{size:h,loading:i,disabled:g,activeColor:d,inactiveColor:r}=e,k=s(),C={fontSize:Ae(h),backgroundColor:k?d:r};return c("div",{role:"switch",class:oe({on:k,loading:i,disabled:g}),style:C,tabindex:g?void 0:0,"aria-checked":k,onClick:o},[c("div",{class:oe("node")},[m()]),(v=l.background)==null?void 0:v.call(l)])}}});const Ot=j(wt),[Tt,ke]=E("cell-group"),St={title:String,inset:Boolean,border:q};var yt=I({name:Tt,inheritAttrs:!1,props:St,setup(e,{slots:t,attrs:l}){const s=()=>{var m;return c("div",Se({class:[ke({inset:e.inset}),{[Ue]:e.border&&!e.inset}]},l,je()),[(m=t.default)==null?void 0:m.call(t)])},o=()=>c("div",{class:ke("title",{inset:e.inset})},[t.title?t.title():e.title]);return()=>e.title||t.title?c(ye,null,[o(),s()]):s()}});const xt=j(yt),Et=I({__name:"index",setup(e){const t=Fe(),l=y(ee.value);G(()=>ee.value,d=>{l.value=d},{immediate:!0});function s(){Ye(),t.swithMode(ee.value?"dark":"light")}const{t:o}=ze(),m=y(!1),v=y([te.value]),h=T(()=>me.find(d=>d.value===te.value).text);function i(d){te.value=d.selectedOptions[0].value,m.value=!1}const g=T(()=>[{title:o("home.mockGuide"),route:"mock"},{title:o("home.echartsDemo"),route:"charts"},{title:o("home.unocssExample"),route:"unocss"},{title:o("home.persistPiniaState"),route:"counter"},{title:o("home.404Demo"),route:"unknown"},{title:o("home.keepAlive"),route:"keepalive"}]);return(d,r)=>{const k=Ot,C=bt,x=mt,O=Je,w=xt,_=De;return ne(),ve(_,{"padding-x":0},{default:U(()=>[c(w,{inset:""},{default:U(()=>[c(C,{center:"",title:d.$t("home.darkMode")},{"right-icon":U(()=>[c(k,{modelValue:$(l),"onUpdate:modelValue":r[0]||(r[0]=b=>le(l)?l.value=b:null),size:"20px","aria-label":"on/off Dark Mode",onClick:r[1]||(r[1]=b=>s())},null,8,["modelValue"])]),_:1},8,["title"]),c(C,{"is-link":"",title:d.$t("home.language"),value:$(h),onClick:r[2]||(r[2]=b=>m.value=!0)},null,8,["title","value"]),c(O,{show:$(m),"onUpdate:show":r[5]||(r[5]=b=>le(m)?m.value=b:null),position:"bottom"},{default:U(()=>[c(x,{modelValue:$(v),"onUpdate:modelValue":r[3]||(r[3]=b=>le(v)?v.value=b:null),columns:$(me),onConfirm:i,onCancel:r[4]||(r[4]=b=>m.value=!1)},null,8,["modelValue","columns"])]),_:1},8,["show"]),(ne(!0),Ge(ye,null,Ke($(g),b=>(ne(),ve(C,{key:b.route,title:b.title,to:b.route,"is-link":""},null,8,["title","to"]))),128))]),_:1})]),_:1})}}});export{Et as default};
