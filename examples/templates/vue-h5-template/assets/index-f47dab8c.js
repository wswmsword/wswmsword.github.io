/* empty css              */import{_ as e}from"./index-ecb6c871.js";import{d as r,e as t,j as s,V as l,w as a,o,c as n,l as i,m as u,g as p,u as m,H as d,J as c,q as f,n as v,a as b,E as y,t as h,p as g,b as _,r as w,O as P,P as j,k as O,Y as x,Z as A,_ as q}from"./index-a338e04e.js";import{_ as k,a as E,u as S}from"./user-94f603d1.js";import{u as $,a as V}from"./useParent-D6DiuxZZ-4107e073.js";import{g as D,i as F}from"./util-DnfK0Qan-47c5a235.js";import{w as C}from"./with-install-Ch3FF0uS-85a7cda4.js";import{p as B}from"./pxCheck-DN6FYV6q-6a812b0c.js";import"./index-aiGQ-EiA-237aefe1.js";import"./index-76f83ccc.js";import"./index-62e1ca2f.js";const I=Symbol("nut-form"),M=Symbol("nut-form-disabled"),L=Symbol("nut-form-tip");var N=Object.defineProperty,Z=Object.defineProperties,Q=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable,G=(e,r,t)=>r in e?N(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,H=(e,r)=>{var t={};for(var s in e)W.call(e,s)&&r.indexOf(s)<0&&(t[s]=e[s]);if(null!=e&&U)for(var s of U(e))r.indexOf(s)<0&&Y.call(e,s)&&(t[s]=e[s]);return t};const J=r((K=((e,r)=>{for(var t in r||(r={}))W.call(r,t)&&G(e,t,r[t]);if(U)for(var t of U(r))Y.call(r,t)&&G(e,t,r[t]);return e})({},{name:"NutForm"}),z={__name:"form",props:{modelValue:{default:()=>({})},rules:{default:()=>({})},disabled:{type:Boolean,default:!1},labelPosition:{default:"left"},starPosition:{default:"left"}},emits:["validate"],setup(e,{expose:r,emit:c}){const f=e,v=c,{children:b,linkChildren:y}=$(I);y({props:f});const{linkChildren:h}=$(M);h({props:f});const g=t((()=>s({})));l(L,g);const _=()=>{Object.keys(g.value).forEach((e=>{g.value[e]=""}))};a((()=>f.modelValue),(()=>{_()}),{immediate:!0});const w=e=>{e.message&&v("validate",e),g.value[e.prop]=e.message},P=e=>{return r=this,t=null,s=function*(){const{rules:r=[],prop:t}=e,s=e=>new Promise(((r,t)=>{try{w(e),r(e)}catch(s){t(s)}})),l=D(f.modelValue,t||"");w({prop:t,message:""});const a=f.rules||{},o=[...(null==a?void 0:a[t])||[],...r];for(;o.length;){const e=o.shift(),{validator:r}=e,a=H(e,["validator"]),{required:i,regex:u,message:p}=a,m={prop:t,message:p||""};if(i&&!l&&0!==l)return s(m);if(u&&!u.test(String(l)))return s(m);if(r){const e=r(l,a);if(F(e))try{if(!1===(yield e))return s(m)}catch(n){return s({prop:t,message:n})}else if(!e)return s(m)}}return Promise.resolve(!0)},new Promise(((e,l)=>{var a=e=>{try{n(s.next(e))}catch(r){l(r)}},o=e=>{try{n(s.throw(e))}catch(r){l(r)}},n=r=>r.done?e(r.value):Promise.resolve(r.value).then(a,o);n((s=s.apply(r,t)).next())}));var r,t,s},j=(e="")=>new Promise(((r,t)=>{try{const t=(()=>{const e=[];return b.forEach((r=>{e.push({prop:null==r?void 0:r.prop,rules:(null==r?void 0:r.rules)||[]})})),e})().map((r=>e&&e!==r.prop?Promise.resolve(!0):P(r)));Promise.all(t).then((e=>{const t={valid:!0,errors:[]};(e=e.filter((e=>!0!==e))).length&&(t.valid=!1,t.errors=e),r(t)}))}catch(s){t(s)}}));return r({submit:()=>(j(),!1),reset:()=>{_()},validate:j}),(e,r)=>(o(),n("form",{class:"nut-form",action:"#",onSubmit:d((()=>!1),["prevent"])},[i(m(k),null,{default:u((()=>[p(e.$slots,"default")])),_:3})],32))}},Z(K,Q(z))));var K,z;C(J);var R=Object.defineProperty,T=Object.defineProperties,X=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,se=(e,r,t)=>r in e?R(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;const le={class:"nut-cell__value nut-form-item__body"},ae=r(((e,r)=>T(e,X(r)))(((e,r)=>{for(var t in r||(r={}))re.call(r,t)&&se(e,t,r[t]);if(ee)for(var t of ee(r))te.call(r,t)&&se(e,t,r[t]);return e})({},{name:"NutFormItem",inheritAttrs:!1}),{__name:"form-item",props:{prop:{default:""},label:{default:""},rules:{default:()=>[]},required:{type:Boolean,default:!1},showErrorMessage:{type:Boolean,default:!0},showErrorLine:{type:Boolean,default:!0},labelWidth:{},labelAlign:{},errorMessageAlign:{},bodyAlign:{},labelPosition:{},starPosition:{}},setup(e){const r=e,{parent:s}=V(I),l=t((()=>{var e;const t=null==(e=s.props)?void 0:e.rules;let l=!1;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&s===r.prop&&Array.isArray(t[s])&&(l=t[s].some((e=>e.required)));return r.required||r.rules.some((e=>e.required))||l})),a=t((()=>{const e=s.props.labelPosition,t=r.labelPosition?r.labelPosition:e;return"left"!==t?`nut-form-item__${t}`:""})),i=t((()=>{const e=s.props.starPosition,t=r.starPosition?r.starPosition:e;return"left"!==t?`nut-form-item__star-${t}`:""})),d=c(L),w=t((()=>({width:B(r.labelWidth),textAlign:r.labelAlign}))),P=t((()=>({textAlign:r.bodyAlign}))),j=t((()=>({textAlign:r.errorMessageAlign})));return(e,r)=>(o(),f(m(E),{class:v(["nut-form-item",[{error:m(d)[e.prop],line:e.showErrorLine},e.$attrs.class,a.value]]),style:b(e.$attrs.style)},{default:u((()=>[e.label||e.$slots.label?(o(),n("view",{key:0,class:v(["nut-cell__title nut-form-item__label",{required:l.value,[i.value]:i.value}]),style:b(w.value)},[p(e.$slots,"label",{},(()=>[y(h(e.label),1)]))],6)):g("",!0),_("view",le,[_("view",{class:"nut-form-item__body__slots",style:b(P.value)},[p(e.$slots,"default")],4),m(d)[e.prop]&&e.showErrorMessage?(o(),n("view",{key:0,class:"nut-form-item__body__tips",style:b(j.value)},h(m(d)[e.prop]),5)):g("",!0)])])),_:3},8,["class","style"]))}}));C(ae);const oe={class:"login"},ne=(e=>(P("data-v-ef6878c8"),e=e(),j(),e))((()=>_("h2",null,"登录",-1))),ie=r({name:"LoginPage"}),ue=q(r({...ie,setup(r){const t=S(),l=s({name:"",pwd:""}),a=w(null),p=()=>{a.value.validate().then((async({valid:e,errors:r})=>{if(e){await t.login()&&A.push({path:"/home"})}}))};return(r,t)=>{const s=ae,m=e,d=J;return o(),n("div",oe,[ne,i(d,{ref_key:"ruleForm",ref:a,"model-value":l},{default:u((()=>[i(s,{required:"",prop:"name",rules:[{required:!0,message:"请输入用户名"}]},{default:u((()=>[O(_("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.name=e),class:"nut-input-text",placeholder:"请输入用户名",type:"text"},null,512),[[x,l.name]])])),_:1}),i(s,{required:"",prop:"pwd",rules:[{required:!0,message:"请填写联系电话"}]},{default:u((()=>[O(_("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.pwd=e),class:"nut-input-text",placeholder:"请输入密码",type:"password"},null,512),[[x,l.pwd]])])),_:1}),i(m,{block:"",type:"info",onClick:p},{default:u((()=>[y(" 登录 ")])),_:1})])),_:1},8,["model-value"])])}}}),[["__scopeId","data-v-ef6878c8"]]);export{ue as default};
