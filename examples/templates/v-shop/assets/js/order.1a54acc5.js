import{d as p,I as n,K as c}from"./vendor.1aafb642.js";import{e as l,f as g}from"./index.ce6ac14e.js";import{A as m}from"./index.a51135f2.js";const G=p({id:"order",state:()=>({tradeGoods:l.get("tradeGoods",{})}),getters:{getTradeGoods:e=>e.tradeGoods},actions:{async setTradeGoods(e={}){const{origin:t="buy",list:d=[],goOrder:u=!0}=e;let s=[];t==="cart"?d.forEach(o=>{var i;s.push({goodsId:o.goodsId,name:o.name,number:o.number,pic:o.pic,price:o.price,logisticsId:o.logisticsId,propertyList:(i=o.sku)!=null&&i.length?o.sku.map(r=>({id:r.optionId,name:r.optionName,childId:r.optionValueId,childName:r.optionValueName,propIds:`${r.optionId}:${r.optionValueId}`})):[]})}):s=d;const a={origin:t,list:s};this.tradeGoods=a,l.set("tradeGoods",a),u&&g.push("/order/submit")},async deleteOrder(e={}){const{orderId:t}=e;await n({title:"确定删除订单？",message:"删除订单后无法恢复，无法处理您的售后问题，请慎重考虑。",cancelButtonText:"在考虑下",confirmButtonText:"删除"}),c({forbidClick:!0,message:"加载中...",duration:0}),await m.orderDelete({orderId:t})},async closeOrder(e={}){const{orderId:t}=e;await n({title:"确定取消订单？",message:"订单还未付款,确定要取消吗？",cancelButtonText:"在考虑下",confirmButtonText:"取消订单"}),c({forbidClick:!0,message:"加载中...",duration:0}),await m.orderClose({orderId:t})}}});export{G as u};
