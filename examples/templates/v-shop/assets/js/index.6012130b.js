import{e as _,z as s,a0 as h,a1 as y,a2 as T,g as n,_ as v,a3 as g,h as b,i as d,a4 as m,a5 as B}from"./vendor.1aafb642.js";const M=_({name:"AppInfiniteScroller",props:{loading:Boolean,noMore:Boolean,offset:{type:Number,default:300}},emits:["loadMore","update:loading"],setup(e,{emit:r,slots:o}){const a=s(!1),u=s(),p=s(),c=h(u);return y("scroll",()=>{v(()=>{if(a.value||e.noMore)return;const t=g(c);if(!t.height)return;let i=!1;i=g(p).bottom-t.bottom<=e.offset,i&&(a.value=!0,r("update:loading",!0),r("loadMore"))})},{target:c,passive:!0}),T(()=>{a.value=e.loading}),()=>{var l;const t=(l=o.default)==null?void 0:l.call(o),i=n("div",{ref:p,class:"app-infinite__placeholder"},null);return n("div",{ref:u,class:"app-infinite"},[t,i])}}});const E={loadingText:"加载中...",errorText:"请求失败，点击重新加载",emptyText:"暂无数据",emptyImage:"default",loadingMoreText:"加载中...",noMoreText:"没有更多了"},C=_({name:"AppList",components:{AppInfiniteScroller:M},props:{loading:Boolean,hasData:Boolean,error:Boolean,mode:{type:String,default:"basic"},loadingMore:Boolean,noMore:Boolean,meta:{type:Object,default:()=>({})}},emits:["update:loading","clickError","loadMore","update:loadingMore"],setup(e,{emit:r,slots:o}){const a=b(()=>({...E,...e.meta}));function u(){return o.loading?o.loading():n(m,{class:"app-list__loading",type:"spinner"},{default:()=>[d(a).loadingText]})}function p(){return o.empty?o.empty():n(B,{class:"app-list__empty",image:d(a).emptyImage,description:d(a).emptyText},null)}function c(){return o.error?o.error():n("div",{class:"app-list__error",onClick:()=>{r("clickError")}},[d(a).errorText])}function f(){return o.bottom?o.bottom():n("div",{class:"app-list__bottom"},[e.loadingMore&&n(m,{size:"24px",color:"#999"},{default:()=>[d(a).loadingMoreText]}),e.noMore&&d(a).noMoreText,e.error&&c()])}return()=>{var l;if(!e.hasData&&e.error)return c();const t=(l=o.default)==null?void 0:l.call(o),i=e.mode==="infinite"?n(M,{class:"app-list",loading:e.loadingMore,noMore:e.noMore,"onUpdate:loading":x=>{r("update:loadingMore",x)},onLoadMore:()=>{r("loadMore")}},{default:()=>[t,f()]}):n("div",{class:"app-list"},[t]);return e.loading?u():e.hasData?i:p()}}});export{C as _};
