import{_ as D,a as E}from"./index.b5fcae3f.js";import{e as L,u as $,y as G,z as d,h,i as o,r as y,o as _,a as v,b as e,D as V,g as i,C as b,w as H,E as C,F as M,l as w,G as A,H as J}from"./vendor.1aafb642.js";import{u as K,l as O,g as T,_ as Q}from"./index.ce6ac14e.js";import{i as W}from"./validate.1a81b3ef.js";import"./is.697638d0.js";const c=r=>(A("data-v-68d1aaba"),r=r(),J(),r),X={class:"container"},Y={class:"main"},Z={class:"h2"},ee=c(()=>e("div",{class:"safe-tips"},"为了你的帐号安全，请用手机号登录",-1)),se={class:"form"},oe={class:"form-item"},te=c(()=>e("div",{class:"form-item-country"},"中国 +86",-1)),ae=c(()=>e("input",{type:"text",hidden:"",autocomplete:"username"},null,-1)),ne={key:0,class:"form-item"},le={key:1,class:"form-item"},ce={class:"check-type"},de={class:"check-type-hd"},ie={class:"check-type-bd"},re=c(()=>e("span",{class:"check-type-separate"},"|",-1)),ue={class:"footer"},me={class:"footer-agreement"},pe=c(()=>e("span",null," 阅读并同意",-1)),_e=c(()=>e("a",{href:"javascript:void(0);"},"《用户协议》",-1)),ve=c(()=>e("a",{href:"javascript:void(0);"},"《隐私政策》",-1)),fe=L({__name:"index",setup(r){const I=K(),g=$(),f=G(),t=d("system"),S=h(()=>O[o(t)]||{}),N=h(()=>o(t)==="sms"?"密码登录":"验证码登录");function P(){t.value=t.value==="sms"?"system":"sms"}const n=d(""),u=d(""),m=d(""),k=d(!0);function x(l){f.push({path:l})}const p=d(!1),U=h(()=>o(t)==="sms"?o(n)&&o(m):o(n)&&o(u));function F(){if(!W(o(n))){w("手机号格式错误");return}const l={mobile:o(n),deviceId:T().deviceId,deviceName:T().deviceType};o(t)==="system"&&(l.pwd=o(u)),o(t)==="sms"&&(l.autoReg=!0,l.code=o(m)),p.value=!0,I.login({provider:o(t),params:l}).then(()=>{p.value=!1,g.query.redirect?f.replace({path:g.query.redirect}):f.replace({path:"/"}),w({type:"success",message:"登录成功"})}).catch(s=>{console.error(s),p.value=!1})}return(l,s)=>{const B=y("van-field"),R=D,j=E,q=y("van-button"),z=y("van-checkbox");return _(),v("div",X,[e("div",Y,[e("div",Z,V(S.value.h2),1),ee,e("form",se,[e("div",oe,[te,i(B,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a),class:"form-field",border:!1,type:"tel",placeholder:"请输入手机号",autocomplete:"username",clearable:""},null,8,["modelValue"]),ae]),t.value==="system"?(_(),v("div",ne,[i(R,{modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=a=>u.value=a),class:"form-field",border:!1,placeholder:"请输入密码",autocomplete:"current-password",clearable:""},null,8,["modelValue"])])):b("",!0),t.value==="sms"?(_(),v("div",le,[i(j,{modelValue:m.value,"onUpdate:modelValue":s[2]||(s[2]=a=>m.value=a),mobile:n.value,class:"form-field",border:!1,type:"number",maxlength:"4",placeholder:"请输入4位验证码",clearable:""},null,8,["modelValue","mobile"])])):b("",!0),i(q,{class:"form-submit",block:"",disabled:!U.value,loading:p.value,"loading-text":"登录中...",type:"primary",onClick:F},{default:H(()=>[C("登录")]),_:1},8,["disabled","loading"])]),e("div",ce,[e("div",de,[e("span",{class:"check-type-btn",onClick:P},V(N.value),1)]),e("div",ie,[t.value==="system"?(_(),v(M,{key:0},[e("span",{class:"check-type-btn",onClick:s[3]||(s[3]=a=>x("/resetPwd"))},"忘记密码"),re],64)):b("",!0),e("span",{class:"check-type-btn",onClick:s[4]||(s[4]=a=>x("register"))},"免费注册")])])]),e("div",ue,[e("div",me,[i(z,{modelValue:k.value,"onUpdate:modelValue":s[5]||(s[5]=a=>k.value=a),"icon-size":"16px"},null,8,["modelValue"]),pe,_e,C("和"),ve])])])}}});const xe=Q(fe,[["__scopeId","data-v-68d1aaba"]]);export{xe as default};
