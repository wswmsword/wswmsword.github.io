import{_ as C}from"./index.332e104b.js";import{A as S,_ as b}from"./index.ce6ac14e.js";import{A as _}from"./index.ae5c213b.js";import{c as k}from"./format.df5cff0c.js";import{s as A}from"./deductionRule.6c178820.js";import{e as I,j as V,z as n,i as t,r as B,o as u,a as p,b as c,D as m,g as f,C as D,l as h,K as E,k as N,G as R,H as w}from"./vendor.1aafb642.js";import"./is.697638d0.js";const P=a=>(R("data-v-5fe676fa"),a=a(),w(),a),T={class:"container"},z={class:"header"},M={class:"header-count"},U={class:"header-count-value"},j=P(()=>c("span",{class:"header-count-label"},"可用积分",-1)),G={key:0,class:"tips"},H=I({__name:"exchange",setup(a){V(()=>{i()});const r=n(2),s=n(""),l=n({}),d=n({});function i(){S.userAmount().then(e=>{l.value=e.data||{}}),_.scoreDeductionRules({type:t(r)}).then(e=>{var o;(o=e.data)!=null&&o.length&&(d.value=A(e.data[0]))})}function v(){if(t(r)===2&&!t(s)){h("请输入积分");return}const e={type:t(r),deductionScore:t(s)};E({forbidClick:!0,message:"加载中...",duration:0}),_.scoreExchangeCash(e).then(()=>{N(),h("兑换成功"),i()}).catch(o=>{console.error(o)})}return(e,o)=>{const g=B("van-field"),x=C;return u(),p("div",T,[c("div",z,[c("div",M,[c("span",U,m(t(k)(l.value.score,0)),1),j])]),f(g,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=y=>s.value=y),type:"digit",label:"兑换现金",placeholder:"你希望用多少积分来兑换余额"},null,8,["modelValue"]),d.value.desc?(u(),p("div",G,"规则："+m(d.value.desc),1)):D("",!0),f(x,{size:"medium",text:"立即兑换",onClickBtn:v})])}}});const W=b(H,[["__scopeId","data-v-5fe676fa"]]);export{W as default};
