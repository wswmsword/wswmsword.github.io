import{a as x,_ as k}from"./index.b5fcae3f.js";import{e as C,y as S,z as n,h as I,i as e,r as f,o as U,a as P,b as s,D as B,g as d,w as E,E as N,l as u,G as R,H as A}from"./vendor.1aafb642.js";import{i as D,a as F,b as M}from"./validate.1a81b3ef.js";import{A as T,_ as z}from"./index.ce6ac14e.js";import"./is.697638d0.js";const G=r=>(R("data-v-bd3f8848"),r=r(),A(),r),H={class:"container"},L={class:"main"},W={class:"h2"},j={class:"form"},q={class:"form-item"},J=G(()=>s("div",{class:"form-item-country"},"中国 +86",-1)),K={class:"form-item"},O={class:"form-item"},Q={class:"form-item"},X=C({__name:"index",setup(r){const v=S(),b=n("重置密码"),l=n(""),i=n(""),t=n(""),c=n(""),m=n(!1),h=I(()=>e(l)&&e(i)&&e(t)&&e(c));function w(){if(!D(e(l))){u("手机号格式错误");return}if(!F(e(t))){u("请设置8-25位(数字+字母)密码");return}if(!M(e(t),e(c))){u("2次输入密码不一致");return}const p={mobile:e(l),code:e(i),pwd:e(t)};m.value=!0,T.userMResetPwd(p).then(()=>{m.value=!1,v.back(),u({type:"success",message:"重置成功"})}).catch(o=>{console.error(o),m.value=!1})}return(p,o)=>{const V=f("van-field"),y=x,_=k,g=f("van-button");return U(),P("div",H,[s("div",L,[s("div",W,B(b.value),1),s("form",j,[s("div",q,[J,d(V,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=a=>l.value=a),class:"form-field",border:!1,type:"tel",placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),s("div",K,[d(y,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=a=>i.value=a),mobile:l.value,class:"form-field",border:!1,type:"number",maxlength:"4",placeholder:"请输入4位验证码",clearable:""},null,8,["modelValue","mobile"])]),s("div",O,[d(_,{key:"pwd",modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=a=>t.value=a),class:"form-field",border:!1,placeholder:"请设置8-25位(数字+字母)新密码",autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),s("div",Q,[d(_,{key:"pwd2",modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=a=>c.value=a),class:"form-field",border:!1,placeholder:"请再次输入新密码",autocomplete:"new-password",clearable:""},null,8,["modelValue"])]),d(g,{class:"form-submit",block:"",disabled:!h.value,loading:m.value,"loading-text":"重置中...",type:"primary",onClick:w},{default:E(()=>[N("确定")]),_:1},8,["disabled","loading"])])])])}}});const se=z(X,[["__scopeId","data-v-bd3f8848"]]);export{se as default};
