!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self,function(){var e=t.focusBagel,r=t.focusBagel=n();r.noConflict=function(){return t.focusBagel=e,r}}())}(this,(function(){"use strict";function t(){t=function(){return n};var n={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,n,e){t[n]=e.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function f(t,n,e,r){var i=n&&n.prototype instanceof d?n:d,u=Object.create(i.prototype),a=new D(r||[]);return o(u,"_invoke",{value:x(t,e,a)}),u}function s(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=f;var v={};function d(){}function p(){}function y(){}var h={};l(h,u,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(j([])));g&&g!==e&&r.call(g,u)&&(h=g);var k=y.prototype=d.prototype=Object.create(h);function w(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function E(t,n){function e(o,i,u,a){var c=s(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?n.resolve(f.__await).then((function(t){e("next",t,u,a)}),(function(t){e("throw",t,u,a)})):n.resolve(f).then((function(t){l.value=t,u(l)}),(function(t){return e("throw",t,u,a)}))}a(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new n((function(n,o){e(t,r,n,o)}))}return i=i?i.then(o,o):o()}})}function x(t,n,e){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(e.method=o,e.arg=i;;){var u=e.delegate;if(u){var a=b(u,e);if(a){if(a===v)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===r)throw r="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r="executing";var c=s(t,n,e);if("normal"===c.type){if(r=e.done?"completed":"suspendedYield",c.arg===v)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(r="completed",e.method="throw",e.arg=c.arg)}}}function b(t,n){var e=n.method,r=t.iterator[e];if(void 0===r)return n.delegate=null,"throw"===e&&t.iterator.return&&(n.method="return",n.arg=void 0,b(t,n),"throw"===n.method)||"return"!==e&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+e+"' method")),v;var o=s(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function L(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function I(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function j(t){if(t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,o=function n(){for(;++e<t.length;)if(r.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=y,o(k,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:p,configurable:!0}),p.displayName=l(y,c,"GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},n.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,a,(function(){return this})),n.AsyncIterator=E,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var u=new E(f(t,e,r,o),i);return n.isGeneratorFunction(e)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},w(k),l(k,c,"Generator"),l(k,u,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),e=[];for(var r in n)e.push(r);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=j,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function e(e,r){return u.type="throw",u.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=n,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(u)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),v},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),I(e),v}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;I(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:j(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),v}},n}function n(t,n,e,r,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void e(t)}a.done?n(c):Promise.resolve(c).then(r,o)}function e(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var u=t.apply(e,r);function a(t){n(u,o,i,a,c,"next",t)}function c(t){n(u,o,i,a,c,"throw",t)}a(void 0)}))}}function r(){return r=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},r.apply(this,arguments)}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function i(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u=function(t){return Object.prototype.toString.call(t)},a=function(t){return"[object Object]"===u(t)},c=function(t){return"[object Function]"===u(t)},l=function(){return document.activeElement},f=function(t){return"string"==typeof t?(n=t,document.querySelector(n)):t;var n},s=function(t){return"Enter"===t.key||13===t.keyCode},v=function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode},d=function(t){return"Tab"===t.key||9===t.keyCode},p=function(t){return d(t)&&!t.shiftKey},y=function(t){return d(t)&&t.shiftKey},h=function(t){var n;return t.focus(),(n=t).tagName&&"input"===n.tagName.toLowerCase()&&"function"==typeof n.select&&t.select(),!0},m=function(){var n=e(t().mark((function n(e){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){null==e?setTimeout((function(){return t(e&&h(e))}),0):t(h(e))})));case 1:case"end":return t.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),g=function(t,n,e){var r,o=n.map((function(t){return f(t)})).filter((function(t){return null!=t})),i=o[0],u=o.slice(-1)[0],a=null!==(r=f(t))&&void 0!==r?r:function(t,n){if(null==t||null==n)return null;if(t.contains(n))return t;if(n.contains(t))return n;var e=new Range;return e.setStartBefore(t),e.setEndAfter(n),e.collapsed&&(e.setStartBefore(n),e.setEndAfter(t)),e.commonAncestorContainer}(i,u);return{rootNode:a,subNodes:o,head:i,tail:u,coverNode:!0===e?a:f(e)}},k=function(t,n){var e=Array.isArray(n.node)?n.node.map((function(t){return r({},n,{node:t})})):n;return t.concat(e)},w=function(t,n,e,o,i,u){var a,l,s,d,p,y,h,m,g,w,E,x,b,L=[].concat(t).filter((function(t){return null!=t})).map((function(t){return r({},t,{type:void 0===t.type?[null==t.key?"":"keydown",null==t.node?"":"click"].filter((function(t){return""!==t})):[].concat(t.type)})})).reduce(k,[]),I=c(n)?n:!0===n?null!==(a=null===(l=L[0])||void 0===l?void 0:l.on)&&void 0!==a?a:function(){}:n,D=[c(I)?{node:null,key:v,on:I,target:e?o:i,type:["keydown"]}:null].concat(L).filter((function(t){return null!=t}));return r({exits:D},(s=D.reduce((function(t,n){var e,r,o,i,a,c,l,s,v,d=t[0],p=t[1],y=t[2],h=t[3],m=t[4],g=t[5],k=t[6];return null!=(v=n.node)&&u.contains(f(v))||null==v?(null!==(e=n.type)&&void 0!==e&&e.includes("keydown")&&(d=d.concat(n)),null!==(r=n.type)&&void 0!==r&&r.includes("click")&&(p=p.concat(n)),null!==(o=n.type)&&void 0!==o&&o.includes("focus")&&(y=y.concat(n)),null!==(i=n.type)&&void 0!==i&&i.includes("outlist")&&(k=k.concat(n))):(null!==(a=n.type)&&void 0!==a&&a.includes("keydown")&&(h=h.concat(n)),null!==(c=n.type)&&void 0!==c&&c.includes("click")&&(m=m.concat(n)),null!==(l=n.type)&&void 0!==l&&l.includes("focus")&&(g=g.concat(n)),null!==(s=n.type)&&void 0!==s&&s.includes("outlist")&&(k=k.concat(n))),[d,p,y,h,m,g,k]}),new Array(7).fill([])),d=s[0],p=s[1],y=s[2],h=s[3],m=s[4],g=s[5],w=s[6],E=p.length>0,x=y.length>0,b=d.length>0,{keyExits:d,clickExits:p,focusExits:y,hasClickExits:E,hasFocusExits:x,hasKeyExits:b,keyExits_wild:h,clickExits_wild:m,focusExits_wild:g,outListExits:w}))},E=function(t,n){var e=c(t),r=e&&t((function(){})),o=e&&"[object Promise]"===u(r),i=e&&!o,a=(null==n||!0===t)&&!o&&i;return{promiseDelay:o,callbackDelay:i,commonDelay:a,isDelay:o||i||a}},x=function(){var n=e(t().mark((function n(e,r,o,i,u){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=6;break}return t.next=3,i((function(){}));case 3:u(),t.next=7;break;case 6:r?i(u):o&&u();case 7:case"end":return t.stop()}}),n)})));return function(t,e,r,o,i){return n.apply(this,arguments)}}(),b=function(t,n,e,r,o,i){return void 0===i&&(i=0),null==t?o?n:e[-1===i?0:i]:c(t)?t({list:e,cover:n,root:r,last:e[i],lastI:i}):f(t)},L=function(t,n,e,r){t.push({node:n,type:e,handler:r})};return function(){var n,o,u=0-((arguments.length<=0?void 0:arguments[0])instanceof Array),c=0+u<0||arguments.length<=0+u?void 0:arguments[0+u],d=1+u<0||arguments.length<=1+u?void 0:arguments[1+u],I=null!==(n=2+u<0||arguments.length<=2+u?void 0:arguments[2+u])&&void 0!==n?n:{},D=I.manual,j=I.loop,O=I.next,_=I.prev,N=I.trigger,P=I.enter,T=I.exit,S=I.onEscape,A=I.onClick,F=I.onMove,C=I.cover,G=void 0!==C&&C,B=I.delayToFocus,K=I.delayToBlur,M=I.removeListenersEachExit,Y=void 0===M||M,q=I.removeListenersEachEnter,R=I.disableListFocusCorrection,U=void 0!==R&&R;I.demo;var $=a(G)?G:!0===G?{}:{node:G?c:null},z=$.node,H=void 0===z?c||!0:z,J=$.enterKey,Q=$.onEnter,V=$.exit,W=!!H,X=[].concat(P).filter((function(t){return null!=t})).map((function(t){return r({},t,{type:void 0===t.type?[null==t.key?"":"keydown",null==t.node?"":"click"].filter((function(t){return""!=t})):[].concat(t.type)})})).reduce(k,[]),Z=f(N||(null===(o=X[0])||void 0===o?void 0:o.node)),tt=[].concat(V).filter((function(t){return null!=t})).map((function(t){var n;return r({},t,{target:null!==(n=t.target)&&void 0!==n?n:Z})})),nt=W&&0===tt.length,et=!1===S,rt=a(O)?O:{key:O},ot=rt.key,it=rt.on,ut=a(_)?_:{key:_},at=ut.key,ct=ut.on,lt=g(c,d,H),ft=lt.rootNode,st=lt.subNodes,vt=lt.head,dt=lt.tail,pt=lt.coverNode,yt=!(null==j||j),ht=!!(ot||at||D),mt=-1,gt=-1,kt=!1,wt=[],Et=!1,xt=!1,bt=!1,Lt=[];Gt();for(var It,Dt=null,jt=null,Ot=null,_t=i(X.length>0?X:[{}]);!(It=_t()).done;){var Nt,Pt=It.value,Tt=Pt.target,St=Pt.delay;if(St=null!==(Nt=St)&&void 0!==Nt?Nt:B,!E(St,b(Tt,pt,st,ft,W)).isDelay){Ct(ft,st,vt,dt,pt);break}}return{enter:function(){Z=Z||l();for(var t,n=!1,e=function(){var e=t.value,r=e.on,o=e.type,i=e.node,u=e.target,a=e.delay;(null!=o&&o.some((function(t){return null==t||!1===t||"invoke"===t}))||null==i)&&(At({fromInvoke:!0},r,u,a),n=!0)},r=i(X);!(t=r()).done;)e();n||At({fromInvoke:!0})},exit:function(){for(var t,n=function(){var n=t.value,e=n.on,r=n.type,o=n.target;o=f(o);var i,u;if(null!=r&&r.some((function(t){return null==t||!1===t||"invoke"===t})))return o?{v:null===(i=Dt)||void 0===i?void 0:i({fromInvoke:!0},e,o)}:{v:null===(u=jt)||void 0===u?void 0:u({fromInvoke:!0},e,o)}},e=i(Ot);!(t=e()).done;){var r=n();if("object"==typeof r)return r.v}},removeListeners:function(){wt.forEach((function(t){var n;return null===(n=t.node)||void 0===n?void 0:n.removeEventListener(t.type,t.handler)})),Lt.forEach((function(t){var n;return null===(n=t.node)||void 0===n?void 0:n.removeEventListener(t.type,t.handler)})),kt=!1,bt=!1},i:function(){return mt}};function At(t,n,e,r){return Ft.apply(this,arguments)}function Ft(){return Ft=e(t().mark((function n(e,r,o,i){var u,a,l,f,s,v,p;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=function(t,n,r){var i=b(o,t,n,r,W,mt),u=n.indexOf(i);u>-1&&(mt=u,null==F||F({e:e,prev:null,cur:i,prevI:-1,curI:mt})),m(i)},v=function(){var t=g(c,d,H),n=t.rootNode,e=t.subNodes,r=t.head,o=t.tail,i=t.coverNode;Ct(n,e,r,o,i),p(i,e,n)},!xt&&!Et){t.next=4;break}return t.abrupt("return");case 4:return Et=!0,t.next=7,null==r?void 0:r(e);case 7:i=null!==(u=i)&&void 0!==u?u:B,a=i?E(i,b(o,pt,st,ft,W,mt)):{},l=a.promiseDelay,f=a.callbackDelay,s=a.commonDelay,a.isDelay?x(l,f,s,i,v):(Ct(ft,st,vt,dt,pt),p(pt,st,ft));case 10:case"end":return t.stop()}}),n)}))),Ft.apply(this,arguments)}function Ct(n,r,o,u,a){if(!kt){if(kt=!0,null==n)throw new Error("没有找到元素 "+c+"，您可以尝试 delayToFocus 选项，等待元素 "+c+" 渲染完毕后进行聚焦。");if(null==o||null==u)throw new Error("至少需要包含两个可以聚焦的元素，如果元素需要等待渲染，您可以尝试 delayToFocus 选项。");var d=ht?function(t,n,e,r,o,i,u,a,c,l,f){return function(s){if(s.target!==c&&f()){var v=n(),d=v[0],m=v[1],g=e()[1],k=Math.max(0,d),w=t.length;if((null!=o?o:p)(s)){var E=k+1,x=r?Math.min(w-1,E):E;x%=w,null==u||u({e:s,prev:t[k],cur:t[x],prevI:k,curI:x}),null==l||l({e:s,prev:t[k],cur:t[x],prevI:k,curI:x}),m(x),g(k),h(t[x]),s.stopImmediatePropagation(),s.preventDefault()}else if((null!=i?i:y)(s)){var b=k-1,L=r?Math.max(0,b):b;L=(L+w)%w,null==a||a({e:s,prev:t[k],cur:t[L],prevI:k,curI:L}),null==l||l({e:s,prev:t[k],cur:t[L],prevI:k,curI:L}),m(L),g(k),h(t[L]),s.stopImmediatePropagation(),s.preventDefault()}}}}(r,(function(){return[mt,function(t){return mt=t}]}),(function(){return[,function(t){return gt=t}]}),yt,ot,at,it,ct,a,F,(function(){return Et})):function(t,n,e,r,o,i,u,a){return function(c){var l=c.target;l!==u&&a()&&(p(c)?(c.stopImmediatePropagation(),null==r||r({e:c}),l===n&&(c.preventDefault(),e||h(t)),l===i&&(c.preventDefault(),h(t))):y(c)&&(c.stopImmediatePropagation(),null==o||o({e:c}),l===t&&(c.preventDefault(),e||h(n)),l===i&&(c.preventDefault(),h(n))))}}(o,u,yt,it,ct,n,a,(function(){return Et})),g=w(T,S,W,a,Z,n),k=g.exits,b=g.keyExits,I=g.clickExits,D=g.focusExits,j=g.hasClickExits,O=g.hasFocusExits,_=g.hasKeyExits,N=g.keyExits_wild,P=g.clickExits_wild,C=g.focusExits_wild,G=g.outListExits,B=N.map((function(t){return[f(null==t?void 0:t.node),At(t)]})),M=P.map((function(t){return[f(null==t?void 0:t.node),Tt(t)]})),q=C.map((function(t){return[f(null==t?void 0:t.node),St(t)]}));!function(){n.addEventListener("focusin",$),L(wt,n,"focusin",$),n.addEventListener("focusout",z),L(wt,n,"focusout",z),n!==a&&null!=a&&(a.addEventListener("focus",H),L(wt,a,"focus",H),a.addEventListener("blur",V),L(wt,a,"blur",V));n.addEventListener("keydown",d),L(wt,n,"keydown",d),ht&&(n.addEventListener("click",ut),L(wt,n,"click",ut),n.addEventListener("mousedown",rt),L(wt,n,"mousedown",rt));j&&(n.addEventListener("click",vt),L(wt,n,"click",vt));O&&(n.addEventListener("focusin",pt),L(wt,n,"focusin",pt));_&&(n.addEventListener("keydown",Lt),L(wt,n,"keydown",Lt));q.forEach((function(t){var n,e=t[0],r=t[1];null==e||null===(n=e.addEventListener)||void 0===n||n.call(e,"focus",r),L(wt,e,"focus",r)})),M.forEach((function(t){var n,e=t[0],r=t[1];null==e||null===(n=e.addEventListener)||void 0===n||n.call(e,"click",r),L(wt,e,"click",r)})),B.forEach((function(t){var n,e=t[0],r=t[1];null==e||null===(n=e.addEventListener)||void 0===n||n.call(e,"keydown",r),L(wt,e,"keydown",r)})),null==a||a.addEventListener("keydown",ft),L(wt,a,"keydown",ft),nt&&(null==u||u.addEventListener("focus",lt),L(wt,u,"focus",lt))}(),Dt=It,jt=Nt,Ot=k;var R=!1}function $(t){t.target!==a&&!U&&ht&&!1===Et&&!1===R&&(-1===mt&&(mt=0),m(r[mt]),null==F||F({e:t,prev:null,cur:r[mt],prevI:-1,curI:mt}),Et=!0)}function z(t){t.target!==a&&setTimeout((function(){var e=l(),o=!n.contains(e),u=e===a;o&&!u&&function(t){for(var n,e=i(G);!(n=e()).done;){var r=n.value,o=r.on,u=r.target,a=r.delay,c=f(u);c?It(t,o,c,a):Nt(t,o,c,a);break}}(t),(u||o)&&(null==F||F({e:t,prev:r[mt],cur:null,prevI:mt,curI:-1}),Et=!1)}))}function H(){xt=!0}function V(){xt=!1}function rt(){R=!0,setTimeout((function(){R=!1}))}function ut(t){var n=t.target,e=r.findIndex((function(t){return t.contains(n)}));e>-1&&(gt=mt,mt=e,null==A||A({e:t,prev:r[gt],cur:r[mt],prevI:gt,curI:mt}),gt===mt&&!1!==Et||null==F||F({e:t,prev:r[gt],cur:r[mt],prevI:gt,curI:mt}),Et=!0)}function lt(t){var e=t.relatedTarget;e===a||n.contains(e)||R||X.some((function(t){return f(t.node)===e}))||h(a)}function ft(t){if(t.target===a){if((null!=J?J:s)(t)&&!Et)return t.preventDefault(),Et=!0,null==Q||Q(t),h(r[mt=-1===mt?0:mt]),void(null==F||F({e:t,prev:null,cur:r[mt],prevI:null,curI:mt}));for(var n,e=i(tt);!(n=e()).done;){var o=n.value,c=o.key,l=o.on,v=o.target,d=f(v);if(null!=c&&c(t))return void y(t,l,d)}nt&&p(t)&&h(u)}function y(t,n,e){null==n||n(t),e&&h(e),Ft()}}function st(t,n){var e=n.node,r=n.on,o=n.target,i=n.delay,u=f(e),a=f(o);return!(null!=u&&!u.contains(t.target)||null==u)&&(a?It(t,r,a,i):Nt(t,r,a,i),!0)}function vt(t){for(var n,e=i(I);!(n=e()).done;){if(st(t,n.value))break}}function dt(t,n){var e=n.node,r=n.on,o=n.target,i=n.delay,u=f(e),a=f(o);return(null==u||t.target===u)&&null!=u&&(a?It(t,r,a,i):Nt(t,r,a,i),!0)}function pt(t){for(var n,e=i(D);!(n=e()).done;){if(dt(t,n.value))break}}function bt(t,n){var e=n.key,r=n.node,o=n.target,i=n.on,u=n.delay,a=f(r),c=f(o);if(null!=a&&t.target!==a)return!1;if(null!=e&&e(t)){if(!c){var l=Nt(t,i,c,u);return l&&t.stopImmediatePropagation(),l}if(e(t)){var s=It(t,i,c,u);return s&&t.stopImmediatePropagation(),s}}}function Lt(t){if(!(t.target===a||et&&v(t)))for(var n,e=i(b);!(n=e()).done;){if(bt(t,n.value))break}}function It(t,n,e,r){return _t.apply(this,arguments)}function _t(){return _t=e(t().mark((function n(e,o,i,u){var c,l,f,s,v,d,p;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p=function(){h(i),null==F||F({e:e,prev:r[mt],cur:i,prevI:mt,curI:-1}),i!==a&&Ft(),Gt()},Et){t.next=3;break}return t.abrupt("return");case 3:return Et=!1,e.preventDefault(),u=null!==(c=u)&&void 0!==c?c:K,l=u?E(u,i):{},f=l.promiseDelay,s=l.callbackDelay,v=l.commonDelay,d=l.isDelay,t.next=9,null==o?void 0:o(e);case 9:d?x(f,s,v,u,p):p();case 10:case"end":return t.stop()}}),n)}))),_t.apply(this,arguments)}function Nt(t,n,e,r){return Pt.apply(this,arguments)}function Pt(){return Pt=e(t().mark((function n(e,o,i,u){var c,l,f,s,v;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Et){t.next=2;break}return t.abrupt("return");case 2:if(Et=!1,e.preventDefault(),!1!==i){t.next=11;break}return t.next=7,null==o?void 0:o(e);case 7:return null==F||F({e:e,prev:r[mt],cur:null,prevI:mt,curI:-1}),Ft(),Gt(),t.abrupt("return");case 11:if(!W){t.next=18;break}return t.next=14,null==o?void 0:o(e);case 14:null==F||F({e:e,prev:r[mt],cur:null,prevI:mt,curI:-1}),h(a),t.next=23;break;case 18:return c=function(){Z&&h(Z),null==F||F({e:e,prev:r[mt],cur:null,prevI:mt,curI:-1}),Ft(),Gt()},t.next=21,null==o?void 0:o(e);case 21:l=E(u,i),f=l.promiseDelay,s=l.callbackDelay,v=l.commonDelay,l.isDelay?x(f,s,v,u,c):c();case 23:case"end":return t.stop()}}),n)}))),Pt.apply(this,arguments)}function Tt(t){return function(n){st(n,t)}}function St(t){return function(n){dt(n,t)}}function At(t){return function(n){n.target!==a&&(et&&v(n)||bt(n,t))}}function Ft(){nt||Y&&(kt=!1,wt.forEach((function(t){var n;return null===(n=t.node)||void 0===n?void 0:n.removeEventListener(t.type,t.handler)})),wt=[])}}function Gt(){if(!bt){bt=!0;for(var t,n=function(){var n=t.value,e=n.node,o=n.on,i=n.key,u=n.type,a=n.target,c=n.delay,l=[].concat(u),s=["keydown","focus","click"],v=f(e);function d(t){null!=i&&i(t)&&(t.preventDefault(),At(t,o,a,c),r())}function p(t){At(t,o,a,c),r()}l.forEach((function(t){if(v&&s.includes(t)){var n="keydown"===t?d:p;v.addEventListener(t,n),L(Lt,v,t,n)}}))},e=i(X);!(t=e()).done;)n()}function r(){q&&(bt=!1,Lt.forEach((function(t){return t.node.removeEventListener(t.type,t.handler)})),Lt=[])}}}}));
//# sourceMappingURL=focus-bagel.umd.min.js.map
