"use strict";(self.webpackChunkcjs=self.webpackChunkcjs||[]).push([[179],{292:()=>{function e(){return e=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},e.apply(this,arguments)}var n=function(e){return Object.prototype.toString.call(e)},t=function(e){return"[object Object]"===n(e)},r=function(e){return"[object Function]"===n(e)},o=function(){return document.activeElement},i=function(e){return"string"==typeof e?(n=e,document.querySelector(n)):e;var n},u=function(e){return"Enter"===e.key||13===e.keyCode},a=function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode},c=function(e){return"Tab"===e.key||9===e.keyCode},l=function(e){return c(e)&&!e.shiftKey},s=function(e){return c(e)&&e.shiftKey},f=function(e){var n;e.focus(),(n=e).tagName&&"input"===n.tagName.toLowerCase()&&"function"==typeof n.select&&e.select()},d=function(e){null==e?setTimeout((function(){return e&&f(e)}),0):f(e)},v=function(e,n,t,r){var o,u=n.map((function(e){return i(e)})).filter((function(e){return null!=e})),a=u[0],c=u.slice(-1)[0],l=null!==(o=i(e))&&void 0!==o?o:function(e,n){if(null==e||null==n)return null;if(e.contains(n))return e;if(n.contains(e))return n;var t=new Range;return t.setStartBefore(e),t.setEndAfter(n),t.collapsed&&(t.setStartBefore(n),t.setEndAfter(e)),t.commonAncestorContainer}(a,c);return{root:l,list:u,head:a,tail:c,cover:r?l:i(t)}},p=function(n,t){var r=Array.isArray(t.node)?t.node.map((function(n){return e({},t,{node:n})})):t;return n.concat(r)},y=function(n,o,i,u,c){var l,s,f=[].concat(n).filter((function(e){return null!=e})).map((function(e){return t(e)?e:{node:e}})).map((function(n){return e({},n,{type:void 0===n.type?[null==n.key?"":"keydown",null==n.node?"":"click"].filter((function(e){return""!==e})):[].concat(n.type)})})).reduce(p,[]),d=r(o)?o:!0===o?null!==(l=null===(s=f[0])||void 0===s?void 0:s.on)&&void 0!==l?l:function(){}:o;return[r(d)?{node:null,key:a,on:d,target:i?u:c,type:["keydown"]}:null].concat(f).filter((function(e){return null!=e}))},h=function(e,t){var o=e?function(e,t){var o=r(e),i=o&&e(t),u=o&&"[object Promise]"===n(i)&&"function"==typeof i.then,a=o&&!u;return{promiseDelay:u,callbackDelay:a,commonDelay:!0===e&&!u&&!a,delayRes:i}}(e,t):{},i=o.promiseDelay,u=o.callbackDelay,a=o.commonDelay,c=o.delayRes;if(i)c.then(t);else if(u);else{if(!a)return!0;t()}},g=function(e,n,t,o,u,a,c,l){if(null==e||!0===e)return u?n:c;if(r(e)){var s=e({e:l,list:t,cover:n,root:o,last:t[a],lastI:a});return null==s||!0===s?u?n:c:s}return i(e)},m=function(){function e(){this.cache=[],this.isEmpty=!0}var n=e.prototype;return n.push=function(e,n,t){this.isEmpty=!1,this.cache.push({node:e,type:n,handler:t})},n.clean=function(){this.cache=[],this.isEmpty=!0},n.addListeners=function(){this.cache.forEach((function(e){var n;return null===(n=e.node)||void 0===n?void 0:n.addEventListener(e.type,e.handler)}))},n.removeListeners=function(){this.cache.forEach((function(e){var n;return null===(n=e.node)||void 0===n?void 0:n.removeEventListener(e.type,e.handler)})),this.clean()},e}(),k=function(){function e(){this.cache=new Map}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.push=function(e,n,t){this.has(e)||(n.addEventListener("keydown",t),this.cache.set(e,{node:n,handler:t}))},n.remove=function(e){var n=this;[].concat(e).forEach((function(e){return n.cache.get(e).node.removeEventListener("keydown",n.cache.get(e).handler)}))},e}(),E=function(){function e(){this.data=[],this.head=null,this.tail=null}var n=e.prototype;return n.update=function(e){this.data.splice(0,this.data.length),Array.prototype.push.apply(this.data,e),this.head=e[0],this.tail=e.at(-1)},n.isEmpty=function(){return 0===this.data.length},n.has=function(e){return!!this.data[e]},e}(),w=function(){var n,c,w=0-((arguments.length<=0?void 0:arguments[0])instanceof Array),I=0+w<0||arguments.length<=0+w?void 0:arguments[0+w],x=1+w<0||arguments.length<=1+w?void 0:arguments[1+w],L=null!==(n=2+w<0||arguments.length<=2+w?void 0:arguments[2+w])&&void 0!==n?n:{};if(!(Array.isArray(x)&&x.length>1))throw new Error("请至少传入一个数组，数组至少包含两个可聚焦元素，用来表示列表的头和尾。");var _=L.sequence,b=L.loop,A=L.next,D=L.prev,T=L.trigger,B=L.entry,K=L.exit,j=L.onEscape,F=L.onClick,C=L.onMove,M=L.cover,R=L.initialActive,$=L.correctionTarget,O=L.delayToFocus,S=L.delayToBlur,P=L.removeListenersEachExit,q=void 0===P||P,N=L.removeListenersEachEnter,U=L.addEntryListenersEachExit,z=void 0===U||U,G=L.manual,H=L.allowSafariToFocusAfterMousedown,J=void 0===H||H,Q=[].concat(B).filter((function(e){return null!=e})).map((function(e){return t(e)?e:{node:e}})).map((function(n){var t;return e({},n,{delay:null!==(t=n.delay)&&void 0!==t?t:O,type:void 0===n.type?[null==n.key?"":"keydown",null==n.node?"":"click"].filter((function(e){return""!=e})):[].concat(n.type),onExit:!0===n.onExit?n.on:n.onExit})})).reduce(p,[]),V=0===Q.length,W=new Set(Q.map((function(e){return r(e.onExit)?e.node:null})).filter((function(e){return null!=e})).map((function(e){return i(e)}))),X=i(T||(null===(c=Q[0])||void 0===c?void 0:c.node)),Y=t(M)?M:{},Z=Y.node,ee=Y.enterKey,ne=Y.onEnter,te=Y.exit,re=null!=M&&!1!==M&&!1!==Z,oe=re&&(!0===M||!0===Z||null==Z),ie=[].concat(te).filter((function(e){return null!=e})).map((function(e){return t(e)?e:{key:e}})).map((function(n){var t;return e({},n,{target:null!==(t=n.target)&&void 0!==t?t:X})})),ue=re&&0===ie.length,ae=new E,ce=t(A)?A:{key:A},le=ce.key,se=ce.on,fe=t(D)?D:{key:D},de=fe.key,ve=fe.on,pe=!1===j,ye=!(null==b||b),he=!!(le||de||_),ge=null!=R?R:-1,me=-1,ke=!1,Ee=!1,we=new m,Ie=new m,xe=new k;if(!G&&(Ce(),(V?[{}]:Q).some((function(e){return!e.delay})))){var Le=v(I,x,Z,oe),_e=Le.root,be=Le.list,Ae=Le.head,De=Le.tail,Te=Le.cover;ae.update(be),Fe(_e,ae.data,Ae,De,Te)}var Be={enter:function(e){if(X=X||o(),e)return Ke({fromInvoke:!0},e.on,e.target,e.delay);for(var n=function(){var e=Q[t],n=e.on,r=e.type,o=e.node,i=e.target,u=e.delay;if(null!=r&&r.some((function(e){return null==e||!1===e||"invoke"===e}))||null==o)return{v:Ke({fromInvoke:!0},n,i,u)}},t=0;t<Q.length;++t){var r=n();if("object"==typeof r)return r.v}return Ke({fromInvoke:!0})},exit:function(e){var n=v(I,x,Z,oe),t=n.list,r=n.cover,o=n.root;if(e){var u=e.on,a=e.target;return d(i(a),u)}for(var c=y(K,j,re,r,X),l=function(){var e=c[s],n=e.on,t=e.type,r=e.target;if(null!=t&&t.some((function(e){return null==e||!1===e||"invoke"===e})))return{v:d(r,n)}},s=0;s<c.length;++s){var f=l();if("object"==typeof f)return f.v}function d(e,n){return ae.isEmpty()&&ae.update(t),je({fromInvoke:!0},n,e,!1,r,ae.data,o)}},removeListeners:function(){we.removeListeners(),Ie.removeListeners()},removeListRelatedListeners:function(){we.removeListeners()},removeEntryListeners:function(){Ie.removeListeners()},addEntryListeners:function(){Ce()},addListRelatedListeners:function(){var e=v(I,x,Z,oe),n=e.root,t=e.list,r=e.cover;ae.isEmpty()&&ae.update(t),Fe(n,ae.data,ae.head,ae.tail,r)},addForward:function(e,n){var t=null;if(r(n)){var o=v(I,x,Z,oe);t=n({root:o.root,list:o.list,head:o.head,tail:o.tail,cover:o.cover,curI:ge,prevI:me})}else t=n;var u=t,a=u.node,c=u.on,l=u.key,s=u.target,f=i(a),p=i(s);xe.push(e,f,(function(e){null!=l&&l(e,ge)&&(e.preventDefault(),null==c||c(),d(p))}))},removeForward:function(e){xe.remove(e)},updateList:function(e){var n=e.map((function(e){return i(e)})).filter((function(e){return null!=e}));ae.update(n)},i:function(e){return ae.has(e)&&ke?(me=ge,ge=e,null==C||C({e:{fromI:!0},prev:ae.data[me],cur:ae.data[ge],prevI:me,curI:ge}),f(x[ge]),e):ge}};return Be;function Ke(e,n,t,r){function o(){var n=v(I,x,Z,oe),r=n.root,o=n.list,i=n.head,u=n.tail,a=n.cover;ae.update(o),G||Fe(r,ae.data,i,u,a),!1!==t&&function(n,r,o){var i=g(t,n,r,o,re,ge,r[-1===ge?0:ge],e),u=r.indexOf(i);u>-1&&(me=ge,ge=u,null==C||C({e,prev:r[me],cur:i,prevI:me,curI:ge}),ke=!0),re&&(i===n||u>-1)&&(Ee=!0),d(i)}(a,ae.data,r)}Ee||ke||Promise.resolve(null==n?void 0:n(e)).then((function(e){r?h(r,o):o()}))}function je(e,n,t,o,i,u,a,c){var l;if(!ke||r(c)&&!c({e,prev:u[me],cur:u[ge],prevI:me,curI:ge}))return!1;ke=!1,null===(l=e.preventDefault)||void 0===l||l.call(e);var s=g(t,i,u,a,re,ge,X,e);return s?function(){function t(){f(s),null==C||C({e,prev:u[ge],cur:s,prevI:ge,curI:-1}),G||(s!==i&&Me(),z&&Ce())}Promise.resolve(null==n?void 0:n(e)).then((function(e){var n;o=null!==(n=o)&&void 0!==n?n:S,h(o,t)&&t()}))}():function(){function t(n){return function(t){n&&f(n),null==C||C({e,prev:u[ge],cur:null,prevI:ge,curI:-1}),G||(Me(),z&&Ce())}}Promise.resolve(null==n?void 0:n(e)).then((function(n){if(!1!==s)if(re)null==C||C({e,prev:u[ge],cur:null,prevI:ge,curI:-1}),f(i);else{var r;o=null!==(r=o)&&void 0!==r?r:S;var a=t(X);h(o,a)&&a()}else t()()}))}()}function Fe(e,n,t,r,c){if(we.isEmpty){if(null==e)throw new Error("没有找到元素 "+I+"，您可以尝试 delayToFocus 选项，等待元素 "+I+" 渲染完毕后进行聚焦。");if(null==t||null==r)throw new Error("至少需要包含两个可以聚焦的元素，如果元素需要等待渲染，您可以尝试 delayToFocus 选项。");!function(){var t=function(){return!!V||ke},v=he?function(e,n,t,r,o,i,u,a,c,d,v){return function(n){if(n.target!==c&&v()){var t=[ge,function(e){return ge=e}],p=t[0],y=t[1],h=function(e){return me=e},g=Math.max(0,p),m=e.length;if((null!=o?o:l)(n)){var k=g+1,E=r?Math.min(m-1,k):k;E%=m,null==u||u({e:n,prev:e[g],cur:e[E],prevI:g,curI:E}),null==d||d({e:n,prev:e[g],cur:e[E],prevI:g,curI:E}),y(E),h(g),f(e[E]),n.preventDefault()}else if((null!=i?i:s)(n)){var w=g-1,I=r?Math.max(0,w):w;I=(I+m)%m,null==a||a({e:n,prev:e[g],cur:e[I],prevI:g,curI:I}),null==d||d({e:n,prev:e[g],cur:e[I],prevI:g,curI:I}),y(I),h(g),f(e[I]),n.preventDefault()}}}}(n,0,0,ye,le,de,se,ve,c,C,t):function(e,n,t,r,o,i,u){return function(a){var c=e[0],d=e.at(-1),v=a.target;v!==i&&u()&&(l(a)?(null==t||t({e:a}),v===d&&(a.preventDefault(),n||f(c)),v===o&&(a.preventDefault(),f(c))):s(a)&&(null==r||r({e:a}),v===c&&(a.preventDefault(),n||f(d)),v===o&&(a.preventDefault(),f(d))))}}(n,ye,se,ve,e,c,t),p=function(e,n){var t=e.reduce((function(e,t){var r,o=e[0],u=e[1],a=e[2],c=e[3],l=e[4],s=e[5],f=function(e){var n;return null===(n=t.type)||void 0===n?void 0:n.includes(e)};return null!=(r=t.node)&&n.contains(i(r))||null==r?(f("keydown")&&(o=o.concat(t)),f("click")&&(u=u.concat(t)),f("focus")&&(a=a.concat(t)),f("outlist")&&(s=s.concat(t))):(f("click")&&(c=c.concat(t)),f("focus")&&(l=l.concat(t)),f("outlist")&&(s=s.concat(t))),[o,u,a,c,l,s]}),new Array(6).fill([])),r=t[0],o=t[1],u=t[2],a=t[3],c=t[4],l=t[5];return{keyExits:r,clickExits:o,focusExits:u,hasClickExits:o.length>0,hasFocusExits:u.length>0,hasKeyExits:r.length>0,clickExits_wild:a,focusExits_wild:c,outListExits:l}}(y(K,j,re,c,X),e),h=p.keyExits,g=p.clickExits,m=p.focusExits,k=p.hasClickExits,E=p.hasFocusExits,w=p.hasKeyExits,I=p.clickExits_wild,x=p.focusExits_wild,L=p.outListExits,_=I.map((function(e){return[i(null==e?void 0:e.node),R(e)]})),b=x.map((function(e){return[i(null==e?void 0:e.node),O(e)]}));we.push(e,"focusin",(function(t){var r=t.target;if(re&&r===c)Ee=!0;else if(re&&!1===A&&!1===Ee)d(c);else{if(!1!==$&&he&&!1===ke&&!1===A){var o,u=null!==(o=null==$?void 0:$({list:n,cover:c,root:e,last:n[ge],lastI:ge}))&&void 0!==o?o:-1===ge?n[0]:n[ge],a=i(u),l=n.findIndex((function(e){return e===a}));l>-1&&(me=ge,ge=l,null==C||C({e:t,prev:n[me],cur:n[ge],prevI:me,curI:ge})),d(a)}ke=!0}})),we.push(e,"focusout",(function(t){W.has(t.relatedTarget)||setTimeout((function(){var r=o(),u=!e.contains(r),a=r===c;if(t.target===c&&u)Ee=!1;else{var l=null;(a||u)&&(l=function(t){for(var r=0;r<L.length;++r){var o=L[r],u=o.on,a=o.target,l=o.delay;return je(t,u,i(a),l,c,n,e,L[r].if)}}(t)),!1!==l&&(a?ke=!1:u&&(ke=!1,Ee=!1))}}))})),e.contains(c)||null==c||(we.push(c,"focus",(function(){Ee=!0})),we.push(c,"blur",(function(){D?D=!1:Ee=!1}))),we.push(e,"keydown",(function(e){v(e),w&&function(e){if(!(e.target===c||pe&&a(e)))for(var n=0;n<h.length&&!M(e,h[n]);++n);}(e)})),he&&we.push(e,"click",(function(e){var t=e.target,r=n.findIndex((function(e){return e.contains(t)}));r>-1&&(me=ge,ge=r,null==F||F({e,prev:n[me],cur:n[ge],prevI:me,curI:ge}),me===ge&&!1!==ke||null==C||C({e,prev:n[me],cur:n[ge],prevI:me,curI:ge}))})),we.push(e,"mousedown",(function(e){var t;A=!0,setTimeout((function(){A=!1})),(!he||he&&(t=n.find((function(n){return n.contains(e.target)}))))&&(ke=!0,re&&(Ee=!0),J&&t&&void 0!==window.safari&&(f(t),e.preventDefault()))})),k&&we.push(e,"click",(function(e){for(var n=0;n<g.length&&!T(e,g[n]);++n);})),E&&we.push(e,"focusin",(function(e){for(var n=0;n<m.length&&!B(e,m[n]);++n);})),b.forEach((function(e){var n=e[0],t=e[1];we.push(n,"focus",t)})),_.forEach((function(e){var n=e[0],t=e[1];we.push(n,"click",t)})),null!=c&&we.push(c,"keydown",(function(e){if(e.target===c&&Ee&&!ke){if((null!=ee?ee:u)(e)&&!ke)return e.preventDefault(),D=!0,ke=!0,null==ne||ne(e),f(n[ge=-1===ge?0:ge]),void(null==C||C({e,prev:null,cur:n[ge],prevI:null,curI:ge}));for(var t=0;t<ie.length;++t){var o=ie[t],a=o.key,s=o.on,d=o.target,v=i(d);if(null!=a&&a(e,ge))return void p(e,s,v)}ue&&l(e)&&f(r)}function p(e,n,t){null==n||n(e),t&&f(t),Me()}})),we.addListeners();var A=!1,D=!1;function T(t,r){var o=r.node,u=r.on,a=r.target,l=r.delay,s=i(o),f=i(a);return!(null!=s&&!s.contains(t.target)||null==s||(je(t,u,f,l,c,n,e,r.if),0))}function B(t,r){var o=r.node,u=r.on,a=r.target,l=r.delay,s=i(o),f=i(a);return(null==s||t.target===s)&&null!=s&&(je(t,u,f,l,c,n,e,r.if),!0)}function M(t,r){var o=r.key,u=r.node,a=r.target,l=r.on,s=r.delay,f=i(u);return(null==f||t.target===f)&&(null!=o&&o(t,ge)?(je(t,l,a,s,c,n,e,r.if),!0):void 0)}function R(e){return function(n){T(n,e)}}function O(e){return function(n){B(n,e)}}}()}}function Ce(){if(Ie.isEmpty){for(var e=function(){var e=Q[n],t=e.node,o=e.on,u=e.key,a=e.type,c=e.target,l=e.delay,s=e.onExit,f=e.if,d=[].concat(a),p=["keydown","focus","click"],y=i(t);d.forEach((function(e){if(y&&p.includes(e)){var n="keydown"===e,t=n?function(e){return null==u?void 0:u(e,ge)}:function(e){return!0};Ie.push(y,e,function(e,n){return function(t){r(f)&&!f({e:t,prev:ae.data[me],cur:ae.data[ge],prevI:me,curI:ge})||!e(t)||function(e,n){var t=0;if(ke){if(r(s)){var i=v(I,x,Z,oe),u=i.list,a=i.cover,f=i.root;je(e,s,c,!1,a,u,f),t=!t}}else Ke(e,o,c,l),N&&!G&&Ie.removeListeners(),t=!t;n&&t&&e.preventDefault()}(t,n)}}(t,n))}}))},n=0;n<Q.length;++n)e();Ie.addListeners()}}function Me(){ue||q&&!G&&we.removeListeners()}};const I=document.getElementById("dialog"),x=document.getElementById("dialog_mask"),L=document.getElementById("open");w(I,["#firstFocusBtn","#close"],{loop:!1,entry:{node:L,on:function(){I.classList.add("openedDialog"),I.classList.remove("closedDialog"),x.classList.remove("closed_mask"),L.ariaExpanded=!0}},exit:{node:["#close","#firstFocusBtn","#confirm"],on:function(){I.classList.remove("openedDialog"),I.classList.add("closedDialog"),x.classList.add("closed_mask"),L.ariaExpanded=!1},type:["click","outlist"]},onEscape:!0});const _=document.getElementById("menu_btn"),b=document.getElementById("menu");function A(){_.classList.toggle("opened"),b.classList.toggle("opened"),_.ariaExpanded=!!_.classList.contains("opened")}w(b,["#dialog_anchor","#player_anchor"],{onEscape:A,entry:{node:_,on:A,onExit:!0},exit:[{node:"#dialog_anchor",type:"keydown",key:e=>"Tab"===e.key&&e.shiftKey,on:A},{node:"#player_anchor",type:"keydown",key:e=>"Tab"===e.key&&!e.shiftKey,on:A,target:"#nav_link"},{type:"outlist",on:A,target:({e})=>!e?.relatedTarget?.id?.includes("h-")&&_}]}),w("#tab_list",["#tab_1","#tab_2","#tab_3","#tab_4","#tab_5"],{next:e=>"ArrowRight"===e.key,prev:e=>"ArrowLeft"===e.key,exit:[{key:e=>"Tab"===e.key&&!e.shiftKey,target:"#tags_code"},{key:e=>"Tab"===e.key&&e.shiftKey,target:"#navigation_code"}],initialActive:1,removeListenersEachExit:!1,onMove:function({prev:e,cur:n,prevI:t,curI:r}){if(r===t||-1===r)return;(e??document.getElementById("tab_1")).setAttribute("aria-selected","false"),n.setAttribute("aria-selected","true");const o=document.getElementById("tabpanel_"+(t+1))||document.getElementById("tabpanel_1"),i=document.getElementById("tabpanel_"+(r+1));o.classList.add("is-hidden"),i.classList.remove("is-hidden")}}),w("#songs_wrapper",["#song_1","#song_2","#song_3","#song_4","#song_5","#song_6","#song_7"],{next:e=>"ArrowDown"===e.key,prev:e=>"ArrowUp"===e.key,exit:[{key:e=>"Tab"===e.key&&!e.shiftKey,target:"#more_from"},{key:e=>"Tab"===e.key&&e.shiftKey,target:"#grid_wrapper"},{type:"outlist",target:!1}],entry:{node:"#grid_wrapper",key:(e,n)=>("Tab"===e.key&&!e.shiftKey&&n>-1||"ArrowDown"===e.key||"ArrowUp"===e.key)&&"grid_wrapper"===e.target.id,type:"keydown"},onMove:function({cur:e,prev:n,curI:t}){n?.classList.remove("focused"),e?.classList.add("focused"),null!=T&&(D=-1===T.i()?0:T.i()),T?.removeListeners(),t>-1&&(T=function(e,n){const t=e+1;return w(`#song_${t}`,[`#s${t}_play`,`#s${t}_a`,`#s${t}_like`,`#s${t}_more`],{entry:[{node:`#song_${t}`,type:"focus",target:({list:e})=>e[n]},{node:`#song_${t}`,key:e=>"ArrowRight"===e.key||"ArrowLeft"===e.key,type:"keydown"},{node:`#song_${t}`,type:"click",target:!1}],next:e=>"ArrowRight"===e.key,prev:e=>"ArrowLeft"===e.key,exit:{type:"outlist",target:!1},initialActive:D,correctionTarget:!1,addEntryListenersEachExit:!1})}(t,D))},correctionTarget:({lastI:e,last:n})=>-1===e?"#grid_wrapper":n,removeListenersEachExit:!1}).addForward("grid",{node:"#grid_wrapper",key:(e,n)=>"Tab"===e.key&&!e.shiftKey&&-1===n,target:"#more_from"});let D=0,T=null}},e=>{e(e.s=292)}]);