"use strict";(self.webpackChunkcjs=self.webpackChunkcjs||[]).push([[179],{292:()=>{function e(){return e=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},e.apply(this,arguments)}var n=function(e){return Object.prototype.toString.call(e)},t=function(e){return"[object Object]"===n(e)},r=function(e){return"[object Function]"===n(e)},o=function(){return document.activeElement},i=function(e){return"string"==typeof e?(n=e,document.querySelector(n)):e;var n},u=function(e){setTimeout(e,0)},a=function(e){return"Enter"===e.key||13===e.keyCode},c=function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode},l=function(e){return"Tab"===e.key||9===e.keyCode},s=function(e){return l(e)&&!e.shiftKey},f=function(e){return l(e)&&e.shiftKey},d=function(e){var n;e.focus(),(n=e).tagName&&"input"===n.tagName.toLowerCase()&&"function"==typeof n.select&&e.select()},v=function(e){null==e?u((function(){return e&&d(e)})):d(e)},p=function(e,n,t,r){var o,u=n.map((function(e){return i(e)})).filter((function(e){return null!=e})),a=u[0],c=u.slice(-1)[0],l=null!==(o=i(e))&&void 0!==o?o:function(e,n){if(null==e||null==n)return null;if(e.contains(n))return e;if(n.contains(e))return n;var t=new Range;return t.setStartBefore(e),t.setEndAfter(n),t.collapsed&&(t.setStartBefore(n),t.setEndAfter(e)),t.commonAncestorContainer}(a,c);return{root:l,list:u,head:a,tail:c,cover:r?l:i(t)}},y=function(n,t){var r=Array.isArray(t.node)?t.node.map((function(n){return e({},t,{node:n})})):t;return n.concat(r)},h=function(n,o,i,u,a){var l,s,f=[].concat(n).filter((function(e){return null!=e})).map((function(e){return t(e)?e:{node:e}})).map((function(n){return e({},n,{type:void 0===n.type?[null==n.key?"":"keydown",null==n.node?"":"click"].filter((function(e){return""!==e})):[].concat(n.type)})})).reduce(y,[]),d=r(o)?o:!0===o?null!==(l=null===(s=f[0])||void 0===s?void 0:s.on)&&void 0!==l?l:function(){}:o;return[r(d)?{node:null,key:c,on:d,target:i?u:a,type:["keydown"]}:null].concat(f).filter((function(e){return null!=e}))},g=function(e,t){var o=e?function(e,t){var o=r(e),i=o&&e(t),u=o&&"[object Promise]"===n(i)&&"function"==typeof i.then,a=o&&!u;return{promiseDelay:u,callbackDelay:a,commonDelay:!0===e&&!u&&!a,delayRes:i}}(e,t):{},i=o.promiseDelay,u=o.callbackDelay,a=o.commonDelay,c=o.delayRes;if(i)c.then(t);else if(u);else{if(!a)return!0;t()}},m=function(e,n,t,o,u,a,c,l){if(null==e||!0===e)return u?n:c;if(r(e)){var s=e({e:l,list:t,cover:n,root:o,last:t[a],lastI:a});return null==s||!0===s?u?n:c:s}return i(e)},k=function(){function e(){this.cache=[],this.isEmpty=!0}var n=e.prototype;return n.push=function(e,n,t){this.isEmpty=!1,this.cache.push({node:e,type:n,handler:t})},n.clean=function(){this.cache=[],this.isEmpty=!0},n.addListeners=function(){this.cache.forEach((function(e){var n;return null===(n=e.node)||void 0===n?void 0:n.addEventListener(e.type,e.handler)}))},n.removeListeners=function(){this.cache.forEach((function(e){var n;return null===(n=e.node)||void 0===n?void 0:n.removeEventListener(e.type,e.handler)})),this.clean()},e}(),E=function(){function e(){this.cache=new Map}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.push=function(e,n,t){this.has(e)||(n.addEventListener("keydown",t),this.cache.set(e,{node:n,handler:t}))},n.remove=function(e){var n=this;[].concat(e).forEach((function(e){return n.cache.get(e).node.removeEventListener("keydown",n.cache.get(e).handler)}))},e}(),w=function(){function e(){this.data=[],this.head=null,this.tail=null}var n=e.prototype;return n.update=function(e){this.data.splice(0,this.data.length),Array.prototype.push.apply(this.data,e),this.head=e[0],this.tail=e.at(-1)},n.isEmpty=function(){return 0===this.data.length},n.has=function(e){return!!this.data[e]},e}(),I=function(){var n,l,I=0-((arguments.length<=0?void 0:arguments[0])instanceof Array),x=0+I<0||arguments.length<=0+I?void 0:arguments[0+I],L=1+I<0||arguments.length<=1+I?void 0:arguments[1+I],_=null!==(n=2+I<0||arguments.length<=2+I?void 0:arguments[2+I])&&void 0!==n?n:{};if(!(Array.isArray(L)&&L.length>1))throw new Error("请至少传入一个数组，数组至少包含两个可聚焦元素，用来表示列表的头和尾。");var b=_.sequence,A=_.loop,D=_.next,T=_.prev,B=_.trigger,K=_.entry,j=_.exit,F=_.onEscape,C=_.onClick,M=_.onMove,R=_.cover,$=_.initialActive,O=_.correctionTarget,S=_.delayToFocus,P=_.delayToBlur,q=_.removeListenersEachExit,N=void 0===q||q,U=_.removeListenersEachEnter,z=_.addEntryListenersEachExit,G=void 0===z||z,H=_.manual,J=_.allowSafariToFocusAfterMousedown,Q=void 0===J||J,V=[].concat(K).filter((function(e){return null!=e})).map((function(e){return t(e)?e:{node:e}})).map((function(n){var t;return e({},n,{delay:null!==(t=n.delay)&&void 0!==t?t:S,type:void 0===n.type?[null==n.key?"":"keydown",null==n.node?"":"click"].filter((function(e){return""!=e})):[].concat(n.type),onExit:!0===n.onExit?n.on:n.onExit})})).reduce(y,[]),W=0===V.length,X=new Set(V.map((function(e){return r(e.onExit)?e.node:null})).filter((function(e){return null!=e})).map((function(e){return i(e)}))),Y=i(B||(null===(l=V[0])||void 0===l?void 0:l.node)),Z=t(R)?R:{},ee=Z.node,ne=Z.enterKey,te=Z.onEnter,re=Z.exit,oe=null!=R&&!1!==R&&!1!==ee,ie=oe&&(!0===R||!0===ee||null==ee),ue=[].concat(re).filter((function(e){return null!=e})).map((function(e){return t(e)?e:{key:e}})).map((function(n){var t;return e({},n,{target:null!==(t=n.target)&&void 0!==t?t:Y})})),ae=oe&&0===ue.length,ce=new w,le=t(D)?D:{key:D},se=le.key,fe=le.on,de=t(T)?T:{key:T},ve=de.key,pe=de.on,ye=!1===F,he=!(null==A||A),ge=!!(se||ve||b),me=null!=$?$:-1,ke=-1,Ee=!1,we=!1,Ie=new k,xe=new k,Le=new E;if(!H&&(Me(),(W?[{}]:V).some((function(e){return!e.delay})))){var _e=p(x,L,ee,ie),be=_e.root,Ae=_e.list,De=_e.head,Te=_e.tail,Be=_e.cover;ce.update(Ae),Ce(be,ce.data,De,Te,Be)}var Ke={enter:function(e){if(Y=Y||o(),e)return je({fromInvoke:!0},e.on,e.target,e.delay);for(var n=function(){var e=V[t],n=e.on,r=e.type,o=e.node,i=e.target,u=e.delay;if(null!=r&&r.some((function(e){return null==e||!1===e||"invoke"===e}))||null==o)return{v:je({fromInvoke:!0},n,i,u)}},t=0;t<V.length;++t){var r=n();if("object"==typeof r)return r.v}return je({fromInvoke:!0})},exit:function(e){var n=p(x,L,ee,ie),t=n.list,r=n.cover,o=n.root;if(e){var u=e.on,a=e.target;return d(i(a),u)}for(var c=h(j,F,oe,r,Y),l=function(){var e=c[s],n=e.on,t=e.type,r=e.target;if(null!=t&&t.some((function(e){return null==e||!1===e||"invoke"===e})))return{v:d(r,n)}},s=0;s<c.length;++s){var f=l();if("object"==typeof f)return f.v}function d(e,n){return ce.isEmpty()&&ce.update(t),Fe({fromInvoke:!0},n,e,!1,r,ce.data,o)}},removeListeners:function(){Ie.removeListeners(),xe.removeListeners()},removeListRelatedListeners:function(){Ie.removeListeners()},removeEntryListeners:function(){xe.removeListeners()},addEntryListeners:function(){Me()},addListRelatedListeners:function(){var e=p(x,L,ee,ie),n=e.root,t=e.list,r=e.cover;ce.isEmpty()&&ce.update(t),Ce(n,ce.data,ce.head,ce.tail,r)},addForward:function(e,n){var t=null;if(r(n)){var o=p(x,L,ee,ie);t=n({root:o.root,list:o.list,head:o.head,tail:o.tail,cover:o.cover,curI:me,prevI:ke})}else t=n;var u=t,a=u.node,c=u.on,l=u.key,s=u.target,f=i(a),d=i(s);Le.push(e,f,(function(e){null!=l&&l(e,me)&&(e.preventDefault(),null==c||c(),v(d))}))},removeForward:function(e){Le.remove(e)},updateList:function(e){var n=e.map((function(e){return i(e)})).filter((function(e){return null!=e}));ce.update(n)},i:function(e){return ce.has(e)&&Ee?(ke=me,me=e,null==M||M({e:{fromI:!0},prev:ce.data[ke],cur:ce.data[me],prevI:ke,curI:me}),d(L[me]),e):me}};return Ke;function je(e,n,t,r){function o(){var n=p(x,L,ee,ie),r=n.root,o=n.list,i=n.head,u=n.tail,a=n.cover;ce.update(o),H||Ce(r,ce.data,i,u,a),!1!==t&&function(n,r,o){var i=m(t,n,r,o,oe,me,r[-1===me?0:me],e),u=r.indexOf(i);u>-1&&(ke=me,me=u,null==M||M({e,prev:r[ke],cur:i,prevI:ke,curI:me}),Ee=!0),oe&&(i===n||u>-1)&&(we=!0),v(i)}(a,ce.data,r)}we||Ee||Promise.resolve(null==n?void 0:n(e)).then((function(e){r?g(r,o):o()}))}function Fe(e,n,t,o,i,u,a,c){var l;if(!Ee||r(c)&&!c({e,prev:u[ke],cur:u[me],prevI:ke,curI:me}))return!1;Ee=!1,null===(l=e.preventDefault)||void 0===l||l.call(e);var s=m(t,i,u,a,oe,me,Y,e);return s?function(){function t(){d(s),null==M||M({e,prev:u[me],cur:s,prevI:me,curI:-1}),H||(s!==i&&Re(),G&&Me())}Promise.resolve(null==n?void 0:n(e)).then((function(e){var n;o=null!==(n=o)&&void 0!==n?n:P,g(o,t)&&t()}))}():function(){function t(n){return function(t){n&&d(n),null==M||M({e,prev:u[me],cur:null,prevI:me,curI:-1}),H||(Re(),G&&Me())}}Promise.resolve(null==n?void 0:n(e)).then((function(n){if(!1!==s)if(oe)null==M||M({e,prev:u[me],cur:null,prevI:me,curI:-1}),d(i);else{var r;o=null!==(r=o)&&void 0!==r?r:P;var a=t(Y);g(o,a)&&a()}else t()()}))}()}function Ce(e,n,t,r,l){if(Ie.isEmpty){if(null==e)throw new Error("没有找到元素 "+x+"，您可以尝试 delayToFocus 选项，等待元素 "+x+" 渲染完毕后进行聚焦。");if(null==t||null==r)throw new Error("至少需要包含两个可以聚焦的元素，如果元素需要等待渲染，您可以尝试 delayToFocus 选项。");!function(){var t=function(){return!!W||Ee},p=ge?function(e,n,t,r,o,i,u,a,c,l,v){return function(n){if(n.target!==c&&v()){var t=[me,function(e){return me=e}],p=t[0],y=t[1],h=function(e){return ke=e},g=Math.max(0,p),m=e.length;if((null!=o?o:s)(n)){var k=g+1,E=r?Math.min(m-1,k):k;E%=m,null==u||u({e:n,prev:e[g],cur:e[E],prevI:g,curI:E}),null==l||l({e:n,prev:e[g],cur:e[E],prevI:g,curI:E}),y(E),h(g),d(e[E]),n.preventDefault()}else if((null!=i?i:f)(n)){var w=g-1,I=r?Math.max(0,w):w;I=(I+m)%m,null==a||a({e:n,prev:e[g],cur:e[I],prevI:g,curI:I}),null==l||l({e:n,prev:e[g],cur:e[I],prevI:g,curI:I}),y(I),h(g),d(e[I]),n.preventDefault()}}}}(n,0,0,he,se,ve,fe,pe,l,M,t):function(e,n,t,r,o,i,u){return function(a){var c=e[0],l=e.at(-1),v=a.target;v!==i&&u()&&(s(a)?(null==t||t({e:a}),v===l&&(a.preventDefault(),n||d(c)),v===o&&(a.preventDefault(),d(c))):f(a)&&(null==r||r({e:a}),v===c&&(a.preventDefault(),n||d(l)),v===o&&(a.preventDefault(),d(l))))}}(n,he,fe,pe,e,l,t),y=function(e,n){var t=e.reduce((function(e,t){var r,o=e[0],u=e[1],a=e[2],c=e[3],l=e[4],s=e[5],f=function(e){var n;return null===(n=t.type)||void 0===n?void 0:n.includes(e)};return null!=(r=t.node)&&n.contains(i(r))||null==r?(f("keydown")&&(o=o.concat(t)),f("click")&&(u=u.concat(t)),f("focus")&&(a=a.concat(t)),f("outlist")&&(s=s.concat(t))):(f("click")&&(c=c.concat(t)),f("focus")&&(l=l.concat(t)),f("outlist")&&(s=s.concat(t))),[o,u,a,c,l,s]}),new Array(6).fill([])),r=t[0],o=t[1],u=t[2],a=t[3],c=t[4],l=t[5];return{keyExits:r,clickExits:o,focusExits:u,hasClickExits:o.length>0,hasFocusExits:u.length>0,hasKeyExits:r.length>0,clickExits_wild:a,focusExits_wild:c,outListExits:l}}(h(j,F,oe,l,Y),e),g=y.keyExits,m=y.clickExits,k=y.focusExits,E=y.hasClickExits,w=y.hasFocusExits,I=y.hasKeyExits,x=y.clickExits_wild,L=y.focusExits_wild,_=y.outListExits,b=x.map((function(e){return[i(null==e?void 0:e.node),S(e)]})),A=L.map((function(e){return[i(null==e?void 0:e.node),P(e)]}));Ie.push(e,"focusin",(function(t){if(oe&&t.target===l)we=!0;else if(oe&&!1===D&&!1===we)v(l);else if(!1!==O&&ge&&!1===Ee&&!1===D){var r,o=null!==(r=null==O?void 0:O({list:n,cover:l,root:e,last:n[me],lastI:me}))&&void 0!==r?r:-1===me?n[0]:n[me],u=i(o),a=n.findIndex((function(e){return e===u}));a>-1&&(ke=me,me=a,null==M||M({e:t,prev:n[ke],cur:n[me],prevI:ke,curI:me})),Ee=!0,v(u)}})),Ie.push(e,"focusout",(function(t){X.has(t.relatedTarget)||u((function(){var r=o(),u=!e.contains(r),a=r===l;if(t.target===l&&u)we=!1;else{var c=null;(a||u)&&(c=function(t){for(var r=0;r<_.length;++r){var o=_[r],u=o.on,a=o.target,c=o.delay;return Fe(t,u,i(a),c,l,n,e,_[r].if)}}(t)),!1!==c&&(a?Ee=!1:u&&(Ee=!1,we=!1))}}))})),e.contains(l)||null==l||(Ie.push(l,"focus",(function(){we=!0})),Ie.push(l,"blur",(function(){T?T=!1:we=!1}))),Ie.push(e,"keydown",(function(e){p(e),I&&function(e){if(!(e.target===l||ye&&c(e)))for(var n=0;n<g.length&&!$(e,g[n]);++n);}(e)})),(ge||E)&&Ie.push(e,"click",(function(e){ge&&function(e){var t=n.findIndex((function(n){return n.contains(e.target)}));t>-1&&(ke=me,me=t,null==C||C({e,prev:n[ke],cur:n[me],prevI:ke,curI:me}),ke===me&&!1!==Ee||null==M||M({e,prev:n[ke],cur:n[me],prevI:ke,curI:me}))}(e),E&&function(e){for(var n=0;n<m.length&&!K(e,m[n]);++n);}(e)})),Ie.push(e,"mousedown",(function(e){var t;D=!0,u((function(){return D=!1})),(!ge||ge&&(t=n.find((function(n){return n.contains(e.target)}))))&&(Ee=!0,oe&&(we=!0),Q&&t&&void 0!==window.safari&&(d(t),e.preventDefault()))})),w&&Ie.push(e,"focusin",(function(e){for(var n=0;n<k.length&&!R(e,k[n]);++n);})),A.forEach((function(e){var n=e[0],t=e[1];Ie.push(n,"focus",t)})),b.forEach((function(e){var n=e[0],t=e[1];Ie.push(n,"click",t)})),null!=l&&Ie.push(l,"keydown",(function(e){if(e.target===l&&we&&!Ee){if((null!=ne?ne:a)(e)&&!Ee)return e.preventDefault(),T=!0,Ee=!0,null==te||te(e),d(n[me=-1===me?0:me]),void(null==M||M({e,prev:null,cur:n[me],prevI:null,curI:me}));for(var t=0;t<ue.length;++t){var o=ue[t],u=o.key,c=o.on,f=o.target,v=i(f);if(null!=u&&u(e,me))return void p(e,c,v)}ae&&s(e)&&d(r)}function p(e,n,t){null==n||n(e),t&&d(t),Re()}})),Ie.addListeners();var D=!1,T=!1;function B(t,r,o){var u=r.node,a=r.on,c=r.target,s=r.delay,f=i(u),d=i(c);return!o(t,f,r.key)&&(Fe(t,a,d,s,l,n,e,r.if),!0)}function K(e,n){return B(e,n,(function(e,n){return null!=n&&!n.contains(e.target)||null==n}))}function R(e,n){return B(e,n,(function(e,n){return null!=n&&e.target!==n||null==n}))}function $(e,n){return B(e,n,(function(e,n,t){return null!=n&&e.target!==n||!(null!=t&&t(e,me))}))}function S(e){return function(n){K(n,e)}}function P(e){return function(n){R(n,e)}}}()}}function Me(){if(xe.isEmpty){for(var e=function(){var e=V[n],t=e.node,o=e.on,u=e.key,a=e.type,c=e.target,l=e.delay,s=e.onExit,f=e.if,d=[].concat(a),v=["keydown","focus","click"],y=i(t);d.forEach((function(e){if(y&&v.includes(e)){var n="keydown"===e,t=n?function(e){return null==u?void 0:u(e,me)}:function(e){return!0};xe.push(y,e,function(e,n){return function(t){r(f)&&!f({e:t,prev:ce.data[ke],cur:ce.data[me],prevI:ke,curI:me})||!e(t)||function(e,n){var t=0;if(Ee){if(r(s)){var i=p(x,L,ee,ie),u=i.list,a=i.cover,f=i.root;Fe(e,s,c,!1,a,u,f),t=!t}}else je(e,o,c,l),U&&!H&&xe.removeListeners(),t=!t;n&&t&&e.preventDefault()}(t,n)}}(t,n))}}))},n=0;n<V.length;++n)e();xe.addListeners()}}function Re(){ae||N&&!H&&Ie.removeListeners()}};const x=document.getElementById("dialog"),L=document.getElementById("dialog_mask"),_=document.getElementById("open");I(x,["#firstFocusBtn","#close"],{loop:!1,entry:{node:_,on:function(){x.classList.add("openedDialog"),x.classList.remove("closedDialog"),L.classList.remove("closed_mask"),_.ariaExpanded=!0}},exit:{node:["#close","#firstFocusBtn","#confirm"],on:function(){x.classList.remove("openedDialog"),x.classList.add("closedDialog"),L.classList.add("closed_mask"),_.ariaExpanded=!1},type:["click","outlist"]},onEscape:!0});const b=document.getElementById("menu_btn"),A=document.getElementById("menu");function D(){b.classList.toggle("opened"),A.classList.toggle("opened"),b.ariaExpanded=!!b.classList.contains("opened")}I(A,["#dialog_anchor","#player_anchor"],{onEscape:D,entry:{node:b,on:D,onExit:!0},exit:[{node:"#dialog_anchor",type:"keydown",key:e=>"Tab"===e.key&&e.shiftKey,on:D},{node:"#player_anchor",type:"keydown",key:e=>"Tab"===e.key&&!e.shiftKey,on:D,target:"#nav_link"},{type:"outlist",on:D,target:({e})=>!e?.relatedTarget?.id?.includes("h-")&&b}]}),I("#tab_list",["#tab_1","#tab_2","#tab_3","#tab_4","#tab_5"],{next:e=>"ArrowRight"===e.key,prev:e=>"ArrowLeft"===e.key,exit:[{key:e=>"Tab"===e.key&&!e.shiftKey,target:"#tags_code"},{key:e=>"Tab"===e.key&&e.shiftKey,target:"#navigation_code"}],initialActive:1,removeListenersEachExit:!1,onMove:function({prev:e,cur:n,prevI:t,curI:r}){if(r===t||-1===r)return;(e??document.getElementById("tab_1")).setAttribute("aria-selected","false"),n.setAttribute("aria-selected","true");const o=document.getElementById("tabpanel_"+(t+1))||document.getElementById("tabpanel_1"),i=document.getElementById("tabpanel_"+(r+1));o.classList.add("is-hidden"),i.classList.remove("is-hidden")}}),I("#songs_wrapper",["#song_1","#song_2","#song_3","#song_4","#song_5","#song_6","#song_7"],{next:e=>"ArrowDown"===e.key,prev:e=>"ArrowUp"===e.key,exit:[{key:e=>"Tab"===e.key&&!e.shiftKey,target:"#more_from"},{key:e=>"Tab"===e.key&&e.shiftKey,target:"#grid_wrapper"},{type:"outlist",target:!1}],entry:{node:"#grid_wrapper",key:(e,n)=>("Tab"===e.key&&!e.shiftKey&&n>-1||"ArrowDown"===e.key||"ArrowUp"===e.key)&&"grid_wrapper"===e.target.id,type:"keydown"},onMove:function({cur:e,prev:n,curI:t}){n?.classList.remove("focused"),e?.classList.add("focused"),null!=B&&(T=-1===B.i()?0:B.i()),B?.removeListeners(),t>-1&&(B=function(e,n){const t=e+1;return I(`#song_${t}`,[`#s${t}_play`,`#s${t}_a`,`#s${t}_like`,`#s${t}_more`],{entry:[{node:`#song_${t}`,type:"focus",target:({list:e})=>e[n]},{node:`#song_${t}`,key:e=>"ArrowRight"===e.key||"ArrowLeft"===e.key,type:"keydown"},{node:`#song_${t}`,type:"click",target:!1}],next:e=>"ArrowRight"===e.key,prev:e=>"ArrowLeft"===e.key,exit:{type:"outlist",target:!1},initialActive:T,correctionTarget:!1,addEntryListenersEachExit:!1})}(t,T))},correctionTarget:({lastI:e,last:n})=>-1===e?"#grid_wrapper":n,removeListenersEachExit:!1}).addForward("grid",{node:"#grid_wrapper",key:(e,n)=>"Tab"===e.key&&!e.shiftKey&&-1===n,target:"#more_from"});let T=0,B=null}},e=>{e(e.s=292)}]);