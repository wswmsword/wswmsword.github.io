<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="google-site-verification" content="" />
  <meta name="referrer" content="unsafe-url">
  
  <title>Git 学习记录</title>
  <meta name="author" content="wsWmsword">
  <meta name="description" content="Pain is temporary Pride is forever">
  
  
  <meta property="og:title" content="Git 学习记录"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:site_name" content="Strawberry Fields"/>
  <link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed">
  <link rel="alternate" href="/atom.xml" title="Strawberry Fields" type="application/atom+xml">
  <link rel="stylesheet" href="/css/m.min.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <a id="top"></a>
  <div id="main">
    <div class="main-ctnr">
      <div class="behind">
  <a href="/" class="back black-color">
    <svg class="i-close" viewBox="0 0 32 32" width="22" height="22" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
        <path d="M2 30 L30 2 M30 30 L2 2"></path>
    </svg>
  </a>
  
    <div class="description">
      &nbsp;郁郁青青 长过千寻
    </div>
    
</div>


  <article class="standard post">
    <div class="title">
      
  
    <h1 class="page-title center">
        Git 学习记录
    </h1>
  


    </div>
    <div class="meta center">
      <time datetime="2022-08-18T08:57:04.000Z" itemprop="datePublished">
  <svg class="i-calendar" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
    <path d="M2 6 L2 30 30 30 30 6 Z M2 15 L30 15 M7 3 L7 9 M13 3 L13 9 M19 3 L19 9 M25 3 L25 9"></path>
  </svg>
  &nbsp;
  2022-08-18
</time>


    
    &nbsp;
    <svg class="i-tag" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
      <circle cx="24" cy="8" r="2"></circle>
      <path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path>
    </svg>
    &nbsp;
    <a href="/categories/笔记本/">笔记本</a>





    </div>
    <hr>
    
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A8%E9%80%81%E5%92%8C%E6%8B%89%E5%8F%96"><span class="toc-text">推送和拉取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E6%94%AF"><span class="toc-text">分支</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%8B%E9%9A%86"><span class="toc-text">克隆</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4"><span class="toc-text">提交</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%88%E5%B9%B6"><span class="toc-text">合并</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E5%9F%BA"><span class="toc-text">变基</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E5%9B%9B%E7%A7%8D%E7%8A%B6%E6%80%81"><span class="toc-text">文件的四种状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97"><span class="toc-text">日志</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%BD%E7%95%A5%E6%96%87%E4%BB%B6%EF%BC%8C-gitignore"><span class="toc-text">忽略文件，.gitignore</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#diff-%E5%B7%A5%E5%85%B7"><span class="toc-text">diff 工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E4%B8%81"><span class="toc-text">补丁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE"><span class="toc-text">标签</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%AE%E8%97%8F"><span class="toc-text">贮藏</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%B4%E9%80%89"><span class="toc-text">遴选</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E6%BB%9A%E3%80%81%E6%92%A4%E9%94%80%E3%80%81%E9%87%8D%E7%BD%AE"><span class="toc-text">回滚、撤销、重置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-text">配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%AB%E5%90%8D"><span class="toc-text">别名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%90%E6%A8%A1%E5%9D%97"><span class="toc-text">子模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GUI"><span class="toc-text">GUI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%90%8D%E7%A7%B0%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-text">修改文件名称的大小写</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83"><span class="toc-text">其它</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-text">引用</span></a></li></ol></li></ol>
    
    <div class="picture-container">
      
    </div>
    <h1 id=""><a href="#" class="headerlink" title=""></a></h1><p>工作里习惯了通过 Fork（app）使用 Git，这两个月的时间里开始熟悉 Git 的命令行客户端。虽然命令行在视觉上不如 UI 直观，但命令行可以保持双手持续输入不离开键盘，熟悉命令行也更利于寻找最适合自己的 GUI。</p>
<p>另外，界面的直观指的是个人使用上的直观。界面有琳琅满目的信息，鼠标有四面八方的方向，当某个人不熟悉界面的时候，我只能当面告诉他如何执行这些 git 指令：“点这里，这里，这里，往上一点，点顶部菜单栏左侧第二个按钮”，这不如命令行直观。</p>
<p>下面的内容包括了 Git 常用的命令，以及各命令或详或简但有必要的解释说明，其中也包括了很多相关的引用链接用于扩展阅读。</p>
<h2 id="推送和拉取"><a href="#推送和拉取" class="headerlink" title="推送和拉取"></a>推送和拉取</h2><p>推送：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 推送远程，并设置当前分支的 upstream 为 main，设置之后每次推送当前分支只需要 git push 即可</span></span><br><span class="line">git push -u origin main</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送远程至 upstream，如果没有设置，在 git 2.0 之前，所有同名分支被推送，git 2.0 之后，报错</span></span><br><span class="line">git push</span><br><span class="line"></span><br><span class="line"><span class="comment"># 强制推送</span></span><br><span class="line">git push -f</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送至远程，但是设置远程分支名称</span></span><br><span class="line">git push origin hehe:haha</span><br></pre></td></tr></table></figure>

<p>拉取：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;local-branch&gt; origin/&lt;remote-branch&gt; <span class="comment"># 拉取远程指定分支并检出</span></span><br></pre></td></tr></table></figure>

<p><code>git push</code>的默认行为：默认行为根据 git 配置里的<code>push.default</code>的值决定，在 git 2.0 之前的默认值是<code>matching</code>，之后的是<code>simple</code>，所以在 2.0 之后如果没有设置上游分支 upstream 就会报错。</p>
<p><code>push.default</code>的可选值：</p>
<ul>
<li>nothing，禁止<code>git push</code>，必须显式指定推送分支，比如<code>git push origin master</code>；</li>
<li>current，把本地分支推送至远程，远程分支名和本地分支名相同；</li>
<li>upstream，推送到 upstream 上；</li>
<li>tracking，同上一个<code>upstream</code>，不推荐使用；</li>
<li>simple，推送到 upstream 上，但是要保证 upstream 的分支名和本地分支名相同；</li>
<li>matching，推送所有的本地和远程相同名称的分支。</li>
</ul>
<p>设置<code>local</code>（仓库）级别的默认推送行为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config push.default nothing</span><br></pre></td></tr></table></figure>

<p>相关链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000002783245">Git push与pull的默认行为</a>：解释了什么是<code>upstream</code>、<code>downstream</code>；</li>
<li><a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-config#Documentation/git-config.txt-pushdefault"><code>push.default</code></a>：社区文档的解释；</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/292357/what-is-the-difference-between-git-pull-and-git-fetch">What is the difference between ‘git pull’ and ‘git fetch’?</a>：<code>git pull</code>和<code>git fetch</code>的区别，<code>git pull = git fetch + git merge FETCH_HEAD</code>。</li>
</ul>
<h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><p>查看分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有分支</span></span><br><span class="line">git branch -a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看本地分支</span></span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看远程分支</span></span><br><span class="line">git branch -r</span><br></pre></td></tr></table></figure>

<p>删除分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除本地分支（删除不了未合并过的分支）</span></span><br><span class="line">git tag -d feature-album</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除未合并过的本地分支</span></span><br><span class="line">git tag -D feature-album <span class="comment"># 大写的 D</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程分支</span></span><br><span class="line">git push origin --delete feature-album <span class="comment"># 第一种方法</span></span><br><span class="line">git push origin :refs/branch/feature-album <span class="comment"># 第二种方法，这种方法适用在，分支名和标签名相同时，执行第一种方法会冲突报错，则使用这个方法，因为第一种方法也可以用来删除标签</span></span><br></pre></td></tr></table></figure>

<h2 id="克隆"><a href="#克隆" class="headerlink" title="克隆"></a>克隆</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> git@github.com:wswmsword/git-learning.git</span><br></pre></td></tr></table></figure>

<p>克隆所有分支，并切换到指定分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b main git@github.com:wswmsword/git-learning.git <span class="comment"># 克隆所有分支，并切换到 main</span></span><br></pre></td></tr></table></figure>

<p>克隆指定分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b main --single-branch git@github.com:wswmsword/git-learning.git <span class="comment"># 克隆 main</span></span><br></pre></td></tr></table></figure>

<p>克隆指定文件夹（git 2.25+ (Q1 2020)）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> git-sparse-checkout &amp;&amp; <span class="built_in">cd</span> git-sparse-checkout <span class="comment"># 创建并进入文件夹</span></span><br><span class="line">git init -q <span class="comment"># 静默初始化</span></span><br><span class="line">git remote add origin git@github.com:wswmsword/git-learning.git</span><br><span class="line">git sparse-checkout <span class="built_in">set</span> assets <span class="comment"># 设置指定文件夹，文件夹路径为 assets</span></span><br><span class="line">git pull origin main</span><br><span class="line"><span class="built_in">ls</span> <span class="comment"># assets</span></span><br><span class="line">git sparse-checkout <span class="built_in">disable</span> <span class="comment"># 关闭 sparse-checkout</span></span><br></pre></td></tr></table></figure>

<p>旧版本的 git 克隆指定文件夹：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> git-sparse-checkout-old &amp;&amp; <span class="built_in">cd</span> git-sparse-checkout-old</span><br><span class="line">git init -q</span><br><span class="line">git remote add origin git@github.com:wswmsword/git-learning.git</span><br><span class="line">git config --global core.sparseCheckout <span class="literal">true</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;assets&quot;</span> &gt;&gt; .git/info/sparse-checkout</span><br><span class="line">git pull origin main</span><br></pre></td></tr></table></figure>

<p>相关链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/36190800/how-to-disable-sparse-checkout-after-enabled">How to disable sparse checkout after enabled?</a>：打开稀疏检出后如何关闭？回答中有使用老版本的 git 关闭答案。回答中提到了一个脚本。</li>
<li><a target="_blank" rel="noopener" href="https://github.com/trilinos/Trilinos/blob/master/sparse_checkout.sh">sparse_checkout.sh</a>：第一条中提到的脚本。</li>
<li><a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-sparse-checkout">sparse-checkout</a>：git 的稀疏检出社区文档。</li>
</ul>
<h2 id="提交"><a href="#提交" class="headerlink" title="提交"></a>提交</h2><p>暂存：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git add . <span class="comment"># 暂存所有改动文件</span></span><br><span class="line">git add -e &lt;filename&gt; <span class="comment"># 把一个文件里的部分行移至暂存，暂存一部分</span></span><br><span class="line">git add -p &lt;filename&gt; <span class="comment"># 交互式，执行后将输出选项供选择，选择 e 可以暂存一部分</span></span><br><span class="line">git add -u <span class="comment"># 除未跟踪的文件外，把所有文件暂存</span></span><br><span class="line">git add --ignore-removal . <span class="comment"># 除已删除的文件外，暂存所有的文件</span></span><br></pre></td></tr></table></figure>

<p>提交：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提交，添加信息</span></span><br><span class="line">git commit -m <span class="string">&quot;junior commit&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交指定文件（这里的文件是 file-abc）</span></span><br><span class="line">git commit file-abc -m <span class="string">&quot;add single file&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交，打开默认编辑器编辑提交信息</span></span><br><span class="line">git commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 暂存已跟踪的文件，同时提交（省略了 git add 命令，但是这里只能暂存已跟踪文件）</span></span><br><span class="line">git commit -am <span class="string">&quot;junior commit&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交，打开默认编辑器编辑提交信息，包含 diff 信息</span></span><br><span class="line">git commit -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交，允许空提交信息</span></span><br><span class="line">git commit --allow-empty-message</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改上一次提交</span></span><br><span class="line">git commit --amend -m <span class="string">&quot;better message was committed&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开默认编辑器，修改上次提交信息</span></span><br><span class="line">git commit --amend</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改上次提交的邮箱</span></span><br><span class="line">git commit --amend --author <span class="string">&quot;New Authorname &lt;authoremail@mydomain.com&gt;&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>git add -A</code>、<code>git add .</code>、<code>git add -u</code>的区别（Git 2.x）：</p>
<table>
<thead>
<tr>
<th align="left">命令（Git 2.x）</th>
<th align="left">新文件</th>
<th align="left">修改的文件</th>
<th align="left">删除的文件</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">git add -A</td>
<td align="left">√</td>
<td align="left">√</td>
<td align="left">√</td>
<td align="left">暂存所有（新的、修改的、删除的）文件</td>
</tr>
<tr>
<td align="left">git add .</td>
<td align="left">√</td>
<td align="left">√</td>
<td align="left">√</td>
<td align="left">暂存所有（新的、修改的、删除的）文件</td>
</tr>
<tr>
<td align="left">git add -u</td>
<td align="left">×</td>
<td align="left">√</td>
<td align="left">√</td>
<td align="left">暂存修改的和删除的文件，不暂存未跟踪的新文件</td>
</tr>
<tr>
<td align="left">git add –ignore-removal .</td>
<td align="left">√</td>
<td align="left">√</td>
<td align="left">×</td>
<td align="left">暂存新文件和修改的文件，不暂存删除的文件</td>
</tr>
</tbody></table>
<p>在 Git 2.0 之前的版本，<code>git add .</code>不能暂存已删除的文件。</p>
<p>相关链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/git/git/blob/master/Documentation/RelNotes/2.0.0.txt#L32-L36">Git 2.0, git add -A is default</a>：git 源码里的文档，提到了<code>git add &lt;path&gt;</code>在 Git 2.0 版本之后，执行的效果和<code>git add -A &lt;path&gt;</code>相同；</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/2190440">What’s the difference between <code>git add .</code> and <code>git add -u</code>?</a>。</li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/my466879168/article/details/107584358">git add .与git add -A的区别(版本不同时候的区别)</a>：1.x 和 2.x 版本之间 add 命令的区别。</li>
</ul>
<h2 id="合并"><a href="#合并" class="headerlink" title="合并"></a>合并</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定分支合并到当前分支</span></span><br><span class="line">git merge feature-album</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安全合并</span></span><br><span class="line">git merge --no-ff --no-commit my-branch <span class="comment"># --no-commit 不自动提交，--no-ff 不使用 fast-forward（快进）</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并的时候把一个分支合并成一条记录</span></span><br><span class="line">git merge --squash feature-album</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并分支不提交记录</span></span><br><span class="line">git merge feature-album --no-commit</span><br><span class="line"></span><br><span class="line"><span class="comment"># 终止合并（解决冲突的阶段）</span></span><br><span class="line">git merge --abort</span><br></pre></td></tr></table></figure>

<p>合并其它分支的一个文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout --patch testing-merge-file features/album/audio-formats <span class="comment"># 合并 testing-merge-file 分支的 features/album/audio-formats 文件</span></span><br></pre></td></tr></table></figure>

<p>执行完上面的命令后进入优选项的交互界面，选择 e（manually edit the current hunk），进行文件的冲突编辑，最后保存，文件会在暂存区内。</p>
<p>如果命令中不加<code>--patch</code>，执行完命令的行为是当前分支的文件被指定分支的文件覆盖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout testing-merge-file features/album/audio-formats # 当前分支的文件 features/album/audio-formats 被 testing-merge-file 分支的覆盖</span><br></pre></td></tr></table></figure>

<p>关于<code>git merge &lt;branch&gt;</code>在<code>fast-forward</code>情况下和<code>git rebase &lt;branch&gt;</code>的区别：</p>
<p>目标分支超过主分支，并且主分支没有新的提交记录，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">            *E-*F-*G-*H-*I    BRANCH</span><br><span class="line">           /</span><br><span class="line">*A-*B-*C-*D                   MAIN</span><br></pre></td></tr></table></figure>

<p>，<code>fast-forward</code>和<code>git rebase</code>合并的效果一样，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*A-*B-*C-*D-*E-*F-*G-*H-*I MAIN | BRANCH</span><br></pre></td></tr></table></figure>

<p>，当主分支有了新的提交（J、K），</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">            *E-*F-*G-*H-*I    BRANCH</span><br><span class="line">           /</span><br><span class="line">*A-*B-*C-*D-*J-*K             MAIN</span><br></pre></td></tr></table></figure>

<p>，就无法使用<code>fast-forward</code>，合并之后必须有一个单独的合并节点，但是<code>git rebase</code>仍然可以合并，并且能保持提交线的整洁，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*A-*B-*C-*D-*J-*K-*E&#x27;-*F&#x27;-*G&#x27;-*H&#x27;-*I&#x27;             MAIN | BRANCH</span><br></pre></td></tr></table></figure>

<p>，有冲突的节点因为解决冲突会生成新的<code>commit-id</code>，有相同提交的记录会被目标分支的节点覆盖，<code>rebase</code>的节点也不一定是连续的，可能会穿插到主分支已经提交的节点中（按提交先后）。</p>
<p>关于三方合并：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">            master</span><br><span class="line">             |</span><br><span class="line">*C0-*C1-*C2-*C4</span><br><span class="line">          \</span><br><span class="line">           *C3-*C5</span><br><span class="line">                |</span><br><span class="line">               iss53</span><br></pre></td></tr></table></figure>

<p>在这样的分支结构中，要把<code>iss53</code>合并到<code>master</code>，要使用<code>C4</code>、<code>C5</code>和公共祖先<code>C2</code>，这三个节点做一个三方合并。</p>
<p>三方合并有利于自动合并：例如，节点 C2 有文件 F 包含内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">一</span><br><span class="line">二</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>，节点 C4 的文件 F 包含内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">二</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>，节点 C5 的文件 F 包含内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">一</span><br><span class="line">二</span><br><span class="line">三</span><br></pre></td></tr></table></figure>

<p>，现在把<code>iss53</code>合并至<code>master</code>，因为三方合并，文件 F 的内容变成了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">二</span><br><span class="line">三</span><br></pre></td></tr></table></figure>

<p>，因为 C4 在 C2 的基础上清空了第一行，C5 在 C2 的基础上填补了第三行，C2、C4、C5 都有第二行，所以合并的结果是清空第一行、保留第二行和填补第三行，这其中需要公共祖先 C2 的参与。</p>
<p>提示：当合并解决完冲突后，修改提交信息，“添加一些细节给未来检视这个合并的读者一些帮助，告诉他们你是如何解决合并冲突的，以及理由是什么”。</p>
<p>相关链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E5%90%88%E5%B9%B6_(%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6)">合并 (版本控制)</a>：维基的合并解释，包括三方合并；</li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/30200228/answer/866309494">怎么理解Git里的 “three-way merge” ？ - Lazykid的回答 - 知乎</a>：三方合并解释；</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/33168094">How to merge specific files from Git branches</a>：stackoverflow 的推荐回答；</li>
<li><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E6%96%B0%E5%BB%BA%E4%B8%8E%E5%90%88%E5%B9%B6">3.2 Git 分支 - 分支的新建与合并</a>：社区文档；</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/70627815">Git Merge Fast-Forward vs Git Rebase</a>：StackOverflow 上关于<code>fast-forward</code>和<code>rebase</code>区别的答案。</li>
</ul>
<h2 id="变基"><a href="#变基" class="headerlink" title="变基"></a>变基</h2><p>利用变基合并几条提交记录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase -i &lt;commit_id_start&gt; &lt;commit_id_end&gt; <span class="comment"># 前开后闭</span></span><br></pre></td></tr></table></figure>

<p>下面是利用变基合并 5 条记录的例子：</p>
<p>合并<code>22bafc6</code>以上的记录至<code>4f4a863</code>共 5 条，执行上面的命令后（这里是<code>git rebase -i 22bafc6 4f4a863</code>），默认编辑器将打开类似下面的文件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">pick 478a9ab add album/history</span><br><span class="line">pick 63e6dd5 add album/length</span><br><span class="line">pick 0d72816 add album/tracks</span><br><span class="line">pick d49335e add album/audio-formats</span><br><span class="line">pick 4f4a863 add album/types</span><br><span class="line"></span><br><span class="line"># 变基 22bafc6..4f4a863 到 22bafc6（5 个提交）</span><br><span class="line">#</span><br><span class="line"># 命令:</span><br><span class="line"># p, pick &lt;提交&gt; = 使用提交</span><br><span class="line"># r, reword &lt;提交&gt; = 使用提交，但编辑提交说明</span><br><span class="line"># e, edit &lt;提交&gt; = 使用提交，但停止以便在 shell 中修补提交</span><br><span class="line"># s, squash &lt;提交&gt; = 使用提交，但挤压到前一个提交</span><br><span class="line"># f, fixup [-C | -c] &lt;提交&gt; = 类似于 &quot;squash&quot;，但只保留前一个提交</span><br><span class="line">#                    的提交说明，除非使用了 -C 参数，此情况下则只</span><br><span class="line">#                    保留本提交说明。使用 -c 和 -C 类似，但会打开</span><br><span class="line">#                    编辑器修改提交说明</span><br><span class="line"># x, exec &lt;命令&gt; = 使用 shell 运行命令（此行剩余部分）</span><br><span class="line"># b, break = 在此处停止（使用 &#x27;git rebase --continue&#x27; 继续变基）</span><br><span class="line"># d, drop &lt;提交&gt; = 删除提交</span><br><span class="line"># l, label &lt;label&gt; = 为当前 HEAD 打上标记</span><br><span class="line"># t, reset &lt;label&gt; = 重置 HEAD 到该标记</span><br><span class="line"># m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]</span><br><span class="line"># .       创建一个合并提交，并使用原始的合并提交说明（如果没有指定</span><br><span class="line"># .       原始提交，使用注释部分的 oneline 作为提交说明）。使用</span><br><span class="line"># .       -c &lt;提交&gt; 可以编辑提交说明。</span><br><span class="line">#</span><br><span class="line"># 可以对这些行重新排序，将从上至下执行。</span><br><span class="line">#</span><br><span class="line"># 如果您在这里删除一行，对应的提交将会丢失。</span><br><span class="line">#</span><br><span class="line"># 然而，如果您删除全部内容，变基操作将会终止。</span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<p>编辑，将前 2-5 行的<code>pick</code>改为<code>s</code>（s 代表上面注释里的 squash），表示这 4 条记录将合并到第一条记录中，最后保存：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pick 478a9ab add album/history</span><br><span class="line">s 63e6dd5 add album/length</span><br><span class="line">s 0d72816 add album/tracks</span><br><span class="line">s d49335e add album/audio-formats</span><br><span class="line">s 4f4a863 add album/types</span><br><span class="line"></span><br><span class="line"># ...省略</span><br></pre></td></tr></table></figure>

<p>然后，默认编辑器会进入第二个文件，用于修改合并这 5 条记录的提交信息。</p>
<p>进行编辑，在第一行添加提交信息（<code>add album features</code>），最后保存：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">add album features</span><br><span class="line"><span class="comment"># 这是一个 5 个提交的组合。</span></span><br><span class="line"><span class="comment"># 这是第一个提交说明：</span></span><br><span class="line"></span><br><span class="line">add album/history</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这是提交说明 #2：</span></span><br><span class="line"></span><br><span class="line">add album/length</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这是提交说明 #3：</span></span><br><span class="line"></span><br><span class="line">add album/tracks</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这是提交说明 #4：</span></span><br><span class="line"></span><br><span class="line">add album/audio-formats</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这是提交说明 #5：</span></span><br><span class="line"></span><br><span class="line">add album/types</span><br><span class="line"></span><br><span class="line"><span class="comment"># ...省略</span></span><br></pre></td></tr></table></figure>

<p>完成上面的步骤之后，就生成了一条记录，这条记录包含了原分支从<code>22bafc6</code>到<code>4f4a863</code>的 5 条记录，git 的<code>HEAD</code>（头指针）会指向这条提交记录上。但是现在，这条记录不属于任何分支，所以一旦切换分支，这条记录就会丢失。</p>
<p>如果要把这条记录合回原分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b rebased-album-features <span class="comment"># 从 HEAD 检出分支</span></span><br><span class="line">git checkout feature-album <span class="comment"># 检出原分支（feature-album）</span></span><br><span class="line">git reset --hard 22bafc6 <span class="comment"># 回滚到五条合并命令前（注意：操作将清空工作区和暂存区）</span></span><br><span class="line">git rebase rebased-album-features</span><br></pre></td></tr></table></figure>

<img src="git-rebase-i.gif" style="max-width:100%;" title="git rebase -i"/>

<hr>
<p>变基代替合并：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase feature-album <span class="comment"># 分支 feature-album 变基到当前分支</span></span><br></pre></td></tr></table></figure>

<h2 id="文件的四种状态"><a href="#文件的四种状态" class="headerlink" title="文件的四种状态"></a>文件的四种状态</h2><p><code>Untracked</code>、<code>Staged</code>、<code>Unmodified</code>、<code>Modified</code></p>
<ul>
<li>Untracked（未跟踪）<ul>
<li>第一次新建的文件，没有<code>git add</code>过的文件，或者<code>git rm --cached</code>过的文件；</li>
</ul>
</li>
<li>Staged（暂存）<ul>
<li><code>git add</code>过的文件都是<code>staged</code>状态；</li>
</ul>
</li>
<li>Unmodified（未修改）<ul>
<li><code>git commit</code>后的文件是未修改状态；</li>
</ul>
</li>
<li>Modified（已修改）<ul>
<li><code>git commit</code>之后，对文件进行修改，当前为已修改状态。</li>
</ul>
</li>
</ul>
<p>也有文档解释中多出第五种状态—：“<a target="_blank" rel="noopener" href="http://wkevin.github.io/GitChat/gitchat.html#%E4%BF%AE%E6%94%B9%E5%AE%8C%E4%BA%86%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E6%98%AF%E7%9B%B4%E6%8E%A5%E6%8F%90%E4%BA%A4%E8%80%8C%E6%98%AF-git-add">已提交（committed）</a>”，已提交相当于<code>Unmodified</code>未修改状态。</p>
<h2 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h2><p>简洁日志，包括短 id 和提交信息：“<code>git log --oneline</code>”。</p>
<p>图形形式的提交记录，包括短 id，提交信息，相对时间，作者名称：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit</span><br></pre></td></tr></table></figure>

<img src="git-log-graph.png" style="max-width:100%;" title="git log --graph"/>

<p>用关键字过滤日志：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git log --all --grep=&quot;microsoft&quot; # 查询包含“microsoft”的提交记录</span><br><span class="line">git log --all --oneline --grep=&quot;microsoft&quot; # 查询包含“microsoft”的提交记录，查询结果只包含 8 位 hash 和提交信息</span><br></pre></td></tr></table></figure>

<p>使用<code>reflog</code>查看操作历史（<code>reflog</code>是本地的，无法通过<code>git pull</code>得到）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reflog</span><br></pre></td></tr></table></figure>

<p><code>git log</code>其它配置的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span> -p [&lt;file-name&gt; | &lt;commit&gt;]<span class="comment"># 显示差异</span></span><br><span class="line">git <span class="built_in">log</span> -g <span class="comment"># 查看所有提交记录，包括 amend 的</span></span><br><span class="line">git <span class="built_in">log</span> --<span class="built_in">stat</span> <span class="comment"># 显示文件更改列表</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=oneline <span class="comment"># 一行显示提交信息</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=short</span><br><span class="line">git <span class="built_in">log</span> --pretty=medium</span><br><span class="line">git <span class="built_in">log</span> --pretty=full</span><br><span class="line">git <span class="built_in">log</span> --pretty=fuller</span><br><span class="line">git <span class="built_in">log</span> --pretty=reference</span><br><span class="line">git <span class="built_in">log</span> --pretty=email</span><br><span class="line">git <span class="built_in">log</span> --pretty=raw</span><br><span class="line">git reflog <span class="comment"># 更多的记录</span></span><br><span class="line">git <span class="built_in">log</span> --oneline <span class="comment"># 一行显示，更紧凑，哈希更短</span></span><br><span class="line">git <span class="built_in">log</span> --graph</span><br><span class="line">git <span class="built_in">log</span> --graph --oneline <span class="comment"># 紧凑，短 commit-id</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=<span class="string">&quot;%C(yellow) Hash: %h %C(blue)Date: %ad %C(red) Message: %s &quot;</span> --<span class="built_in">date</span>=human</span><br><span class="line">git <span class="built_in">log</span> --pretty=<span class="string">&quot;%C(yellow) Hash: %h %C(blue)Date: %ad %C(red) Message: %s &quot;</span> --<span class="built_in">date</span>=short</span><br><span class="line">git <span class="built_in">log</span> --relative-date <span class="comment"># 相对时间</span></span><br><span class="line">git shortlog <span class="comment"># 按作者，只展示注释日志</span></span><br><span class="line">git <span class="built_in">log</span> --author=wswmsword <span class="comment"># 只看某人（wswmsword）的提交</span></span><br><span class="line">git <span class="built_in">log</span> --pretty=format:<span class="string">&#x27;%h %ad %an %s&#x27;</span> --<span class="built_in">date</span>=<span class="built_in">local</span> <span class="comment"># hash、日期、作者、信息，短格式的日期</span></span><br></pre></td></tr></table></figure>

<p><code>format</code> 的参数：</p>
<ul>
<li>%h：commit hash</li>
<li>%ai: author date</li>
<li>%an: author name</li>
<li>%ci: commit date</li>
<li>%cn: commit name</li>
<li>%s: log message</li>
</ul>
<p>上面提到的图形形式的提交记录命令很长，如果常用，为它设置别名会更方便：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global alias.gg &quot;log --color --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit&quot;</span><br></pre></td></tr></table></figure>

<p>，这样设置后再执行命令<code>git gg</code>就相当于执行了<code>git log --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit</code>。</p>
<p>相关链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1057564/pretty-git-branch-graphs">Pretty Git branch graphs</a>。</li>
</ul>
<h2 id="忽略文件，-gitignore"><a href="#忽略文件，-gitignore" class="headerlink" title="忽略文件，.gitignore"></a>忽略文件，<code>.gitignore</code></h2><p>有两种忽略文件或文件夹的方法，一，编辑项目内的<code>.git/info/exclude</code>文件，在文件里添加需要忽略的文件或文件夹，二，在项目里添加<code>.gitignore</code>文件，在文件里添加需要忽略的文件或文件夹。</p>
<p>第一种编辑<code>.git/info/exclude</code>的方法适合忽略偏个人的、不普遍的文件。例如，如果项目中每位开发者的开发工具不同，而有的开发工具会生成各自的配置文件，这样的配置文件可能不适合放在<code>.gitignore</code>中，否则多一个不同的开发工具就会多一条忽略记录。</p>
<p>第二种创建<code>.gitignore</code>文件的方法适合忽略通用的文件。例如<code>*.log</code>之类的日志文件。<code>.gitignore</code>可以被创建在不同的文件夹里，同时也会被当作项目的一部分，被 Git 跟踪管理。</p>
<p>创建<code>.gitignore</code>文件，在其中加入要忽略的文件或文件夹。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br></pre></td></tr></table></figure>

<p>相关链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://niliu.me/articles/2841.html">Git常用命令整理八(忽略文件)</a>；</li>
<li>“<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/22906851/when-would-you-use-git-info-exclude-instead-of-gitignore-to-exclude-files">When would you use .git/info/exclude instead of .gitignore to exclude files?</a>”。</li>
</ul>
<h2 id="diff-工具"><a href="#diff-工具" class="headerlink" title="diff 工具"></a>diff 工具</h2><ul>
<li>下载 diff 前端，这里是 <a target="_blank" rel="noopener" href="http://meldmerge.org/">Meld</a>（其它 diff 工具：<a target="_blank" rel="noopener" href="https://www.scootersoftware.com/">Beyond Compare</a>、<a target="_blank" rel="noopener" href="https://www.araxis.com/">Araxis Merge</a>、<a target="_blank" rel="noopener" href="http://www.sourcegear.com/diffmerge/downloads.php">DiffMerge</a>）</li>
<li>添加配置，编辑<code>~/.gitconfig</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[diff]</span><br><span class="line">  tool = meld</span><br><span class="line">[difftool]</span><br><span class="line">  prompt = false</span><br><span class="line">[difftool &quot;meld&quot;]</span><br><span class="line">  trustExitCode = true</span><br><span class="line">  cmd = open -W -a Meld --args \&quot;$LOCAL\&quot; \&quot;$PWD/$REMOTE\&quot;</span><br><span class="line">[merge]</span><br><span class="line">  tool = meld</span><br><span class="line">[mergetool]</span><br><span class="line">  prompt = false</span><br><span class="line">[mergetool &quot;meld&quot;]</span><br><span class="line">  trustExitCode = true</span><br><span class="line">  cmd = open -W -a Meld --args --auto-merge \&quot;$PWD/$LOCAL\&quot; \&quot;$PWD/$BASE\&quot; \&quot;$PWD/$REMOTE\&quot; --output=\&quot;$PWD/$MERGED\&quot;</span><br></pre></td></tr></table></figure>

<p>这样设置后，执行<code>git difftool</code>打开 diff 工具进行文件比较。</p>
<h2 id="补丁"><a href="#补丁" class="headerlink" title="补丁"></a>补丁</h2><p>生成一个补丁文件，自己或者分享其他人使用，举例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff HEAD~ HEAD &gt; patch-abc <span class="comment"># 上次提交和倒数第二次提交的变更，生成补丁</span></span><br></pre></td></tr></table></figure>

<p>这是生成的补丁文件，名称<code>patch-abc</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">diff --git a/.gitignore b/.gitignore</span><br><span class="line">new file mode 100644</span><br><span class="line">index 0000000..5ca0973</span><br><span class="line">--- /dev/null</span><br><span class="line">+++ b/.gitignore</span><br><span class="line">@@ -0,0 +1,2 @@</span><br><span class="line">+.DS_Store</span><br><span class="line">+</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout HEAD~ <span class="comment"># 把头移动到倒数第二次提交</span></span><br><span class="line">git apply --check patch-abc <span class="comment"># 检查能不能添加补丁</span></span><br><span class="line">git apply patch-abc <span class="comment"># 添加补丁，如果不能添加会提示失败</span></span><br></pre></td></tr></table></figure>

<h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看本地标签</span></span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看远程标签</span></span><br><span class="line">git ls-remote --tags origin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 特定模式（通配符）查找标签</span></span><br><span class="line">git tag -l <span class="string">&quot;chill-v*&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打标签（附注标签，包含标签作者、邮箱等信息，annotated tag）</span></span><br><span class="line">git tag -a chill-tag -m <span class="string">&quot;truly hot&quot;</span> <span class="comment"># 如果添加标签信息，只有 -m 参数的时候，不加 -a，生成的标签同样是附注标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 打标签（轻量标签，commit 的指针，lightweight tag）</span></span><br><span class="line">git tag hot-day <span class="comment"># 当前 commit 生成名为 hot-day 的标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 给之前的 commit 打标签</span></span><br><span class="line">git tag -a old-tag <span class="string">&quot;all those years ago&quot;</span> &lt;commit_id&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送所有本地标签</span></span><br><span class="line">git push origin --tags</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送指定标签</span></span><br><span class="line">git push origin more-tag <span class="comment"># 推送名为 more-tag 的标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除本地标签</span></span><br><span class="line">git tag -d more-tag</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除远程标签</span></span><br><span class="line">git push origin --delete more-tag <span class="comment"># 第一种方法</span></span><br><span class="line">git push origin :refs/tags/more-tag <span class="comment"># 第二种方法，这种方法适用在，分支名和标签名相同时，执行第一种方法会冲突报错，则使用这个方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 检出标签</span></span><br><span class="line">git checkout hot-day</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看标签的详细信息</span></span><br><span class="line">git show hot-day</span><br><span class="line"></span><br><span class="line"><span class="comment"># 找到删除的标签所在的 commit</span></span><br><span class="line">git fsck --unreachable | grep tag</span><br></pre></td></tr></table></figure>

<h2 id="贮藏"><a href="#贮藏" class="headerlink" title="贮藏"></a>贮藏</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看贮藏列表</span></span><br><span class="line">git stash list</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加贮藏，添加信息</span></span><br><span class="line">git stash push -m <span class="string">&quot;stash then go the other branch to fix bug&quot;</span> <span class="comment"># 不添加信息，直接执行 git stash push</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除贮藏</span></span><br><span class="line">git stash drop stash@&#123;0&#125; <span class="comment"># 删除贮藏 stash@&#123;0&#125;，stash@&#123;0&#125; 使用 git stash list 查看，如果不指定 stash@&#123;0&#125; 将删除最近的贮藏</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用贮藏</span></span><br><span class="line">git stash apply stash@&#123;0&#125; <span class="comment"># 不指定 stash@&#123;0&#125;，即直接执行 git stash apply 将应用最顶部（最近添加的）贮藏</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 推出贮藏（应用并删除最顶部贮藏）</span></span><br><span class="line">git stash pop</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加贮藏（包括未跟踪文件）</span></span><br><span class="line">git stash -u <span class="comment"># -u 即 --include-untracked，`git stash` == `git stash push`，如果要添加信息，添加 -m</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 交互式添加贮藏（看到 diff，给选项进行选择是否添加贮藏）</span></span><br><span class="line">git stash --patch</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切新分支并应用贮藏</span></span><br><span class="line">git stash branch &lt;branch-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看贮藏内容</span></span><br><span class="line">git stash show -p <span class="comment"># -p 显示详细信息</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 清除未跟踪文件（交互式 -i）</span></span><br><span class="line">git clean -d -i</span><br><span class="line"></span><br><span class="line"><span class="comment"># ?</span></span><br><span class="line">git stash apply --index <span class="comment"># ?</span></span><br></pre></td></tr></table></figure>

<h2 id="遴选"><a href="#遴选" class="headerlink" title="遴选"></a>遴选</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 遴选一条记录</span></span><br><span class="line">git cherry-pick &lt;commit-hash&gt;</span><br><span class="line"><span class="comment"># 遴选多条记录（不连续）</span></span><br><span class="line">git cherry-pick &lt;commit-hash-a&gt; &lt;commit-hash-b&gt;</span><br><span class="line"><span class="comment"># 遴选连续的多条记录（前开后闭）</span></span><br><span class="line">git cherry-pick &lt;commit-hash-a&gt;...&lt;commit-hash-c&gt;</span><br><span class="line"><span class="comment"># 添加配置项 -n，遴选不产生提交记录，只更新工作去与暂存区</span></span><br><span class="line">git cherry-pick -n &lt;commit-hash&gt;</span><br></pre></td></tr></table></figure>

<p>什么是遴选：在下面的分支图里，如果 MAIN 分支需要 BRANCH 分支的节点<code>H</code>的改动，可以通过<code>遴选</code>把节点<code>H</code>添加到节点<code>E</code>的后面。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">            *F-*G-*H-*I          BRANCH</span><br><span class="line">           /</span><br><span class="line">*A-*B-*C-*D-*E                   MAIN</span><br></pre></td></tr></table></figure>

<p>从 BRANCH 分支遴选节点<code>H</code>至主分支：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">            *F-*G-*H-*I          BRANCH</span><br><span class="line">           /</span><br><span class="line">*A-*B-*C-*D-*E-*H&#x27;               MAIN</span><br></pre></td></tr></table></figure>

<p>相关链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html">git cherry-pick 教程</a>。</li>
</ul>
<h2 id="回滚、撤销、重置"><a href="#回滚、撤销、重置" class="headerlink" title="回滚、撤销、重置"></a>回滚、撤销、重置</h2><p><code>git reset</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git reset HEAD@&#123;1&#125;</span><br><span class="line">git reset --soft &lt;commit-id&gt;</span><br><span class="line">git reset <span class="comment"># 所有暂存区的文件回到工作区</span></span><br><span class="line">git reset --keep &lt;commit-id&gt; <span class="comment"># ?</span></span><br><span class="line">git reset --merge &lt;commit-id&gt; <span class="comment"># ?</span></span><br></pre></td></tr></table></figure>

<p><code>git revert</code>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git revert &lt;commit-id&gt; <span class="comment"># 反转并提交</span></span><br><span class="line">git revert -n &lt;commit-id&gt; <span class="comment"># 反转，不提交，需要继续执行 git revert --continue，或者终止反转，git revert --abort</span></span><br><span class="line">git revert -n &lt;commit-id-start&gt;..&lt;commit-id-end&gt; <span class="comment"># 前开后闭，反转几个（一段）提交</span></span><br><span class="line">git revert HEAD@&#123;1&#125; <span class="comment"># 反转最近提交</span></span><br></pre></td></tr></table></figure>

<p>关于<code>git reset</code>中的<code>soft</code>、<code>mixed</code>和<code>hard</code>：</p>
<ul>
<li><code>--soft</code>：当前（还没<code>reset</code>）工作区和暂存区的改动不变，还在原位，<code>reset</code>之后有了差异，差异在暂存区中；</li>
<li><code>--mixed</code>：默认类型，<code>reset</code>前后所有改动都移到工作区中，包括原来在暂存区的，也移到工作区中；</li>
<li><code>--hard</code>：清空工作区和暂存区的改动，直接将 HEAD 指向<code>reset</code>的指向，使用时要注意。</li>
</ul>
<p>关于工作区、暂存区、History：工作区修改，<code>add</code>至暂存区，<code>commit</code>至 History。</p>
<ul>
<li>工作区：Working directory，Working Copy；</li>
<li>暂存区：Index，索引，Staging area，Stage/Index；</li>
<li>History：HEAD 指的地方，提交记录的地方，Repository。</li>
</ul>
<p>相关链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/50022436">What’s the difference between git reset –mixed, –soft, and –hard?</a></li>
<li><a target="_blank" rel="noopener" href="https://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html">常用 Git 命令清单-九、撤销</a></li>
</ul>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>查看配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global --list <span class="comment"># 查看配置表</span></span><br><span class="line">git config --global --get user.name <span class="comment"># 查看用户名</span></span><br><span class="line">git config --global --get user.email <span class="comment"># 查看用户邮箱</span></span><br></pre></td></tr></table></figure>

<p>配置文件的级别：<code>system</code>、<code>global</code>、<code>local</code>。</p>
<p>配置默认编辑器：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 常用编辑器：emacs / nano / vim / vi</span></span><br><span class="line">git config --global core.editor emacs</span><br></pre></td></tr></table></figure>

<p>编辑配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config -e <span class="comment"># 等价 vim .git/config</span></span><br><span class="line"><span class="comment"># 可加 --global，--system</span></span><br></pre></td></tr></table></figure>

<p>设置文件大小写敏感：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.ignorecase <span class="literal">false</span> <span class="comment"># git 默认忽略大小写</span></span><br></pre></td></tr></table></figure>

<h2 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h2><p>设置命令的别名：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global alias.haha  <span class="string">&quot;status -sb&quot;</span> <span class="comment"># 相当于 git status -sb</span></span><br><span class="line">git config --global alias.ci  <span class="string">&quot;commit&quot;</span> <span class="comment"># 相当于 git commit</span></span><br></pre></td></tr></table></figure>

<p>删除命令的别名：删除<code>.git/config</code>里对应别名所在行，如果是全局的别名，删除<code>~/.gitconfig</code>里对应别名所在行，或者：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global --<span class="built_in">unset</span> alias.haha <span class="comment"># unset</span></span><br></pre></td></tr></table></figure>

<p>自定义简短 log msg：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global --replace-all alias.lg <span class="string">&quot;log --pretty=format:&#x27;%h %ad %an %s&#x27; --date=local&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="子模块"><a href="#子模块" class="headerlink" title="子模块"></a>子模块</h2><h2 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h2><ul>
<li><a target="_blank" rel="noopener" href="https://github.com/magit/magit">magit</a>：Emacs git 客户端</li>
<li><a target="_blank" rel="noopener" href="https://git-fork.com/">fork</a>：Mac git 客户端，简洁，方便，反应快</li>
<li><a target="_blank" rel="noopener" href="https://github.com/jesseduffield/lazygit">lazygit</a>：命令行 git 客户端</li>
</ul>
<h2 id="修改文件名称的大小写"><a href="#修改文件名称的大小写" class="headerlink" title="修改文件名称的大小写"></a>修改文件名称的大小写</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">mv</span> SONG song2</span><br><span class="line">git <span class="built_in">mv</span> song2 song</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;rename &#x27;song&#x27;&quot;</span></span><br></pre></td></tr></table></figure>

<p>两个相同名称的文件夹：</p>
<p>如果通过<code>git config --global core.ignorecase false</code>把文件名设置为大小写敏感后，修改本地文件夹<code>song</code>为<code>Song</code>，然后上传，远程仓库将存在两个名称相同、大小写不同的（song 和 Song）文件夹（git version 2.34.1, macOS 12.5 (21G72)）。</p>
<p>相关链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.v2ex.com/t/862453">被文件名大小写的问题搞晕了</a>：V2EX 上关于 Git 文件名大小写修改的讨论。</li>
</ul>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p><a target="_blank" rel="noopener" href="https://git-scm.com/docs/git-show"><code>git show</code></a>，显示最近提交的信息，与之相关的其它命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git show &lt;commit&gt;</span><br><span class="line">git show HEAD^ <span class="comment"># 上次提交</span></span><br><span class="line">git show HEAD@&#123;n&#125; <span class="comment"># 倒数第 n 次提交</span></span><br><span class="line">git show &lt;commit&gt;:&lt;file&gt; <span class="comment"># 查看一次提交的一个文件的变化</span></span><br><span class="line">git show &lt;branch&gt; <span class="comment"># 查看一个分支最近的一次提交</span></span><br><span class="line">git show &lt;branch&gt;@&#123;n&#125; <span class="comment"># 一个分支的倒数第 n 次提交</span></span><br></pre></td></tr></table></figure>

<p><code>git restore --staged &lt;file&gt;</code>取消暂存。</p>
<p><code>git rm --cached &lt;file&gt;</code>，撤销跟踪，保留工作区的文件内容。<code>git rm -f &lt;file&gt;</code>，强制删除文件。</p>
<p>Github 新创建仓库的 Git 拉取提示：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;# git-learning&quot;</span> &gt;&gt; README.md <span class="comment"># 创建一个文件，往里面加入文本</span></span><br><span class="line">git init <span class="comment"># 初始化 git</span></span><br><span class="line">git add README.md</span><br><span class="line">git commit -m <span class="string">&quot;first commit&quot;</span></span><br><span class="line">git branch -M main <span class="comment"># 重命名默认分支名称</span></span><br><span class="line">git remote add origin git@github.com:wswmsword/git-learning.git</span><br><span class="line">git push -u origin main</span><br></pre></td></tr></table></figure>

<p>获取提交的数量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git rev-list --count HEAD</span><br><span class="line">git rev-list --count HEAD --since=<span class="string">&quot;Dec 3 2015&quot;</span>  --before=<span class="string">&quot;Jan 3 2016&quot;</span> <span class="comment"># 一段时间</span></span><br><span class="line">git shortlog -s</span><br><span class="line">git shortlog -s --all <span class="comment"># -all 所有分支</span></span><br></pre></td></tr></table></figure>

<p>切换上一次的分支：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout - <span class="comment"># 只需添加一个短杠，其它命令兴许也能用</span></span><br></pre></td></tr></table></figure>

<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>资料：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/k88hudson/git-flight-rules/blob/master/README_zh-CN.md">Git 飞行指南</a></li>
<li><a target="_blank" rel="noopener" href="https://git-scm.com/book/zh/v2">Git Book</a></li>
<li><a target="_blank" rel="noopener" href="http://wkevin.github.io/GitChat/gitchat.html">Git 聊天入门</a></li>
<li><a target="_blank" rel="noopener" href="https://www.kancloud.cn/kancloud/progit/70158">Pro Git</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/xjh22222228/git-manual">Git常用命令参考手册</a></li>
<li><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/896043488029600">廖雪峰 git 教程</a></li>
<li><a target="_blank" rel="noopener" href="https://cs-cjl.com/2014/05/06/learn_git_with_me_12">跟我一起学 Git</a></li>
<li><a href="Git%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97">Git 权威指南</a></li>
<li><a target="_blank" rel="noopener" href="https://ohshitgit.com/zh">Oh Shit, Git!?!</a></li>
<li><a target="_blank" rel="noopener" href="http://niliu.me/articles/513.html">Git常用命令整理</a></li>
</ul>
<p>其它链接：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/wswmsword/git-learning">Git 实验仓库 - git-learning</a>：我创建的用于执行本学习记录里每一条命令的 git 仓库；</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/a/43868889">Setting up and using Meld as your git difftool and mergetool on a Mac</a>。</li>
</ul>


  </article>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <div class="busuanzi center">
    页阅读量:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp;
    站访问量:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp;
    站访客数:&nbsp;<span id="busuanzi_value_site_uv"></span>
  </div>


    





    </div>
  </div>
  <footer class="page-footer"><div class="clearfix">
</div>
<div class="right-foot">
    <div class="firstrow">
        <a href="#top" target="_self">
        <svg class="i-caret-right" viewBox="0 0 32 32" width="24" height="24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
            <path d="M10 30 L26 16 10 2 Z"></path>
        </svg>
        </a>
        © chen 2016-2021
    </div>
    <div class="secondrow">
        <a target="_blank" rel="noopener" href="https://www.poinotes.com/">
        Signal
        </a>
    </div>
</div>
<div class="clearfix">
</div>
</footer>
  <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<script src="/js/search.min.js"></script>
<script type="text/javascript">

// disqus scripts


// dropdown scripts
$(".dropdown").click(function(event) {
  var current = $(this);
  event.stopPropagation();
  $(current).children(".dropdown-content")[($(current).children(".dropdown-content").hasClass("open"))?'removeClass':'addClass']("open")
});
$(document).click(function(){
    $(".dropdown-content").removeClass("open");
})

var path = "/search.xml";
searchFunc(path, 'local-search-input', 'local-search-result');

</script>

</body>
</html>
