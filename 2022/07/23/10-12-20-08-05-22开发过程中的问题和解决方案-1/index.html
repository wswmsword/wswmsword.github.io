<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="google-site-verification" content="" />
  <meta name="referrer" content="unsafe-url">
  
  <title>10/12/20-08/05/22开发过程中的问题和解决方案</title>
  <meta name="author" content="wsWmsword">
  <meta name="description" content="Pain is temporary Pride is forever">
  
  
  <meta property="og:title" content="10/12/20-08/05/22开发过程中的问题和解决方案"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:site_name" content="Strawberry Fields"/>
  <link href="/apple-touch-icon-precomposed.png" sizes="180x180" rel="apple-touch-icon-precomposed">
  <link rel="alternate" href="/atom.xml" title="Strawberry Fields" type="application/atom+xml">
  <link rel="stylesheet" href="/css/m.min.css">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>

<meta name="generator" content="Hexo 5.4.2"></head>

<body>
  <a id="top"></a>
  <div id="main">
    <div class="main-ctnr">
      <div class="behind">
  <a href="/" class="back black-color">
    <svg class="i-close" viewBox="0 0 32 32" width="22" height="22" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
        <path d="M2 30 L30 2 M30 30 L2 2"></path>
    </svg>
  </a>
  
    <div class="description">
      &nbsp;郁郁青青 长过千寻
    </div>
    
</div>


  <article class="standard post">
    <div class="title">
      
  
    <h1 class="page-title center">
        10/12/20-08/05/22开发过程中的问题和解决方案
    </h1>
  


    </div>
    <div class="meta center">
      <time datetime="2022-07-23T15:22:16.000Z" itemprop="datePublished">
  <svg class="i-calendar" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
    <path d="M2 6 L2 30 30 30 30 6 Z M2 15 L30 15 M7 3 L7 9 M13 3 L13 9 M19 3 L19 9 M25 3 L25 9"></path>
  </svg>
  &nbsp;
  2022-07-23
</time>


    
    &nbsp;
    <svg class="i-tag" viewBox="0 0 32 32" width="16" height="16" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">
      <circle cx="24" cy="8" r="2"></circle>
      <path d="M2 18 L18 2 30 2 30 14 14 30 Z"></path>
    </svg>
    &nbsp;
    <a href="/categories/笔记本/">笔记本</a>





    </div>
    <hr>
    
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A9-uniapp-%E9%A1%B9%E7%9B%AE%E9%87%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E8%BF%9C%E7%A8%8B%E8%B5%84%E6%BA%90%E5%92%8C%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81%E5%90%88%E4%B8%BA%E4%B8%80%E5%A5%97%E9%A1%B9%E7%9B%AE"><span class="toc-text">让 uniapp 项目里使用的远程资源和项目代码合为一套项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%8B%E7%82%B9"><span class="toc-text">埋点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%A6%BB%E5%9F%8B%E7%82%B9%E5%86%85%E5%AE%B9%E5%92%8C%E9%A1%B5%E9%9D%A2%E9%80%BB%E8%BE%91"><span class="toc-text">分离埋点内容和页面逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%B6%E8%BF%9F%E5%9F%8B%E7%82%B9%E8%AF%B7%E6%B1%82%E4%B8%8D%E9%98%BB%E7%A2%8D%E4%B8%9A%E5%8A%A1%E8%AF%B7%E6%B1%82"><span class="toc-text">延迟埋点请求不阻碍业务请求</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%87%8C%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="toc-text">小程序里的自定义导航栏</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8E%E5%8F%B0%E7%9A%84%E9%85%8D%E7%BD%AE%E8%B7%B3%E8%BD%AC"><span class="toc-text">后台的配置跳转</span></a></li></ol></li></ol>
    
    <div class="picture-container">
      
    </div>
    <h1 id=""><a href="#" class="headerlink" title=""></a></h1><h2 id="让-uniapp-项目里使用的远程资源和项目代码合为一套项目"><a href="#让-uniapp-项目里使用的远程资源和项目代码合为一套项目" class="headerlink" title="让 uniapp 项目里使用的远程资源和项目代码合为一套项目"></a>让 uniapp 项目里使用的远程资源和项目代码合为一套项目</h2><p>问题:</p>
<p>（uniapp）开发小程序时，因为小程序的<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html">体积限制</a>，大型资源只能放在服务器。资源放到服务器后，代码里用硬编码的链接引用，但是服务器的资源和项目代码同属于一个项目，却不能在项目结构里体现，远程的资源不能用 git 管理，因此不能跟踪资源的变化。</p>
<p>方案:</p>
<p>资源也放在项目结构中，使用 git 托管。在热重载的环境（此时不需要上传至小程序服务器，只是前端工程师本地运行、开发），项目内的链接指向本地。在打包的环境（此时上传小程序服务器，有体积限制，可能用于给测试工程师测试、项目上线），项目内的资源链接指向远程的服务器上的资源链接。</p>
<p>热重载环境把资源复制到产出包内，链接指向产出包内资源所在路径（如<code>/static/img-large/index/demo.png</code>）；打包环境不复制资源到产出包，否则体积过大，链接指向服务器（如<code>https://demo.com/static/img-large/index/demo.png</code>）。</p>
<p>解释：</p>
<p>热重载环境指向本地链接是为了：使用项目中的资源；使用 git 托管资源。</p>
<p>打包环境指向服务器资源链接是为了：同步本地项目的资源，强制要求上传资源，并且和本地资源结构一致。</p>
<p>如果热重载和打包的环境都指向远程资源路径，那本地的资源只能起到 git 托管作用，在开发过程中想引用资源的时候会执行两个步骤：首先将资源拖到项目中，再将资源拖到服务器中。由于 git 托管原来是静默的行为，现在需要主动拖到项目中，整个过程不自然，且不能确定项目资源和服务器资源能够同步，可能遗漏。</p>
<h2 id="埋点"><a href="#埋点" class="headerlink" title="埋点"></a>埋点</h2><h3 id="分离埋点内容和页面逻辑"><a href="#分离埋点内容和页面逻辑" class="headerlink" title="分离埋点内容和页面逻辑"></a>分离埋点内容和页面逻辑</h3><p>问题：</p>
<p>埋点内容和页面逻辑无关，直接添加在逻辑代码的首行或者末行会让代码更混乱。</p>
<p>方案：</p>
<p>埋点内容单独放在埋点文件中管理，在逻辑中进行埋点的时候，只传递必要的变量。</p>
<p><a href="https://wswmsword.github.io/2022/06/18/%E6%95%B0%E6%8D%AE%E5%9F%8B%E7%82%B9%EF%BC%88%E4%BA%8C%EF%BC%89/">数据埋点（二）</a></p>
<h3 id="延迟埋点请求不阻碍业务请求"><a href="#延迟埋点请求不阻碍业务请求" class="headerlink" title="延迟埋点请求不阻碍业务请求"></a>延迟埋点请求不阻碍业务请求</h3><h2 id="小程序里的自定义导航栏"><a href="#小程序里的自定义导航栏" class="headerlink" title="小程序里的自定义导航栏"></a>小程序里的自定义导航栏</h2><h2 id="后台的配置跳转"><a href="#后台的配置跳转" class="headerlink" title="后台的配置跳转"></a>后台的配置跳转</h2>

  </article>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <div class="busuanzi center">
    页阅读量:&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;・&nbsp;
    站访问量:&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;・&nbsp;
    站访客数:&nbsp;<span id="busuanzi_value_site_uv"></span>
  </div>


    





    </div>
  </div>
  <footer class="page-footer"><div class="clearfix">
</div>
<div class="right-foot">
    <div class="firstrow">
        <a href="#top" target="_self">
        <svg class="i-caret-right" viewBox="0 0 32 32" width="24" height="24" fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="3">
            <path d="M10 30 L26 16 10 2 Z"></path>
        </svg>
        </a>
        © chen 2016-2021
    </div>
    <div class="secondrow">
        <a target="_blank" rel="noopener" href="https://www.poinotes.com/">
        Signal
        </a>
    </div>
</div>
<div class="clearfix">
</div>
</footer>
  <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<script src="/js/search.min.js"></script>
<script type="text/javascript">

// disqus scripts


// dropdown scripts
$(".dropdown").click(function(event) {
  var current = $(this);
  event.stopPropagation();
  $(current).children(".dropdown-content")[($(current).children(".dropdown-content").hasClass("open"))?'removeClass':'addClass']("open")
});
$(document).click(function(){
    $(".dropdown-content").removeClass("open");
})

var path = "/search.xml";
searchFunc(path, 'local-search-input', 'local-search-result');

</script>

</body>
</html>
